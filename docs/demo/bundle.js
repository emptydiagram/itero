!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e,n){(function(e){"undefined"!=typeof self&&self,t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,n,r){"use strict";function o(t){if(!(this instanceof o))return new o(t);this._=t}var i=o.prototype;function a(t,e){for(var n=0;n<t;n++)e(n)}function s(t,e,n){return function(t,e){a(e.length,(function(n){t(e[n],n,e)}))}((function(n,r,o){e=t(e,n,r,o)}),n),e}function l(t,e){return s((function(e,n,r,o){return e.concat([t(n,r,o)])}),[],e)}function u(t,n){var r={v:0,buf:n};return a(t,(function(){var t;r={v:r.v<<1|(t=r.buf,t[0]>>7),buf:function(t){var n=s((function(t,n,r,o){return t.concat(r===o.length-1?e.from([n,0]).readUInt16BE(0):o.readUInt16BE(r))}),[],t);return e.from(l((function(t){return(t<<1&65535)>>8}),n))}(r.buf)}})),r}function c(){return void 0!==e}function d(){if(!c())throw new Error("Buffer global does not exist; please use webpack if you need to parse Buffers in the browser.")}function h(t){d();var e=s((function(t,e){return t+e}),0,t);if(e%8!=0)throw new Error("The bits ["+t.join(", ")+"] add up to "+e+" which is not an even number of bytes; the total should be divisible by 8");var n,r=e/8,i=(n=function(t){return t>48},s((function(t,e){return t||(n(e)?e:t)}),null,t));if(i)throw new Error(i+" bit range requested exceeds 48 bit (6 byte) Number max.");return new o((function(e,n){var o=r+n;return o>e.length?x(n,r.toString()+" bytes"):b(o,s((function(t,e){var n=u(e,t.buf);return{coll:t.coll.concat(n.v),buf:n.buf}}),{coll:[],buf:e.slice(n,o)},t).coll)}))}function f(t,e){return new o((function(n,r){return d(),r+e>n.length?x(r,e+" bytes for "+t):b(r+e,n.slice(r,r+e))}))}function p(t,e){if("number"!=typeof(n=e)||Math.floor(n)!==n||e<0||e>6)throw new Error(t+" requires integer length in range [0, 6].");var n}function y(t){return p("uintBE",t),f("uintBE("+t+")",t).map((function(e){return e.readUIntBE(0,t)}))}function g(t){return p("uintLE",t),f("uintLE("+t+")",t).map((function(e){return e.readUIntLE(0,t)}))}function m(t){return p("intBE",t),f("intBE("+t+")",t).map((function(e){return e.readIntBE(0,t)}))}function v(t){return p("intLE",t),f("intLE("+t+")",t).map((function(e){return e.readIntLE(0,t)}))}function E(t){return t instanceof o}function w(t){return"[object Array]"==={}.toString.call(t)}function S(t){return c()&&e.isBuffer(t)}function b(t,e){return{status:!0,index:t,value:e,furthest:-1,expected:[]}}function x(t,e){return w(e)||(e=[e]),{status:!1,index:-1,value:null,furthest:t,expected:e}}function $(t,e){if(!e)return t;if(t.furthest>e.furthest)return t;var n=t.furthest===e.furthest?function(t,e){for(var n={},r=0;r<t.length;r++)n[t[r]]=!0;for(var o=0;o<e.length;o++)n[e[o]]=!0;var i=[];for(var a in n)({}).hasOwnProperty.call(n,a)&&i.push(a);return i.sort(),i}(t.expected,e.expected):e.expected;return{status:t.status,index:t.index,value:t.value,furthest:e.furthest,expected:n}}function I(t,e){if(S(t))return{offset:e,line:-1,column:-1};var n=t.slice(0,e).split("\n");return{offset:e,line:n.length,column:n[n.length-1].length+1}}function C(t){if(!E(t))throw new Error("not a parser: "+t)}function A(t,e){return"string"==typeof t?t.charAt(e):t[e]}function k(t){if("number"!=typeof t)throw new Error("not a number: "+t)}function D(t){if("function"!=typeof t)throw new Error("not a function: "+t)}function L(t){if("string"!=typeof t)throw new Error("not a string: "+t)}function P(t,e){return new Array(e+1).join(t)}function _(t,e,n){var r=e-t.length;return r<=0?t:P(n,r)+t}function B(t,e,n,r){return{from:t-e>0?t-e:0,to:t+n>r?r:t+n}}function T(t,e){var n,r,o,i,a,u=e.index,c=u.offset,d=1;if(c===t.length)return"Got the end of the input";if(S(t)){var h=c-c%8,f=c-h,p=B(h,40,40,t.length),y=l((function(t){return l((function(t){return _(t.toString(16),2,"0")}),t)}),function(t,e){var n=t.length,r=[],o=0;if(n<=8)return[t.slice()];for(var i=0;i<n;i++)r[o]||r.push([]),r[o].push(t[i]),(i+1)%8==0&&o++;return r}(t.slice(p.from,p.to).toJSON().data));i=function(t){return 0===t.from&&1===t.to?{from:t.from,to:t.to}:{from:t.from/8,to:Math.floor(t.to/8)}}(p),r=h/8,n=3*f,f>=4&&(n+=1),d=2,o=l((function(t){return t.length<=4?t.join(" "):t.slice(0,4).join(" ")+"  "+t.slice(4).join(" ")}),y),(a=(8*(i.to>0?i.to-1:i.to)).toString(16).length)<2&&(a=2)}else{var g=t.split(/\r\n|[\n\r\u2028\u2029]/);n=u.column-1,r=u.line-1,i=B(r,2,3,g.length),o=g.slice(i.from,i.to),a=i.to.toString().length}var m=r-i.from;return S(t)&&(a=(8*(i.to>0?i.to-1:i.to)).toString(16).length)<2&&(a=2),s((function(e,r,o){var s,l=o===m,u=l?"> ":"  ";return s=S(t)?_((8*(i.from+o)).toString(16),a,"0"):_((i.from+o+1).toString(),a," "),[].concat(e,[u+s+" | "+r],l?["  "+P(" ",a)+" | "+_("",n," ")+P("^",d)]:[])}),[],o).join("\n")}function N(t,e){return["\n","-- PARSING FAILED "+P("-",50),"\n\n",T(t,e),"\n\n",(n=e.expected,1===n.length?"Expected:\n\n"+n[0]:"Expected one of the following: \n\n"+n.join(", ")),"\n"].join("");var n}function O(t){var e=""+t;return e.slice(e.lastIndexOf("/")+1)}function j(){for(var t=[].slice.call(arguments),e=t.length,n=0;n<e;n+=1)C(t[n]);return o((function(n,r){for(var o,i=new Array(e),a=0;a<e;a+=1){if(!(o=$(t[a]._(n,r),o)).status)return o;i[a]=o.value,r=o.index}return $(b(r,i),o)}))}function M(){var t=[].slice.call(arguments);if(0===t.length)throw new Error("seqMap needs at least one argument");var e=t.pop();return D(e),j.apply(null,t).map((function(t){return e.apply(null,t)}))}function R(){var t=[].slice.call(arguments),e=t.length;if(0===e)return G("zero alternates");for(var n=0;n<e;n+=1)C(t[n]);return o((function(e,n){for(var r,o=0;o<t.length;o+=1)if((r=$(t[o]._(e,n),r)).status)return r;return r}))}function U(t,e){return z(t,e).or(Y([]))}function z(t,e){return C(t),C(e),M(t,e.then(t).many(),(function(t,e){return[t].concat(e)}))}function H(t){L(t);var e="'"+t+"'";return o((function(n,r){var o=r+t.length,i=n.slice(r,o);return i===t?b(o,i):x(r,e)}))}function F(t,e){!function(t){if(!(t instanceof RegExp))throw new Error("not a regexp: "+t);for(var e=O(t),n=0;n<e.length;n++){var r=e.charAt(n);if("i"!==r&&"m"!==r&&"u"!==r)throw new Error('unsupported regexp flag "'+r+'": '+t)}}(t),arguments.length>=2?k(e):e=0;var n=function(t){return RegExp("^(?:"+t.source+")",O(t))}(t),r=""+t;return o((function(t,o){var i=n.exec(t.slice(o));if(i){if(0<=e&&e<=i.length){var a=i[0],s=i[e];return b(o+a.length,s)}return x(o,"valid match group (0 to "+i.length+") in "+r)}return x(o,r)}))}function Y(t){return o((function(e,n){return b(n,t)}))}function G(t){return o((function(e,n){return x(n,t)}))}function W(t){if(E(t))return o((function(e,n){var r=t._(e,n);return r.index=n,r.value="",r}));if("string"==typeof t)return W(H(t));if(t instanceof RegExp)return W(F(t));throw new Error("not a string, regexp, or parser: "+t)}function q(t){return C(t),o((function(e,n){var r=t._(e,n),o=e.slice(n,r.index);return r.status?x(n,'not "'+o+'"'):b(n,null)}))}function V(t){return D(t),o((function(e,n){var r=A(e,n);return n<e.length&&t(r)?b(n+1,r):x(n,"a character/byte matching "+t)}))}function X(t,e){arguments.length<2&&(e=t,t=void 0);var n=o((function(t,r){return n._=e()._,n._(t,r)}));return t?n.desc(t):n}function J(){return G("fantasy-land/empty")}i.parse=function(t){if("string"!=typeof t&&!S(t))throw new Error(".parse must be called with a string or Buffer as its argument");var e=this.skip(tt)._(t,0);return e.status?{status:!0,value:e.value}:{status:!1,index:I(t,e.furthest),expected:e.expected}},i.tryParse=function(t){var e=this.parse(t);if(e.status)return e.value;var n=N(t,e),r=new Error(n);throw r.type="ParsimmonError",r.result=e,r},i.assert=function(t,e){return this.chain((function(n){return t(n)?Y(n):G(e)}))},i.or=function(t){return R(this,t)},i.trim=function(t){return this.wrap(t,t)},i.wrap=function(t,e){return M(t,this,e,(function(t,e){return e}))},i.thru=function(t){return t(this)},i.then=function(t){return C(t),j(this,t).map((function(t){return t[1]}))},i.many=function(){var t=this;return o((function(e,n){for(var r=[],o=void 0;;){if(!(o=$(t._(e,n),o)).status)return $(b(n,r),o);if(n===o.index)throw new Error("infinite loop detected in .many() parser --- calling .many() on a parser which can accept zero characters is usually the cause");n=o.index,r.push(o.value)}}))},i.tieWith=function(t){return L(t),this.map((function(e){if(function(t){if(!w(t))throw new Error("not an array: "+t)}(e),e.length){L(e[0]);for(var n=e[0],r=1;r<e.length;r++)L(e[r]),n+=t+e[r];return n}return""}))},i.tie=function(){return this.tieWith("")},i.times=function(t,e){var n=this;return arguments.length<2&&(e=t),k(t),k(e),o((function(r,o){for(var i=[],a=void 0,s=void 0,l=0;l<t;l+=1){if(s=$(a=n._(r,o),s),!a.status)return s;o=a.index,i.push(a.value)}for(;l<e&&(s=$(a=n._(r,o),s),a.status);l+=1)o=a.index,i.push(a.value);return $(b(o,i),s)}))},i.result=function(t){return this.map((function(){return t}))},i.atMost=function(t){return this.times(0,t)},i.atLeast=function(t){return M(this.times(t),this.many(),(function(t,e){return t.concat(e)}))},i.map=function(t){D(t);var e=this;return o((function(n,r){var o=e._(n,r);return o.status?$(b(o.index,t(o.value)),o):o}))},i.contramap=function(t){D(t);var e=this;return o((function(n,r){var o=e.parse(t(n.slice(r)));return o.status?b(r+n.length,o.value):o}))},i.promap=function(t,e){return D(t),D(e),this.contramap(t).map(e)},i.skip=function(t){return j(this,t).map((function(t){return t[0]}))},i.mark=function(){return M(K,this,K,(function(t,e,n){return{start:t,value:e,end:n}}))},i.node=function(t){return M(K,this,K,(function(e,n,r){return{name:t,value:n,start:e,end:r}}))},i.sepBy=function(t){return U(this,t)},i.sepBy1=function(t){return z(this,t)},i.lookahead=function(t){return this.skip(W(t))},i.notFollowedBy=function(t){return this.skip(q(t))},i.desc=function(t){w(t)||(t=[t]);var e=this;return o((function(n,r){var o=e._(n,r);return o.status||(o.expected=t),o}))},i.fallback=function(t){return this.or(Y(t))},i.ap=function(t){return M(t,this,(function(t,e){return t(e)}))},i.chain=function(t){var e=this;return o((function(n,r){var o=e._(n,r);return o.status?$(t(o.value)._(n,o.index),o):o}))},i.concat=i.or,i.empty=J,i.of=Y,i["fantasy-land/ap"]=i.ap,i["fantasy-land/chain"]=i.chain,i["fantasy-land/concat"]=i.concat,i["fantasy-land/empty"]=i.empty,i["fantasy-land/of"]=i.of,i["fantasy-land/map"]=i.map;var K=o((function(t,e){return b(e,I(t,e))})),Z=o((function(t,e){return e>=t.length?x(e,"any character/byte"):b(e+1,A(t,e))})),Q=o((function(t,e){return b(t.length,t.slice(e))})),tt=o((function(t,e){return e<t.length?x(e,"EOF"):b(e,null)})),et=F(/[0-9]/).desc("a digit"),nt=F(/[0-9]*/).desc("optional digits"),rt=F(/[a-z]/i).desc("a letter"),ot=F(/[a-z]*/i).desc("optional letters"),it=F(/\s*/).desc("optional whitespace"),at=F(/\s+/).desc("whitespace"),st=H("\r"),lt=H("\n"),ut=H("\r\n"),ct=R(ut,lt,st).desc("newline"),dt=R(ct,tt);o.all=Q,o.alt=R,o.any=Z,o.cr=st,o.createLanguage=function(t){var e={};for(var n in t)({}).hasOwnProperty.call(t,n)&&function(n){e[n]=X((function(){return t[n](e)}))}(n);return e},o.crlf=ut,o.custom=function(t){return o(t(b,x))},o.digit=et,o.digits=nt,o.empty=J,o.end=dt,o.eof=tt,o.fail=G,o.formatError=N,o.index=K,o.isParser=E,o.lazy=X,o.letter=rt,o.letters=ot,o.lf=lt,o.lookahead=W,o.makeFailure=x,o.makeSuccess=b,o.newline=ct,o.noneOf=function(t){return V((function(e){return t.indexOf(e)<0})).desc("none of '"+t+"'")},o.notFollowedBy=q,o.of=Y,o.oneOf=function(t){for(var e=t.split(""),n=0;n<e.length;n++)e[n]="'"+e[n]+"'";return V((function(e){return t.indexOf(e)>=0})).desc(e)},o.optWhitespace=it,o.Parser=o,o.range=function(t,e){return V((function(n){return t<=n&&n<=e})).desc(t+"-"+e)},o.regex=F,o.regexp=F,o.sepBy=U,o.sepBy1=z,o.seq=j,o.seqMap=M,o.seqObj=function(){for(var t,e={},n=0,r=(t=arguments,Array.prototype.slice.call(t)),i=r.length,a=0;a<i;a+=1){var s=r[a];if(!E(s)){if(w(s)&&2===s.length&&"string"==typeof s[0]&&E(s[1])){var l=s[0];if(Object.prototype.hasOwnProperty.call(e,l))throw new Error("seqObj: duplicate key "+l);e[l]=!0,n++;continue}throw new Error("seqObj arguments must be parsers or [string, parser] array pairs.")}}if(0===n)throw new Error("seqObj expects at least one named parser, found zero");return o((function(t,e){for(var n,o={},a=0;a<i;a+=1){var s,l;if(w(r[a])?(s=r[a][0],l=r[a][1]):(s=null,l=r[a]),!(n=$(l._(t,e),n)).status)return n;s&&(o[s]=n.value),e=n.index}return $(b(e,o),n)}))},o.string=H,o.succeed=Y,o.takeWhile=function(t){return D(t),o((function(e,n){for(var r=n;r<e.length&&t(A(e,r));)r++;return b(r,e.slice(n,r))}))},o.test=V,o.whitespace=at,o["fantasy-land/empty"]=J,o["fantasy-land/of"]=Y,o.Binary={bitSeq:h,bitSeqObj:function(t){d();var e={},n=0,r=l((function(t){if(w(t)){var r=t;if(2!==r.length)throw new Error("["+r.join(", ")+"] should be length 2, got length "+r.length);if(L(r[0]),k(r[1]),Object.prototype.hasOwnProperty.call(e,r[0]))throw new Error("duplicate key in bitSeqObj: "+r[0]);return e[r[0]]=!0,n++,r}return k(t),[null,t]}),t);if(n<1)throw new Error("bitSeqObj expects at least one named pair, got ["+t.join(", ")+"]");var o=l((function(t){return t[0]}),r);return h(l((function(t){return t[1]}),r)).map((function(t){return s((function(t,e){return null!==e[0]&&(t[e[0]]=e[1]),t}),{},l((function(e,n){return[e,t[n]]}),o))}))},byte:function(t){if(d(),k(t),t>255)throw new Error("Value specified to byte constructor ("+t+"=0x"+t.toString(16)+") is larger in value than a single byte.");var e=(t>15?"0x":"0x0")+t.toString(16);return o((function(n,r){var o=A(n,r);return o===t?b(r+1,o):x(r,e)}))},buffer:function(t){return f("buffer",t).map((function(t){return e.from(t)}))},encodedString:function(t,e){return f("string",e).map((function(e){return e.toString(t)}))},uintBE:y,uint8BE:y(1),uint16BE:y(2),uint32BE:y(4),uintLE:g,uint8LE:g(1),uint16LE:g(2),uint32LE:g(4),intBE:m,int8BE:m(1),int16BE:m(2),int32BE:m(4),intLE:v,int8LE:v(1),int16LE:v(2),int32LE:v(4),floatBE:f("floatBE",4).map((function(t){return t.readFloatBE(0)})),floatLE:f("floatLE",4).map((function(t){return t.readFloatLE(0)})),doubleBE:f("doubleBE",8).map((function(t){return t.readDoubleBE(0)})),doubleLE:f("doubleLE",8).map((function(t){return t.readDoubleLE(0)}))},t.exports=o}])}).call(this,n(5).Buffer)},function(t,e,n){"use strict";t.exports=l,l.Item=c;var r=l.prototype,o=c.prototype,i=d.prototype,a="undefined"==typeof Symbol?void 0:Symbol.iterator;r.tail=r.head=null,l.of=function(){return u(new this,arguments)},l.from=function(t){return u(new this,t)},r.toArray=function(){var t=this.head,e=[];for(;t;)e.push(t),t=t.next;return e},r.prepend=function(t){var e=this.head;if(!t)return!1;if(!t.append||!t.prepend||!t.detach)throw new Error(s+"#prepend`.");if(e)return e.prepend(t);return t.detach(),t.list=this,this.head=t,this.size++,t},r.append=function(t){if(!t)return!1;if(!t.append||!t.prepend||!t.detach)throw new Error(s+"#append`.");var e=this.head,n=this.tail;if(n)return n.append(t);if(e)return e.append(t);return t.detach(),t.list=this,this.head=t,this.size++,t},void 0!==a&&(r[a]=function(){return new d(this.head)}),o.next=o.prev=o.list=null,o.prepend=function(t){if(!(t&&t.append&&t.prepend&&t.detach))throw new Error(s+"Item#prepend`.");var e=this.list,n=this.prev;if(!e)return!1;t.detach(),n&&(t.prev=n,n.next=t);t.next=this,t.list=e,this.prev=t,this===e.head&&(e.head=t);e.tail||(e.tail=this);return e.size++,t},o.append=function(t){if(!(t&&t.append&&t.prepend&&t.detach))throw new Error(s+"Item#append`.");var e=this.list,n=this.next;if(!e)return!1;t.detach(),n&&(t.next=n,n.prev=t);t.prev=this,t.list=e,this.next=t,this!==e.tail&&e.tail||(e.tail=t);return e.size++,t},o.detach=function(){var t=this.list,e=this.prev,n=this.next;if(!t)return this;t.tail===this&&(t.tail=e);t.head===this&&(t.head=n);t.tail===t.head&&(t.tail=null);e&&(e.next=n);n&&(n.prev=e);return this.prev=this.next=this.list=null,t.size--,this},i.next=function(){var t=this.item;return this.value=t,this.done=!t,this.item=t?t.next:void 0,this};var s="An argument without append, prepend, or detach methods was given to `List";function l(){this.size=0,0!==arguments.length&&u(this,arguments)}function u(t,e){var n,r,o,i;if(!e)return t;if(void 0!==a&&e[a])for(i=e[a](),o={};!o.done;)o=i.next(),t.append(o&&o.value);else for(n=e.length,r=-1;++r<n;)t.append(e[r]);return t}function c(){}function d(t){this.item=t}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},function(t,e,n){t.exports=n(18)},function(t,e,n){},function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(7),o=n(8),i=n(9);function a(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=l.prototype:(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,n){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return d(this,t)}return u(this,t,e,n)}function u(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);l.TYPED_ARRAY_SUPPORT?(t=e).__proto__=l.prototype:t=h(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n),o=(t=s(t,r)).write(e,n);o!==r&&(t=t.slice(0,o));return t}(t,e,n):function(t,e){if(l.isBuffer(e)){var n=0|f(e.length);return 0===(t=s(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?s(t,0):h(t,e);if("Buffer"===e.type&&i(e.data))return h(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function d(t,e){if(c(e),t=s(t,e<0?0:0|f(e)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e){var n=e.length<0?0:0|f(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function f(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function p(t,e){if(l.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(t).length;default:if(r)return U(t).length;e=(""+e).toLowerCase(),r=!0}}function y(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return D(this,e,n);case"utf8":case"utf-8":return C(this,e,n);case"ascii":return A(this,e,n);case"latin1":case"binary":return k(this,e,n);case"base64":return I(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function g(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function m(t,e,n,r,o){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof e&&(e=l.from(e,r)),l.isBuffer(e))return 0===e.length?-1:v(t,e,n,r,o);if("number"==typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):v(t,[e],n,r,o);throw new TypeError("val must be string, number or Buffer")}function v(t,e,n,r,o){var i,a=1,s=t.length,l=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,l/=2,n/=2}function u(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(o){var c=-1;for(i=n;i<s;i++)if(u(t,i)===u(e,-1===c?0:i-c)){if(-1===c&&(c=i),i-c+1===l)return c*a}else-1!==c&&(i-=i-c),c=-1}else for(n+l>s&&(n=s-l),i=n;i>=0;i--){for(var d=!0,h=0;h<l;h++)if(u(t,i+h)!==u(e,h)){d=!1;break}if(d)return i}return-1}function E(t,e,n,r){n=Number(n)||0;var o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;var i=e.length;if(i%2!=0)throw new TypeError("Invalid hex string");r>i/2&&(r=i/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function w(t,e,n,r){return H(U(e,t.length-n),t,n,r)}function S(t,e,n,r){return H(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function b(t,e,n,r){return S(t,e,n,r)}function x(t,e,n,r){return H(z(e),t,n,r)}function $(t,e,n,r){return H(function(t,e){for(var n,r,o,i=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(e,t.length-n),t,n,r)}function I(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function C(t,e,n){n=Math.min(t.length,n);for(var r=[],o=e;o<n;){var i,a,s,l,u=t[o],c=null,d=u>239?4:u>223?3:u>191?2:1;if(o+d<=n)switch(d){case 1:u<128&&(c=u);break;case 2:128==(192&(i=t[o+1]))&&(l=(31&u)<<6|63&i)>127&&(c=l);break;case 3:i=t[o+1],a=t[o+2],128==(192&i)&&128==(192&a)&&(l=(15&u)<<12|(63&i)<<6|63&a)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:i=t[o+1],a=t[o+2],s=t[o+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&(l=(15&u)<<18|(63&i)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,d=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),o+=d}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}e.Buffer=l,e.SlowBuffer=function(t){+t!=t&&(t=0);return l.alloc(+t)},e.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,n){return u(null,t,e,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,n){return function(t,e,n,r){return c(e),e<=0?s(t,e):void 0!==n?"string"==typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},l.allocUnsafe=function(t){return d(null,t)},l.allocUnsafeSlow=function(t){return d(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,o=0,i=Math.min(n,r);o<i;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=l.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var a=t[n];if(!l.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,o),o+=a.length}return r},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?C(this,0,t):y.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,n,r,o){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(this===t)return 0;for(var i=(o>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(i,a),u=this.slice(r,o),c=t.slice(e,n),d=0;d<s;++d)if(u[d]!==c[d]){i=u[d],a=c[d];break}return i<a?-1:a<i?1:0},l.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},l.prototype.indexOf=function(t,e,n){return m(this,t,e,n,!0)},l.prototype.lastIndexOf=function(t,e,n){return m(this,t,e,n,!1)},l.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var i=!1;;)switch(r){case"hex":return E(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return S(this,t,e,n);case"latin1":case"binary":return b(this,t,e,n);case"base64":return x(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,t,e,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function A(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(127&t[o]);return r}function k(t,e,n){var r="";n=Math.min(t.length,n);for(var o=e;o<n;++o)r+=String.fromCharCode(t[o]);return r}function D(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var o="",i=e;i<n;++i)o+=R(t[i]);return o}function L(t,e,n){for(var r=t.slice(e,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function P(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function _(t,e,n,r,o,i){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function B(t,e,n,r){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-n,2);o<i;++o)t[n+o]=(e&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function T(t,e,n,r){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-n,4);o<i;++o)t[n+o]=e>>>8*(r?o:3-o)&255}function N(t,e,n,r,o,i){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function O(t,e,n,r,i){return i||N(t,0,n,4),o.write(t,e,n,r,23,4),n+4}function j(t,e,n,r,i){return i||N(t,0,n,8),o.write(t,e,n,r,52,8),n+8}l.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=l.prototype;else{var o=e-t;n=new l(o,void 0);for(var i=0;i<o;++i)n[i]=this[i+t]}return n},l.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r},l.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=this[t+--e],o=1;e>0&&(o*=256);)r+=this[t+--e]*o;return r},l.prototype.readUInt8=function(t,e){return e||P(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||P(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||P(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||P(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||P(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=this[t],o=1,i=0;++i<e&&(o*=256);)r+=this[t+i]*o;return r>=(o*=128)&&(r-=Math.pow(2,8*e)),r},l.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||P(t,e,this.length);for(var r=e,o=1,i=this[t+--r];r>0&&(o*=256);)i+=this[t+--r]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*e)),i},l.prototype.readInt8=function(t,e){return e||P(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||P(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(t,e){e||P(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(t,e){return e||P(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||P(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||P(t,4,this.length),o.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||P(t,4,this.length),o.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||P(t,8,this.length),o.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||P(t,8,this.length),o.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||_(this,t,e,n,Math.pow(2,8*n)-1,0);var o=1,i=0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=t/o&255;return e+n},l.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||_(this,t,e,n,Math.pow(2,8*n)-1,0);var o=n-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+n},l.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):B(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):B(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):T(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):T(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);_(this,t,e,n,o-1,-o)}var i=0,a=1,s=0;for(this[e]=255&t;++i<n&&(a*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/a>>0)-s&255;return e+n},l.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var o=Math.pow(2,8*n-1);_(this,t,e,n,o-1,-o)}var i=n-1,a=1,s=0;for(this[e+i]=255&t;--i>=0&&(a*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/a>>0)-s&255;return e+n},l.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):B(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):B(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):T(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||_(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):T(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,n){return O(this,t,e,!0,n)},l.prototype.writeFloatBE=function(t,e,n){return O(this,t,e,!1,n)},l.prototype.writeDoubleLE=function(t,e,n){return j(this,t,e,!0,n)},l.prototype.writeDoubleBE=function(t,e,n){return j(this,t,e,!1,n)},l.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var o,i=r-n;if(this===t&&n<e&&e<r)for(o=i-1;o>=0;--o)t[o+e]=this[o+n];else if(i<1e3||!l.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+i),e);return i},l.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(i=e;i<n;++i)this[i]=t;else{var a=l.isBuffer(t)?t:U(new l(t,r).toString()),s=a.length;for(i=0;i<n-e;++i)this[i+e]=a[i%s]}return this};var M=/[^+\/0-9A-Za-z-_]/g;function R(t){return t<16?"0"+t.toString(16):t.toString(16)}function U(t,e){var n;e=e||1/0;for(var r=t.length,o=null,i=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;i.push(n)}else if(n<2048){if((e-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function z(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(M,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function H(t,e,n,r){for(var o=0;o<r&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}}).call(this,n(6))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";e.byteLength=function(t){var e=u(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=u(t),a=r[0],s=r[1],l=new i(function(t,e,n){return 3*(e+n)/4-n}(0,a,s)),c=0,d=s>0?a-4:a;for(n=0;n<d;n+=4)e=o[t.charCodeAt(n)]<<18|o[t.charCodeAt(n+1)]<<12|o[t.charCodeAt(n+2)]<<6|o[t.charCodeAt(n+3)],l[c++]=e>>16&255,l[c++]=e>>8&255,l[c++]=255&e;2===s&&(e=o[t.charCodeAt(n)]<<2|o[t.charCodeAt(n+1)]>>4,l[c++]=255&e);1===s&&(e=o[t.charCodeAt(n)]<<10|o[t.charCodeAt(n+1)]<<4|o[t.charCodeAt(n+2)]>>2,l[c++]=e>>8&255,l[c++]=255&e);return l},e.fromByteArray=function(t){for(var e,n=t.length,o=n%3,i=[],a=0,s=n-o;a<s;a+=16383)i.push(c(t,a,a+16383>s?s:a+16383));1===o?(e=t[n-1],i.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],i.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return i.join("")};for(var r=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=a.length;s<l;++s)r[s]=a[s],o[a.charCodeAt(s)]=s;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,n){for(var o,i,a=[],s=e;s<n;s+=3)o=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(r[(i=o)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return a.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,o){var i,a,s=8*o-r-1,l=(1<<s)-1,u=l>>1,c=-7,d=n?o-1:0,h=n?-1:1,f=t[e+d];for(d+=h,i=f&(1<<-c)-1,f>>=-c,c+=s;c>0;i=256*i+t[e+d],d+=h,c-=8);for(a=i&(1<<-c)-1,i>>=-c,c+=r;c>0;a=256*a+t[e+d],d+=h,c-=8);if(0===i)i=1-u;else{if(i===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),i-=u}return(f?-1:1)*a*Math.pow(2,i-r)},e.write=function(t,e,n,r,o,i){var a,s,l,u=8*i-o-1,c=(1<<u)-1,d=c>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:i-1,p=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+d>=1?h/l:h*Math.pow(2,1-d))*l>=2&&(a++,l/=2),a+d>=c?(s=0,a=c):a+d>=1?(s=(e*l-1)*Math.pow(2,o),a+=d):(s=e*Math.pow(2,d-1)*Math.pow(2,o),a=0));o>=8;t[n+f]=255&s,f+=p,s/=256,o-=8);for(a=a<<o|s,u+=o;u>0;t[n+f]=255&a,f+=p,a/=256,u-=8);t[n+f-p]|=128*y}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";function r(){}n.r(e);function o(t,e){for(const n in e)t[n]=e[n];return t}function i(t){return t()}function a(){return Object.create(null)}function s(t){t.forEach(i)}function l(t){return"function"==typeof t}function u(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(t,...e){if(null==t)return r;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function d(t,e,n){t.$$.on_destroy.push(c(e,n))}function h(t,e,n,r){if(t){const o=f(t,e,n,r);return t[0](o)}}function f(t,e,n,r){return t[1]&&r?o(n.ctx.slice(),t[1](r(e))):n.ctx}function p(t,e,n,r,o,i,a){const s=function(t,e,n,r){if(t[2]&&r){const o=t[2](r(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|o[r];return t}return e.dirty|o}return e.dirty}(e,r,o,i);if(s){const o=f(e,n,r,a);t.p(o,s)}}function y(t){return null==t?"":t}new Set;function g(t,e){t.appendChild(e)}function m(t,e,n){t.insertBefore(e,n||null)}function v(t){t.parentNode.removeChild(t)}function E(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function w(t){return document.createElement(t)}function S(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function b(t){return document.createTextNode(t)}function x(){return b(" ")}function $(){return b("")}function I(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function C(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function A(t,e){for(const n in e)C(t,n,e[n])}function k(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function D(t,e){t.value=null==e?"":e}function L(t,e,n){t.classList[n?"add":"remove"](e)}function P(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}new Set;let _;function B(t){_=t}function T(){if(!_)throw new Error("Function called outside component initialization");return _}function N(t){T().$$.after_update.push(t)}function O(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(t=>t(e))}const j=[],M=[],R=[],U=[],z=Promise.resolve();let H=!1;function F(){H||(H=!0,z.then(V))}function Y(){return F(),z}function G(t){R.push(t)}let W=!1;const q=new Set;function V(){if(!W){W=!0;do{for(let t=0;t<j.length;t+=1){const e=j[t];B(e),X(e.$$)}for(j.length=0;M.length;)M.pop()();for(let t=0;t<R.length;t+=1){const e=R[t];q.has(e)||(q.add(e),e())}R.length=0}while(j.length);for(;U.length;)U.pop()();H=!1,W=!1,q.clear()}}function X(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(G)}}const J=new Set;let K;function Z(){K={r:0,c:[],p:K}}function Q(){K.r||s(K.c),K=K.p}function tt(t,e){t&&t.i&&(J.delete(t),t.i(e))}function et(t,e,n,r){if(t&&t.o){if(J.has(t))return;J.add(t),K.c.push(()=>{J.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function nt(t,e){const n={},r={},o={$$scope:1};let i=t.length;for(;i--;){const a=t[i],s=e[i];if(s){for(const t in a)t in s||(r[t]=1);for(const t in s)o[t]||(n[t]=s[t],o[t]=1);t[i]=s}else for(const t in a)o[t]=1}for(const t in r)t in n||(n[t]=void 0);return n}new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]);let rt;function ot(t){t&&t.c()}function it(t,e,n){const{fragment:r,on_mount:o,on_destroy:a,after_update:u}=t.$$;r&&r.m(e,n),G(()=>{const e=o.map(i).filter(l);a?a.push(...e):s(e),t.$$.on_mount=[]}),u.forEach(G)}function at(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function st(t,e,n,o,i,l,u=[-1]){const c=_;B(t);const d=e.props||{},h=t.$$={fragment:null,ctx:null,props:l,update:r,not_equal:i,bound:a(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:a(),dirty:u};let f=!1;if(h.ctx=n?n(t,d,(e,n,...r)=>{const o=r.length?r[0]:n;return h.ctx&&i(h.ctx[e],h.ctx[e]=o)&&(h.bound[e]&&h.bound[e](o),f&&function(t,e){-1===t.$$.dirty[0]&&(j.push(t),F(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(t,e)),n}):[],h.update(),f=!0,s(h.before_update),h.fragment=!!o&&o(h.ctx),e.target){if(e.hydrate){const t=(p=e.target,Array.from(p.childNodes));h.fragment&&h.fragment.l(t),t.forEach(v)}else h.fragment&&h.fragment.c();e.intro&&tt(t.$$.fragment),it(t,e.target,e.anchor),V()}var p;B(c)}"function"==typeof HTMLElement&&(rt=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}$destroy(){at(this,1),this.$destroy=r}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}});class lt{$destroy(){at(this,1),this.$destroy=r}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function ut(t){let e,n,i=[{key:n="path-"+t[0]},t[1]],a={};for(let t=0;t<i.length;t+=1)a=o(a,i[t]);return{c(){e=S("path"),A(e,a)},m(t,n){m(t,e,n)},p(t,[r]){A(e,a=nt(i,[1&r&&n!==(n="path-"+t[0])&&{key:n},2&r&&t[1]]))},i:r,o:r,d(t){t&&v(e)}}}function ct(t,e,n){let{id:r=""}=e,{data:o={}}=e;return t.$set=t=>{"id"in t&&n(0,r=t.id),"data"in t&&n(1,o=t.data)},[r,o]}var dt=class extends lt{constructor(t){super(),st(this,t,ct,ut,u,{id:0,data:1})}};function ht(t){let e,n,i=[{key:n="polygon-"+t[0]},t[1]],a={};for(let t=0;t<i.length;t+=1)a=o(a,i[t]);return{c(){e=S("polygon"),A(e,a)},m(t,n){m(t,e,n)},p(t,[r]){A(e,a=nt(i,[1&r&&n!==(n="polygon-"+t[0])&&{key:n},2&r&&t[1]]))},i:r,o:r,d(t){t&&v(e)}}}function ft(t,e,n){let{id:r=""}=e,{data:o={}}=e;return t.$set=t=>{"id"in t&&n(0,r=t.id),"data"in t&&n(1,o=t.data)},[r,o]}var pt=class extends lt{constructor(t){super(),st(this,t,ft,ht,u,{id:0,data:1})}};function yt(t){let e;return{c(){e=S("g")},m(n,r){m(n,e,r),e.innerHTML=t[0]},p(t,[n]){1&n&&(e.innerHTML=t[0])},i:r,o:r,d(t){t&&v(e)}}}function gt(t,e,n){let r,o=870711;let{data:i}=e;function a(t){if(!t||!t.raw)return null;let e=t.raw;const n={};return e=e.replace(/\s(?:xml:)?id=["']?([^"')\s]+)/g,(t,e)=>{const r=(o+=1,"fa-"+o.toString(16));return n[e]=r,` id="${r}"`}),e=e.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,(t,e,r,o)=>{const i=e||o;return i&&n[i]?"#"+n[i]:t}),e}return t.$set=t=>{"data"in t&&n(1,i=t.data)},t.$$.update=()=>{2&t.$$.dirty&&n(0,r=a(i))},[r,i]}var mt=class extends lt{constructor(t){super(),st(this,t,gt,yt,u,{data:1})}};n(4);function vt(t){let e,n,r,o;const i=t[13].default,a=h(i,t,t[12],null);return{c(){e=S("svg"),a&&a.c(),C(e,"x",t[8]),C(e,"version","1.1"),C(e,"class",n="fa-icon "+t[0]+" svelte-1dof0an"),C(e,"y",t[9]),C(e,"width",t[1]),C(e,"height",t[2]),C(e,"aria-label",t[11]),C(e,"role",r=t[11]?"img":"presentation"),C(e,"viewBox",t[3]),C(e,"style",t[10]),L(e,"fa-spin",t[4]),L(e,"fa-pulse",t[6]),L(e,"fa-inverse",t[5]),L(e,"fa-flip-horizontal","horizontal"===t[7]),L(e,"fa-flip-vertical","vertical"===t[7])},m(t,n){m(t,e,n),a&&a.m(e,null),o=!0},p(t,[s]){a&&a.p&&4096&s&&p(a,i,t,t[12],s,null,null),(!o||256&s)&&C(e,"x",t[8]),(!o||1&s&&n!==(n="fa-icon "+t[0]+" svelte-1dof0an"))&&C(e,"class",n),(!o||512&s)&&C(e,"y",t[9]),(!o||2&s)&&C(e,"width",t[1]),(!o||4&s)&&C(e,"height",t[2]),(!o||2048&s)&&C(e,"aria-label",t[11]),(!o||2048&s&&r!==(r=t[11]?"img":"presentation"))&&C(e,"role",r),(!o||8&s)&&C(e,"viewBox",t[3]),(!o||1024&s)&&C(e,"style",t[10]),17&s&&L(e,"fa-spin",t[4]),65&s&&L(e,"fa-pulse",t[6]),33&s&&L(e,"fa-inverse",t[5]),129&s&&L(e,"fa-flip-horizontal","horizontal"===t[7]),129&s&&L(e,"fa-flip-vertical","vertical"===t[7])},i(t){o||(tt(a,t),o=!0)},o(t){et(a,t),o=!1},d(t){t&&v(e),a&&a.d(t)}}}function Et(t,e,n){let{class:r}=e,{width:o}=e,{height:i}=e,{box:a}=e,{spin:s=!1}=e,{inverse:l=!1}=e,{pulse:u=!1}=e,{flip:c=null}=e,{x:d}=e,{y:h}=e,{style:f}=e,{label:p}=e,{$$slots:y={},$$scope:g}=e;return t.$set=t=>{"class"in t&&n(0,r=t.class),"width"in t&&n(1,o=t.width),"height"in t&&n(2,i=t.height),"box"in t&&n(3,a=t.box),"spin"in t&&n(4,s=t.spin),"inverse"in t&&n(5,l=t.inverse),"pulse"in t&&n(6,u=t.pulse),"flip"in t&&n(7,c=t.flip),"x"in t&&n(8,d=t.x),"y"in t&&n(9,h=t.y),"style"in t&&n(10,f=t.style),"label"in t&&n(11,p=t.label),"$$scope"in t&&n(12,g=t.$$scope)},[r,o,i,a,s,l,u,c,d,h,f,p,g,y]}var wt=class extends lt{constructor(t){super(),st(this,t,Et,vt,u,{class:0,width:1,height:2,box:3,spin:4,inverse:5,pulse:6,flip:7,x:8,y:9,style:10,label:11})}};function St(t,e,n){const r=t.slice();return r[24]=e[n],r[26]=n,r}function bt(t,e,n){const r=t.slice();return r[27]=e[n],r[26]=n,r}function xt(t){let e,n,r,o,i=t[0].paths&&$t(t),a=t[0].polygons&&Ct(t),s=t[0].raw&&kt(t);return{c(){i&&i.c(),e=x(),a&&a.c(),n=x(),s&&s.c(),r=$()},m(t,l){i&&i.m(t,l),m(t,e,l),a&&a.m(t,l),m(t,n,l),s&&s.m(t,l),m(t,r,l),o=!0},p(t,o){t[0].paths?i?(i.p(t,o),1&o&&tt(i,1)):(i=$t(t),i.c(),tt(i,1),i.m(e.parentNode,e)):i&&(Z(),et(i,1,1,()=>{i=null}),Q()),t[0].polygons?a?(a.p(t,o),1&o&&tt(a,1)):(a=Ct(t),a.c(),tt(a,1),a.m(n.parentNode,n)):a&&(Z(),et(a,1,1,()=>{a=null}),Q()),t[0].raw?s?(s.p(t,o),1&o&&tt(s,1)):(s=kt(t),s.c(),tt(s,1),s.m(r.parentNode,r)):s&&(Z(),et(s,1,1,()=>{s=null}),Q())},i(t){o||(tt(i),tt(a),tt(s),o=!0)},o(t){et(i),et(a),et(s),o=!1},d(t){i&&i.d(t),t&&v(e),a&&a.d(t),t&&v(n),s&&s.d(t),t&&v(r)}}}function $t(t){let e,n,r=t[0].paths,o=[];for(let e=0;e<r.length;e+=1)o[e]=It(bt(t,r,e));const i=t=>et(o[t],1,1,()=>{o[t]=null});return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=$()},m(t,r){for(let e=0;e<o.length;e+=1)o[e].m(t,r);m(t,e,r),n=!0},p(t,n){if(1&n){let a;for(r=t[0].paths,a=0;a<r.length;a+=1){const i=bt(t,r,a);o[a]?(o[a].p(i,n),tt(o[a],1)):(o[a]=It(i),o[a].c(),tt(o[a],1),o[a].m(e.parentNode,e))}for(Z(),a=r.length;a<o.length;a+=1)i(a);Q()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)tt(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)et(o[t]);n=!1},d(t){E(o,t),t&&v(e)}}}function It(t){let e,n;return e=new dt({props:{id:t[26],data:t[27]}}),{c(){ot(e.$$.fragment)},m(t,r){it(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.data=t[27]),e.$set(r)},i(t){n||(tt(e.$$.fragment,t),n=!0)},o(t){et(e.$$.fragment,t),n=!1},d(t){at(e,t)}}}function Ct(t){let e,n,r=t[0].polygons,o=[];for(let e=0;e<r.length;e+=1)o[e]=At(St(t,r,e));const i=t=>et(o[t],1,1,()=>{o[t]=null});return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=$()},m(t,r){for(let e=0;e<o.length;e+=1)o[e].m(t,r);m(t,e,r),n=!0},p(t,n){if(1&n){let a;for(r=t[0].polygons,a=0;a<r.length;a+=1){const i=St(t,r,a);o[a]?(o[a].p(i,n),tt(o[a],1)):(o[a]=At(i),o[a].c(),tt(o[a],1),o[a].m(e.parentNode,e))}for(Z(),a=r.length;a<o.length;a+=1)i(a);Q()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)tt(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)et(o[t]);n=!1},d(t){E(o,t),t&&v(e)}}}function At(t){let e,n;return e=new pt({props:{id:t[26],data:t[24]}}),{c(){ot(e.$$.fragment)},m(t,r){it(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.data=t[24]),e.$set(r)},i(t){n||(tt(e.$$.fragment,t),n=!0)},o(t){et(e.$$.fragment,t),n=!1},d(t){at(e,t)}}}function kt(t){let e,n,r;function o(e){t[15].call(null,e)}let i={};return void 0!==t[0]&&(i.data=t[0]),e=new mt({props:i}),M.push(()=>function(t,e,n){const r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}(e,"data",o)),{c(){ot(e.$$.fragment)},m(t,n){it(e,t,n),r=!0},p(t,r){const o={};var i;!n&&1&r&&(n=!0,o.data=t[0],i=()=>n=!1,U.push(i)),e.$set(o)},i(t){r||(tt(e.$$.fragment,t),r=!0)},o(t){et(e.$$.fragment,t),r=!1},d(t){at(e,t)}}}function Dt(t){let e;const n=t[14].default,r=h(n,t,t[16],null),o=r||function(t){let e,n,r=t[0]&&xt(t);return{c(){r&&r.c(),e=$()},m(t,o){r&&r.m(t,o),m(t,e,o),n=!0},p(t,n){t[0]?r?(r.p(t,n),1&n&&tt(r,1)):(r=xt(t),r.c(),tt(r,1),r.m(e.parentNode,e)):r&&(Z(),et(r,1,1,()=>{r=null}),Q())},i(t){n||(tt(r),n=!0)},o(t){et(r),n=!1},d(t){r&&r.d(t),t&&v(e)}}}(t);return{c(){o&&o.c()},m(t,n){o&&o.m(t,n),e=!0},p(t,e){r?r.p&&65536&e&&p(r,n,t,t[16],e,null,null):o&&o.p&&1&e&&o.p(t,e)},i(t){e||(tt(o,t),e=!0)},o(t){et(o,t),e=!1},d(t){o&&o.d(t)}}}function Lt(t){let e,n;return e=new wt({props:{label:t[6],width:t[7],height:t[8],box:t[10],style:t[9],spin:t[2],flip:t[5],inverse:t[3],pulse:t[4],class:t[1],$$slots:{default:[Dt]},$$scope:{ctx:t}}}),{c(){ot(e.$$.fragment)},m(t,r){it(e,t,r),n=!0},p(t,[n]){const r={};64&n&&(r.label=t[6]),128&n&&(r.width=t[7]),256&n&&(r.height=t[8]),1024&n&&(r.box=t[10]),512&n&&(r.style=t[9]),4&n&&(r.spin=t[2]),32&n&&(r.flip=t[5]),8&n&&(r.inverse=t[3]),16&n&&(r.pulse=t[4]),2&n&&(r.class=t[1]),65537&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(tt(e.$$.fragment,t),n=!0)},o(t){et(e.$$.fragment,t),n=!1},d(t){at(e,t)}}}function Pt(t,e,n){let r,o,i,a,{class:s=""}=e,{data:l}=e,{scale:u=1}=e,{spin:c=!1}=e,{inverse:d=!1}=e,{pulse:h=!1}=e,{flip:f=null}=e,{label:p=null}=e,{self:y=null}=e,{style:g=null}=e;function m(){let t=1;return void 0!==u&&(t=Number(u)),isNaN(t)||t<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.'),1):1*t}function v(){return y?Math.max(y.width,y.height)/16:1}let{$$slots:E={},$$scope:w}=e;return t.$set=t=>{"class"in t&&n(1,s=t.class),"data"in t&&n(11,l=t.data),"scale"in t&&n(12,u=t.scale),"spin"in t&&n(2,c=t.spin),"inverse"in t&&n(3,d=t.inverse),"pulse"in t&&n(4,h=t.pulse),"flip"in t&&n(5,f=t.flip),"label"in t&&n(6,p=t.label),"self"in t&&n(0,y=t.self),"style"in t&&n(13,g=t.style),"$$scope"in t&&n(16,w=t.$$scope)},t.$$.update=()=>{14336&t.$$.dirty&&(!function(){if(void 0===l)return;const t=function(t){if("iconName"in t&&"icon"in t){let e={},n=t.icon,r=t.iconName,o={width:n[0],height:n[1],paths:[{d:n[4]}]};return e[r]=o,e}return t}(l),[e]=Object.keys(t),r=t[e];r.paths||(r.paths=[]),r.d&&r.paths.push({d:r.d}),r.polygons||(r.polygons=[]),r.points&&r.polygons.push({points:r.points}),n(0,y=r)}(),n(7,r=y?y.width/v()*m():0),n(8,o=y?y.height/v()*m():0),n(9,i=function(){let t="";null!==g&&(t+=g);let e=m();return 1===e?t:(""===t||t.endsWith(";")||(t+="; "),`${t}font-size: ${e}em`)}()),n(10,a=y?`0 0 ${y.width} ${y.height}`:`0 0 ${r} ${o}`))},[y,s,c,d,h,f,p,r,o,i,a,l,u,g,E,function(t){y=t,n(0,y)},w]}var _t=class extends lt{constructor(t){super(),st(this,t,Pt,Lt,u,{class:1,data:11,scale:12,spin:2,inverse:3,pulse:4,flip:5,label:6,self:0,style:13})}},Bt={prefix:"fas",iconName:"circle",icon:[512,512,[],"f111","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"]},Tt={prefix:"fas",iconName:"edit",icon:[576,512,[],"f044","M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"]},Nt={prefix:"fas",iconName:"hammer",icon:[576,512,[],"f6e3","M571.31 193.94l-22.63-22.63c-6.25-6.25-16.38-6.25-22.63 0l-11.31 11.31-28.9-28.9c5.63-21.31.36-44.9-16.35-61.61l-45.25-45.25c-62.48-62.48-163.79-62.48-226.28 0l90.51 45.25v18.75c0 16.97 6.74 33.25 18.75 45.25l49.14 49.14c16.71 16.71 40.3 21.98 61.61 16.35l28.9 28.9-11.31 11.31c-6.25 6.25-6.25 16.38 0 22.63l22.63 22.63c6.25 6.25 16.38 6.25 22.63 0l90.51-90.51c6.23-6.24 6.23-16.37-.02-22.62zm-286.72-15.2c-3.7-3.7-6.84-7.79-9.85-11.95L19.64 404.96c-25.57 23.88-26.26 64.19-1.53 88.93s65.05 24.05 88.93-1.53l238.13-255.07c-3.96-2.91-7.9-5.87-11.44-9.41l-49.14-49.14z"]},Ot={prefix:"fas",iconName:"plus",icon:[448,512,[],"f067","M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"]},jt={prefix:"fas",iconName:"trash-alt",icon:[448,512,[],"f2ed","M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"]};const Mt=[];function Rt(t,e){return{subscribe:Ut(t,e).subscribe}}function Ut(t,e=r){let n;const o=[];function i(e){if(u(t,e)&&(t=e,n)){const e=!Mt.length;for(let e=0;e<o.length;e+=1){const n=o[e];n[1](),Mt.push(n,t)}if(e){for(let t=0;t<Mt.length;t+=2)Mt[t][0](Mt[t+1]);Mt.length=0}}}return{set:i,update:function(e){i(e(t))},subscribe:function(a,s=r){const l=[a,s];return o.push(l),1===o.length&&(n=e(i)||r),a(t),()=>{const t=o.indexOf(l);-1!==t&&o.splice(t,1),0===o.length&&(n(),n=null)}}}}function zt(t,e,n){const o=!Array.isArray(t),i=o?[t]:t,a=e.length<2;return Rt(n,t=>{let n=!1;const u=[];let d=0,h=r;const f=()=>{if(d)return;h();const n=e(o?u[0]:u,t);a?t(n):h=l(n)?n:r},p=i.map((t,e)=>c(t,t=>{u[e]=t,d&=~(1<<e),n&&f()},()=>{d|=1<<e}));return n=!0,f(),function(){s(p),h()}})}function Ht(t){let e,n,r;var o=t[0];return o&&(e=new o({}),e.$on("routeEvent",t[5])),{c(){e&&ot(e.$$.fragment),n=$()},m(t,o){e&&it(e,t,o),m(t,n,o),r=!0},p(t,r){if(o!==(o=t[0])){if(e){Z();const t=e;et(t.$$.fragment,1,0,()=>{at(t,1)}),Q()}o?(e=new o({}),e.$on("routeEvent",t[5]),ot(e.$$.fragment),tt(e.$$.fragment,1),it(e,n.parentNode,n)):e=null}},i(t){r||(e&&tt(e.$$.fragment,t),r=!0)},o(t){e&&et(e.$$.fragment,t),r=!1},d(t){t&&v(n),e&&at(e,t)}}}function Ft(t){let e,n,r;var o=t[0];function i(t){return{props:{params:t[1]}}}return o&&(e=new o(i(t)),e.$on("routeEvent",t[4])),{c(){e&&ot(e.$$.fragment),n=$()},m(t,o){e&&it(e,t,o),m(t,n,o),r=!0},p(t,r){const a={};if(2&r&&(a.params=t[1]),o!==(o=t[0])){if(e){Z();const t=e;et(t.$$.fragment,1,0,()=>{at(t,1)}),Q()}o?(e=new o(i(t)),e.$on("routeEvent",t[4]),ot(e.$$.fragment),tt(e.$$.fragment,1),it(e,n.parentNode,n)):e=null}else o&&e.$set(a)},i(t){r||(e&&tt(e.$$.fragment,t),r=!0)},o(t){e&&et(e.$$.fragment,t),r=!1},d(t){t&&v(n),e&&at(e,t)}}}function Yt(t){let e,n,r,o;const i=[Ft,Ht],a=[];function s(t,e){return t[1]?0:1}return e=s(t),n=a[e]=i[e](t),{c(){n.c(),r=$()},m(t,n){a[e].m(t,n),m(t,r,n),o=!0},p(t,[o]){let l=e;e=s(t),e===l?a[e].p(t,o):(Z(),et(a[l],1,1,()=>{a[l]=null}),Q(),n=a[e],n||(n=a[e]=i[e](t),n.c()),tt(n,1),n.m(r.parentNode,r))},i(t){o||(tt(n),o=!0)},o(t){et(n),o=!1},d(t){a[e].d(t),t&&v(r)}}}function Gt(){const t=window.location.href.indexOf("#/");let e=t>-1?window.location.href.substr(t+1):"/";const n=e.indexOf("?");let r="";return n>-1&&(r=e.substr(n+1),e=e.substr(0,n)),{location:e,querystring:r}}const Wt=Rt(null,(function(t){t(Gt());const e=()=>{t(Gt())};return window.addEventListener("hashchange",e,!1),function(){window.removeEventListener("hashchange",e,!1)}}));zt(Wt,t=>t.location),zt(Wt,t=>t.querystring);function qt(t){if(!t||t.length<1||"/"!=t.charAt(0)&&0!==t.indexOf("#/"))throw Error("Invalid parameter location");return Y().then(()=>{const e=("#"==t.charAt(0)?"":"#")+t;try{window.history.replaceState(void 0,void 0,e)}catch(t){console.warn("Caught exception while replacing the current page. If you're running this in the Svelte REPL, please note that the `replace` method might not work in this environment.")}window.dispatchEvent(new Event("hashchange"))})}function Vt(t,e,n){let o,i=r;d(t,Wt,t=>n(6,o=t)),t.$$.on_destroy.push(()=>i());let{routes:a={}}=e,{prefix:s=""}=e;class l{constructor(t,e){if(!e||"function"!=typeof e&&("object"!=typeof e||!0!==e._sveltesparouter))throw Error("Invalid component object");if(!t||"string"==typeof t&&(t.length<1||"/"!=t.charAt(0)&&"*"!=t.charAt(0))||"object"==typeof t&&!(t instanceof RegExp))throw Error('Invalid value for "path" argument');const{pattern:n,keys:r}=function(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,o,i,a=[],s="",l=t.split("/");for(l[0]||l.shift();o=l.shift();)"*"===(n=o[0])?(a.push("wild"),s+="/(.*)"):":"===n?(r=o.indexOf("?",1),i=o.indexOf(".",1),a.push(o.substring(1,~r?r:~i?i:o.length)),s+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(s+=(~r?"?":"")+"\\"+o.substring(i))):s+="/"+o;return{keys:a,pattern:new RegExp("^"+s+(e?"(?=$|/)":"/?$"),"i")}}(t);this.path=t,"object"==typeof e&&!0===e._sveltesparouter?(this.component=e.route,this.conditions=e.conditions||[],this.userData=e.userData):(this.component=e,this.conditions=[],this.userData=void 0),this._pattern=n,this._keys=r}match(t){s&&t.startsWith(s)&&(t=t.substr(s.length)||"/");const e=this._pattern.exec(t);if(null===e)return null;if(!1===this._keys)return e;const n={};let r=0;for(;r<this._keys.length;)n[this._keys[r]]=e[++r]||null;return n}checkConditions(t){for(let e=0;e<this.conditions.length;e++)if(!this.conditions[e](t))return!1;return!0}}const u=[];a instanceof Map?a.forEach((t,e)=>{u.push(new l(e,t))}):Object.keys(a).forEach(t=>{u.push(new l(t,a[t]))});let c=null,h=null;const f=function(){const t=T();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const o=P(e,n);r.slice().forEach(e=>{e.call(t,o)})}}}(),p=(t,e)=>{Y().then(()=>{f(t,e)})};return t.$set=t=>{"routes"in t&&n(2,a=t.routes),"prefix"in t&&n(3,s=t.prefix)},t.$$.update=()=>{if(65&t.$$.dirty){n(0,c=null);let t=0;for(;!c&&t<u.length;){const e=u[t].match(o.location);if(e){const r={component:u[t].component,name:u[t].component.name,location:o.location,querystring:o.querystring,userData:u[t].userData};if(!u[t].checkConditions(r)){p("conditionsFailed",r);break}n(0,c=u[t].component),e&&"object"==typeof e&&Object.keys(e).length?n(1,h=e):n(1,h=null),p("routeLoaded",r)}t++}}},[c,h,a,s,function(e){O(t,e)},function(e){O(t,e)}]}var Xt=class extends lt{constructor(t){super(),st(this,t,Vt,Yt,u,{routes:2,prefix:3})}};function Jt(t){let e={...t};return Object.entries(e).map(([t,n])=>{(n={...n}).displayState=n.displayState===he.COLLAPSED?"COLLAPSED":"EXPANDED",e[t]=n}),e}var Kt=n(1),Zt=n.n(Kt),Qt=n(2),te=n.n(Qt);function ee(){Zt.a.apply(this,arguments)}function ne(t){this.value=t,Zt.a.Item.apply(this,arguments)}te()(ee,Zt.a),te()(ne,Zt.a.Item),ee.Item=ne,ee.prototype.get=function(t){let e=this.head;for(var n=0;n<t;++n)e=e.next;return e};class re{constructor(t,e,n){this.id=t,this.parentId=e,this.children=n||new ee}static fromTreeObj(t,e){let n=Object.keys(t)[0],r=t[n],o="root"===n?null:parseInt(n),i=new ee(...Array.from(r,t=>{return new ne((e=t)===Object(e)?re.fromTreeObj(t,o):new re(t,o));var e}));return new re(o,e=0===e?e:e||null,i)}getId(){return this.id}hasParent(){return 0===this.parentId||this.parentId}getParentId(){return this.parentId}setParentId(t){this.parentId=t}hasChildren(){return this.children.size>0}getChildren(){return this.children}appendChildItem(t){return this.children.append(t)}getChildNodeArray(){return this.children.toArray()}getLastChildNode(){return this.children.size>1?this.children.tail.value:this.children.head.value}toTreeObj(){if(this.hasChildren()){let t={};return t[null==this.getId()?"root":""+this.getId()]=this.getChildNodeArray().map(t=>t.value.toTreeObj()),t}return this.getId()}}class oe{constructor(){this.list=new ee}add(t){this.list.append(new ne(t))}remove(){if(this.list.head){let t=this.list.head.value;return this.list.head.detach(),t}}isEmpty(){return 0===this.list.size}}class ie{constructor(t,e){this.entries=t,this.root=e;let n,r=new oe,o={};for(this.root.getChildNodeArray().forEach(t=>r.add(t));!r.isEmpty();)n=r.remove(),o[n.value.getId()]=n,n.value.getChildNodeArray().forEach(t=>r.add(t));this.entryItems=o}getTopEntryId(){return this.root.getChildren().head.value.getId()}getEntries(){return this.entries}getRoot(){return this.root}getEntryTexts(){return this.root.getChildren().toArray().map(t=>this.entries[t.value.getId()].text)}hasEntryAbove(t){return null!==this.entryItems[t].prev||null!==this.entryItems[t].value.getParentId()}getLastAncestorNode(t){let e=t;for(;e.hasChildren();)e=e.getLastChildNode();return e}getNextSiblingOfFirstAncestor(t){let e=t.getId();for(;this.entryItems[e].value.hasParent();)if(e=this.entryItems[e].value.getParentId(),this.entryItems[e].next)return this.entryItems[e].next.value;return null}getEntryIdAbove(t){if(null!==this.entryItems[t].prev){let e=this.entryItems[t].prev.value;return this.getLastAncestorNode(e).getId()}return this.entryItems[t].value.parentId}getEntryIdAboveWithCollapse(t){let e=this.getEntryIdAbove(t),n=null,r=this.getEntryItem(e).value.getParentId();for(;null!=r;)this.getEntryDisplayState(r)===he.COLLAPSED&&(n=r),r=this.getEntryItem(r).value.getParentId();return null==n?e:n}hasEntryBelow(t){let e=this.entryItems[t];return e.value.getChildren().size>0||null!==e.next||this.entryAncestorHasNextSibling(t)}getEntryIdBelowWithCollapse(t){if(this.getEntryDisplayState(t)!==he.COLLAPSED){let e=this.entryItems[t].value.getChildren();if(e.size>0)return e.head.value.getId()}if(null!==this.entryItems[t].next)return this.entryItems[t].next.value.getId();let e=this.getNextSiblingOfFirstAncestor(this.entryItems[t].value);return e?e.getId():null}entryAncestorHasNextSibling(t){let e=this.entryItems[t].value;if(null===e.parentId)return!1;let n=e.getId();for(;null!==this.entryItems[n].value.parentId;)if(n=this.entryItems[n].value.parentId,this.entryItems[n].next)return!0;return!1}getEntryText(t){return this.entries[t].text}getEntryDisplayState(t){return null!=this.entries[t]&&this.entries[t].displayState||he.EXPANDED}getEntryHeadingSize(t){return this.entries[t].headingSize||0}getEntryItem(t){return this.entryItems[t]}setEntryText(t,e){null==this.entries[t]&&(this.entries[t]={}),this.entries[t].text=e}setEntryDisplayState(t,e){null==this.entries[t]&&(this.entries[t]={}),this.entries[t].displayState=e}getParentId(t){return this.entryItems[t].value.parentId}insertEntryBelow(t,e,n){let r=Object.keys(this.entries).map(t=>parseInt(t)),o=Math.max(...r)+1;this.setEntryText(o,n);let i=new ne(new re(o,e));return this.entryItems[t].append(i),this.entryItems[o]=i,o}insertEntryAbove(t,e,n){let r=Object.keys(this.entries).map(t=>parseInt(t)),o=Math.max(...r)+1;this.setEntryText(o,n);let i=new ne(new re(o,e));this.entryItems[t].prepend(i),this.entryItems[o]=i}removeEntry(t){let e=this.entryItems[t];delete this.entries[t],e.detach()}size(){return this.entries.length}hasPrevSibling(t){return null!==this.entryItems[t].prev}hasNextSibling(t){return null!==this.entryItems[t].next}getPrevSiblingNode(t){return this.entryItems[t].prev.value}getNextSiblingNode(t){return this.entryItems[t].next.value}swapAdjacentSiblings(t,e){let n=this.getEntryItem(t),r=this.getEntryItem(e);n.next===r&&(n.detach(),r.append(n))}cycleEntryHeadingSize(t){if(!(t in this.entries))return;let e=this.entries[t].headingSize||0;this.entries[t].headingSize=(e+1)%4}}var ae=n(0),se=n.n(ae);function le(t){switch(t){case'"':return"&quot;";case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";default:return t}}function ue(t){let e=[],n=[];return t.forEach(t=>{var r;r=t,"[object String]"===Object.prototype.toString.call(r)?e.push(t):(e.push(t.html),n=n.concat(t.linkedPages))}),{html:e.join(""),linkedPages:n}}const ce=se.a.createLanguage({EscapedPunctuation:function(){return se.a.string("\\").then(se.a.regexp(/[!"#$%&'()*+,-./:;<=>?@[\\\]^_`{|}~]/).map(t=>le(t)))},Char:function(){return se.a.any.map(t=>le(t))},CharInsideStrong:function(t){return se.a.notFollowedBy(t.StrongDelimiter).then(t.Char)},CharInsideEmphasis:function(t){return se.a.notFollowedBy(t.EmphasisDelimiter).then(t.Char)},InlineMathjaxDelimiter:function(){return se.a.string("$")},StrongDelimiter:function(){return se.a.string("**")},EmphasisDelimiter:function(){return se.a.string("__")},PageName:function(t){return se.a.notFollowedBy(se.a.string("]")).then(t.Char).many().map(t=>t.join(""))},Strong:function(t){return t.StrongDelimiter.notFollowedBy(se.a.whitespace).then(t.ValueInsideStrong.many()).skip(t.StrongDelimiter).map(t=>{let e=ue(t);return{html:"<strong>"+e.html+"</strong>",linkedPages:e.linkedPages}})},Emphasis:function(t){return t.EmphasisDelimiter.notFollowedBy(se.a.whitespace).then(t.ValueInsideEmphasis.many()).skip(t.EmphasisDelimiter).map(t=>{let e=ue(t);return{html:"<em>"+e.html+"</em>",linkedPages:e.linkedPages}})},InlineMathjax:function(t){return t.InlineMathjaxDelimiter.notFollowedBy(se.a.whitespace).then(se.a.notFollowedBy(t.InlineMathjaxDelimiter).then(t.Char).many()).skip(se.a.notFollowedBy(se.a.whitespace).then(t.InlineMathjaxDelimiter)).map(t=>"\\("+t.join("")+"\\)")},InternalLink:function(t){return se.a.string("[[").then(t.PageName).skip(se.a.string("]]")).map(t=>({html:`<span class="internal-link">[[<a data-markup-link-type="internal" href="#/page/${encodeURI(t)}">${t}</a>]]</span>`,linkedPages:[t]}))},AutoLink:function(){return se.a.regexp(/https?:\/\/(\w+\.)*\w+(\/(\w|[-.~:?=&%#])+)*\/?/).map(t=>`<a data-markup-link-type="auto" href="${t}">${t}</a>`)},StandardLink:function(t){return se.a.seqMap(se.a.string("[").notFollowedBy(se.a.string("[")),t.ValueInsideStandardLinkName.many(),se.a.string("]"),se.a.string("("),se.a.notFollowedBy(se.a.string(")")).then(t.Char).many(),se.a.string(")"),(function(t,e,n,r,o,i){return`<a href="${o.join("")}">${ue(e).html}</a>`}))},Link:function(t){return se.a.alt(t.InternalLink,t.StandardLink,t.AutoLink)},ValueInsideStandardLinkName:function(t){return se.a.alt(t.EscapedPunctuation,t.Strong,t.Emphasis,se.a.notFollowedBy(se.a.string("]")).then(t.Char))},ValueInsideEmphasis:function(t){return se.a.alt(t.EscapedPunctuation,t.Strong,t.Link,t.InlineMathjax,t.CharInsideEmphasis)},ValueInsideStrong:function(t){return se.a.alt(t.EscapedPunctuation,t.Emphasis,t.Link,t.InlineMathjax,t.CharInsideStrong)},Value:function(t){return se.a.alt(t.EscapedPunctuation,t.Strong,t.Emphasis,t.Link,t.InlineMathjax,t.Char)},Text:function(t){return t.Value.many().map(ue)}});class de{constructor(t){this.outAdjacency=t;let e={};Object.entries(t).forEach(([t,n])=>{Object.entries(n).forEach(([n,r])=>{for(let[o,i]of r.entries())o in e||(e[o]=new Set),e[o].add(this.convertToInAdjElement(t,n))})}),console.log(" %^#^ LinkGraph, inAdjacency = ",e),this.inAdjacency=e}convertToInAdjElement(t,e){return`${t}-${e}`}convertFromInAdjElement(t){let e=t.split("-");return[parseInt(e[0]),parseInt(e[1])]}getBacklinks(t){if(!(t in this.inAdjacency))return new Set;let e=this.inAdjacency[t];return new Set([...e].map(t=>this.convertFromInAdjElement(t)))}getLinks(t,e){return t in this.outAdjacency&&e in this.outAdjacency[t]?this.outAdjacency[t][e]:new Set}removeLink(t,e,n){this.outAdjacency[t][e].delete(n),this.inAdjacency[n].delete(this.convertToInAdjElement(t,e))}addLink(t,e,n){t in this.outAdjacency||(this.outAdjacency[t]={}),e in this.outAdjacency[t]||(this.outAdjacency[t][e]=new Set),n in this.inAdjacency||(this.inAdjacency[n]=new Set),this.outAdjacency[t][e].add(n),this.inAdjacency[n].add(this.convertToInAdjElement(t,e))}removeDoc(t){t in this.outAdjacency&&delete this.outAdjacency[t],t in this.inAdjacency&&delete this.inAdjacency[t]}}const he=Object.freeze({COLLAPSED:Symbol("Colors.COLLAPSED"),EXPANDED:Symbol("Colors.EXPANDED")});function fe(){return new Date(Date.now()).toISOString()}function pe(t,e,n){let r=Object.keys(n).map(t=>parseInt(t)),o=(Math.max(...r)+1).toString(),i=new ie({0:{text:e}},re.fromTreeObj({root:[0]},null));return{id:o,name:t,lastUpdated:fe(),tree:i}}function ye(t,e){let n=re.fromTreeObj(e,null);return new ie(t,n)}class ge{constructor(t){this.dataStore=t}treeToSerializationObject(t){return{entries:Jt(t.getEntries()),node:t.getRoot().toTreeObj()}}documentToSerializationObject(t){let e={...t};return e.tree=this.treeToSerializationObject(e.tree),e}getDocumentsString(){const t=this.dataStore.get("itero-docs");if(null==t){let t=Ee();return this.saveDocuments(t)}return t}getDocuments(){const t=this.dataStore.get("itero-docs");let e;if(null==t)e=Ee(),this.saveDocuments(e);else{let n=JSON.parse(t),r={};Object.entries(n).forEach(([t,e])=>{let n={...e};"lastUpdated"in e||(n.lastUpdated=fe()),n.tree=new ie(function(t){let e={...t};return Object.entries(e).map(([t,n])=>{(n={...n}).displayState="COLLAPSED"===n.displayState?he.COLLAPSED:he.EXPANDED,e[t]=n}),e}(e.tree.entries),re.fromTreeObj(e.tree.node)),r[t]=n}),e=r}return e}saveDocuments(t){let e={};Object.entries(t).forEach(([t,n])=>{e[t]=this.documentToSerializationObject(n)});let n=JSON.stringify(e);return this.dataStore.set("itero-docs",n),n}}function me(t){let e=function(t){let e={};return Object.entries(t).forEach(([t,n])=>{e[n.name]=t}),e}(t),{linkGraph:n,documents:r}=function(t,e){let n={},r={...t};return Object.entries(t).forEach(([t,o])=>{n[t]={};let i=n[t];Object.entries(o.tree.getEntries()).forEach(([o,a])=>{ce.Text.tryParse(a.text).linkedPages.forEach(a=>{if(o in i||(i[o]=new Set),a in e)n[t][o].add(e[a]);else{let t=pe(a,"TODO",r);r[t.id]=t}})})}),console.log(" !! makeLinkGraph, outAdj = ",n),{linkGraph:new de(n),documents:r}}(t,e);return{documents:r,docIdLookupByDocName:e,linkGraph:n}}function ve(t,e,n,r,o){return{id:t,name:e,tree:ye(r,o),lastUpdated:n||fe()}}function Ee(){let t=[{0:{text:"this is a note taking app"},1:{text:"you can use it to write a list. \\\\_()_/"},2:{text:"Arrow Up/Down to navigate up/down ()"},3:{text:"or clicking on the text with your mouse works too"},4:{text:"actually it's a nested list"},5:{text:"you can keep nesting"},6:{text:"items"},7:{text:"and items",displayState:he.COLLAPSED},8:{text:"a n d i t e m s"},9:{text:"you can collapse parts of the tree. the plus icon (+) indicates a collapsed item"},10:{text:"__collapse__: Ctrl + Up"},11:{text:"__expand__: Ctrl + Down"},12:{text:"make **bold portions** of the text with double asterisks (\\*\\*), like so:"},13:{text:"my \\**bolded** text"},14:{text:"make __emphasis__ with double underscore:"},15:{text:"my \\__emphasized__ text"},16:{text:"make link to another page: [[implementation details]]"},17:{text:"surround a page name with double square brackets: \\[[page name]]"},18:{text:"make external links in two ways"},19:{text:"just write a URL: https://en.wikipedia.org/wiki/Special:Random"},20:{text:"link name + URL: [random wiki page](https://en.wikipedia.org/wiki/Special:Random)"},21:{text:"type: \\[link name](www.example.com)"},22:{text:"write math symbols (courtesy of MathJax): $1 = \\frac{1}{\\sqrt \\pi} \\int_0^{\\infty} e^{-x^2} dx$"},23:{text:"surround your $\\LaTeX$ with dollar signs"},24:{text:"\\$1 = \\frac{1}{\\sqrt \\pi} \\int_0^{\\infty} e^{-x^2} dx\\$"},25:{text:"look, a matrix: $\\begin{bmatrix}\\cos \\theta & -\\sin \\theta\\\\\\sin \\theta & \\cos \\theta\\end{bmatrix}$"}},{root:[0,1,2,3,{4:[{5:[{6:[{7:[8]}]}]},{9:[10,11]}]},{12:[13]},{14:[15]},{16:[17]},{18:[19,{20:[21]}]},{22:[{23:[24]},25]}]}],e=[{0:{text:"svelte for components/state"},1:{text:"svelte-spa-router for routing"},2:{text:"parsimmon for the markup language parser/renderer"},3:{text:"mathjax v3 for math display"},4:{text:"font awesome (w/ svelte-awesome) icons"},5:{text:"parser tests using jest"}},{root:[0,1,2,3,4,5]}];return{1:ve(1,"hello and what is this","2020-07-05T19:47:11.000Z",t[0],t[1]),2:ve(2,"implementation details","2020-07-05T19:43:44.000Z",e[0],e[1])}}const we=function(){let{subscribe:t,update:e}=Ut({currentDocId:null,cursorSelectionStart:0,cursorSelectionEnd:0,cursorEntryId:null,docName:"",docIsEditingName:!1,docsDisplay:{},docIdLookupByDocName:{},documents:{},sortMode:"name-asc"});function n(t){return{docId:t,isSelected:!1}}return{subscribe:t,init:(t,r,o)=>e(e=>{let i={};return Object.keys(t).forEach(t=>{i[t]=n(t)}),e.docsDisplay=i,e.docIdLookupByDocName=r,e.documents=t,e.linkGraph=o,e}),createNewDocument:()=>e(t=>{let e=pe("New document","TODO",t.documents),r=e.id;return e.name+=" "+r,t.documents[r]=e,t.docIdLookupByDocName["New document"]=r,t.currentDocId=r,t.docName="New document",t.cursorSelectionStart=null,t.cursorSelectionEnd=null,t.cursorEntryId=0,t.docsDisplay[r]=n(r),t}),docsDisplaySetSelection:(t,n)=>e(e=>(e.docsDisplay[t].isSelected=n,e)),deleteDocs:t=>e(e=>(t.forEach(t=>{delete e.documents[t],delete e.docsDisplay[t],e.linkGraph.removeDoc(t)}),e)),changeSort:t=>e(e=>(e.sortMode=t,e)),navigateToDoc:t=>e(e=>{let n=e.documents[t];return e.currentDocId=t,e.docName=n.name,e.cursorEntryId=null,e}),cancelEditingDocName:()=>e(t=>(t.docIsEditingName=!1,t)),startEditingDocName:()=>e(t=>(t.docIsEditingName=!0,t)),saveEditingDocName:t=>e(e=>{e.docName=t,e.docIsEditingName=!1;let n=e.currentDocId,r=e.documents[n],o=r.name;r.name=t,r.lastUpdated=fe(),delete e.docIdLookupByDocName[o],e.docIdLookupByDocName[t]=n;let i=e.linkGraph.inAdjacency[n];return i&&i.forEach(n=>{const[r,i]=n.split("-"),a=e.documents[r].tree.getEntryText(i);e.documents[r].tree.setEntryText(i,a.replace(`[[${o}]]`,`[[${t}]]`))}),e}),saveCurrentPageDocEntry:(t,n,r)=>e(e=>{let o=e.documents[e.currentDocId];return o.tree.setEntryText(e.cursorEntryId,t),o.lastUpdated=fe(),e.cursorSelectionStart=n,e.cursorSelectionEnd=r,e}),saveCursor:(t,n,r)=>e(e=>(e.cursorSelectionStart=n,e.cursorSelectionEnd=r,e.cursorEntryId=t,e)),moveCursorLeft:t=>e(e=>{let n=e.cursorSelectionStart>t?t:e.cursorSelectionStart;return n!==e.cursorSelectionStart||n===e.cursorSelectionEnd?(e.cursorSelectionStart=Math.max(0,n-1),e.cursorSelectionEnd=e.cursorSelectionStart):e.cursorSelectionEnd=e.cursorSelectionStart,e}),moveCursorRight:t=>e(e=>(e.cursorSelectionStart===e.cursorSelectionEnd?(e.cursorSelectionStart=Math.min(t,e.cursorSelectionStart+1),e.cursorSelectionEnd=e.cursorSelectionStart):e.cursorSelectionStart=e.cursorSelectionEnd,e)),saveCursorPosition:t=>e(e=>(e.cursorSelectionStart=t,e.cursorSelectionEnd=t,e)),saveCursorEntryId:t=>e(e=>(e.cursorEntryId=t,e)),entryGoUp:()=>e(t=>{let e=t.currentDocId,n=t.cursorEntryId,r=t.documents[e].tree,o=r.hasEntryAbove(n)?r.getEntryIdAboveWithCollapse(n):n;return t.cursorEntryId=o,t}),entryGoDown:()=>e(t=>{let e=t.currentDocId,n=t.cursorEntryId,r=t.documents[e].tree,o=r.hasEntryBelow(n)?r.getEntryIdBelowWithCollapse(n):n;return t.cursorEntryId=o,t}),collapseEntry:t=>e(e=>{if(null!=t){let n=e.currentDocId,r=e.documents[n],o=r.tree;if(o.getEntryItem(t).value.hasChildren()&&o.getEntryDisplayState(t)===he.EXPANDED){let e=new ie(o.getEntries(),o.getRoot());e.setEntryDisplayState(t,he.COLLAPSED),r.tree=e}e.cursorEntryId=null}return e}),expandEntry:t=>e(e=>{if(null!=t){let n=e.currentDocId,r=e.documents[n],o=r.tree;if(o.getEntryItem(t).value.hasChildren()&&o.getEntryDisplayState(t)===he.COLLAPSED){let e=new ie(o.getEntries(),o.getRoot());e.setEntryDisplayState(t,he.EXPANDED),r.tree=e}e.cursorEntryId=null}return e}),indentEntry:()=>e(t=>{let e=t.currentDocId,n=t.cursorEntryId,r=t.documents[e].tree,o=r.getEntryItem(n);if(r.hasPrevSibling(n)){let i=r.getPrevSiblingNode(n);o.detach(),i.appendChildItem(o);let a=i.getId();o.value.setParentId(a),t.documents[e].lastUpdated=fe()}return t}),dedentEntry:()=>e(t=>{let e=t.currentDocId,n=t.cursorEntryId,r=t.documents[e].tree,o=r.getEntryItem(n);if(o.value.hasParent()){let n=r.getEntryItem(o.value.getParentId());o.detach(),n.append(o);let i=n.value.getParentId();o.value.setParentId(i),t.documents[e].lastUpdated=fe()}return t}),splitEntry:()=>e(t=>{let e=t.currentDocId,n=t.cursorEntryId,r=t.cursorSelectionStart,o=t.documents[e],i=o.tree,a=i.getEntryText(n),s=i.getParentId(n);if(t.cursorSelectionStart!==t.cursorSelectionEnd&&(a=a.substring(0,t.cursorSelectionStart)+a.substring(t.cursorSelectionEnd),console.log(" >> split, (entryId, text) = ",n,a),i.setEntryText(n,a),t.cursorSelectionEnd=t.cursorSelectionStart),i.getEntryDisplayState(n)===he.COLLAPSED&&r===a.length){let e=o.tree.insertEntryBelow(n,s,"");return t.cursorEntryId=e,t.cursorSelectionStart=0,t}let l=a.substring(0,r),u=a.substring(r,a.length);return o.tree.setEntryText(n,u),o.tree.insertEntryAbove(n,s,l),t.cursorSelectionStart=0,t.cursorSelectionEnd=t.cursorSelectionStart,t}),backspaceEntry:()=>e(t=>{let e=t.documents[t.currentDocId],n=t.cursorSelectionStart,r=t.cursorEntryId;if(t.cursorSelectionStart!==t.cursorSelectionEnd){let n=e.tree.getEntryText(r),o=n.substring(0,t.cursorSelectionStart)+n.substring(t.cursorSelectionEnd);return e.tree.setEntryText(r,o),t.cursorSelectionEnd=t.cursorSelectionStart,t}if(n>0){let o=e.tree.getEntryText(r),i=o.length,a=Math.min(n,i),s=o.substring(0,a-1)+o.substring(a);return e.tree.setEntryText(r,s),t.cursorSelectionStart=a-1,t.cursorSelectionEnd=t.cursorSelectionStart,t}let o=e.tree;if(o.hasEntryAbove(r)){let n=o.getEntryItem(r),i=n.prev;if(n.value.hasChildren()&&(null==i||i.value.hasChildren()))return t;let a,s,l=e.tree.getEntryText(r);if(n.value.hasChildren()){let t=o.getEntryIdAbove(r),n=e.tree.getEntryText(t);e.tree.setEntryText(r,n+l),e.tree.removeEntry(t),a=r,s=n.length}else{let t=o.getEntryIdAboveWithCollapse(r),n=e.tree.getEntryText(t);e.tree.setEntryText(t,n+l),e.tree.removeEntry(r),a=t,s=n.length}t.cursorEntryId=a,t.cursorSelectionStart=s,t.cursorSelectionEnd=t.cursorSelectionStart}return t}),savePastedEntries:t=>e(e=>{console.log(" saved pasted entries act");let n=e.currentDocId,r=e.cursorEntryId,o=e.documents[n],i=o.tree.getParentId(r);console.log(" SPEA, (doc id, entry id, parent id) = ",n,r,i);let a=r;return t.split("\n").forEach(t=>{console.log("inserting below ",a," line = ",t),a=o.tree.insertEntryBelow(a,i,t)}),e}),updateEntryLinks:(t,r)=>e(e=>{let o=e.linkGraph.getLinks(e.currentDocId,t),i=r.map(t=>{let r=e.docIdLookupByDocName[t];if(r)return r;let o=pe(t,"TODO",e.documents),i=o.id;return e.documents[i]=o,e.docsDisplay[i]=n(i),e.docIdLookupByDocName[t]=i,i}),a=new Set(i),[s,l]=function(t,e){let n=[],r=[];for(let[r,o]of t.entries())e.has(r)||n.push(r);for(let[n,o]of e.entries())t.has(n)||r.push(n);return[n,r]}(o,a);return s.forEach(n=>{e.linkGraph.removeLink(e.currentDocId,t,n)}),l.forEach(n=>{e.linkGraph.addLink(e.currentDocId,t,n)}),e}),swapWithAboveEntry:()=>e(t=>{let e=t.cursorEntryId,n=t.documents[t.currentDocId],r=n.tree;if(r.hasPrevSibling(e)){let t=r.getPrevSiblingNode(e).getId();r.swapAdjacentSiblings(t,e),n.lastUpdated=fe()}return t}),swapWithBelowEntry:()=>e(t=>{let e=t.cursorEntryId,n=t.documents[t.currentDocId],r=n.tree;if(r.hasNextSibling(e)){let t=r.getNextSiblingNode(e).getId();r.swapAdjacentSiblings(e,t),n.lastUpdated=fe()}return t}),cycleEntryHeadingSize:t=>e(e=>(e.documents[e.currentDocId].tree.cycleEntryHeadingSize(t),e))}}();n(10);function Se(t){let e,n;return{c(){e=w("div"),C(e,"class",n=y("rendered-entry heading-"+t[1])+" svelte-udstvs"),C(e,"data-entry-id",t[0])},m(n,r){m(n,e,r),t[5](e)},p(t,[r]){2&r&&n!==(n=y("rendered-entry heading-"+t[1])+" svelte-udstvs")&&C(e,"class",n),1&r&&C(e,"data-entry-id",t[0])},i:r,o:r,d(n){n&&v(e),t[5](null)}}}function be(t,e,n){let r,{entryId:o}=e,{entryText:i}=e,{entryHeadingSize:a}=e,{handleUpdateEntryLinks:s}=e;return t.$set=t=>{"entryId"in t&&n(0,o=t.entryId),"entryText"in t&&n(3,i=t.entryText),"entryHeadingSize"in t&&n(1,a=t.entryHeadingSize),"handleUpdateEntryLinks"in t&&n(4,s=t.handleUpdateEntryLinks)},t.$$.update=()=>{if(29&t.$$.dirty&&r)try{let t=ce.Text.tryParse(i);n(2,r.innerHTML=t.html,r),s(o,t.linkedPages)}catch(t){console.log("err parsing: ",t),n(2,r.innerHTML=i,r)}},[o,a,r,i,s,function(t){M[t?"unshift":"push"](()=>{r=t,n(2,r),n(3,i),n(4,s),n(0,o)})}]}var xe=class extends lt{constructor(t){super(),st(this,t,be,Se,u,{entryId:0,entryText:3,entryHeadingSize:1,handleUpdateEntryLinks:4})}};n(11);function $e(t,e,n){const r=t.slice();return r[5]=e[n],r}function Ie(t,e,n){const r=t.slice();return r[2]=e[n],r}function Ce(t){let e,n,r,o,i=Object.values(t[0]),a=[];for(let e=0;e<i.length;e+=1)a[e]=ke(Ie(t,i,e));const s=t=>et(a[t],1,1,()=>{a[t]=null});return{c(){e=w("h2"),e.textContent="References",n=x();for(let t=0;t<a.length;t+=1)a[t].c();r=$(),C(e,"class","svelte-17ed1rn")},m(t,i){m(t,e,i),m(t,n,i);for(let e=0;e<a.length;e+=1)a[e].m(t,i);m(t,r,i),o=!0},p(t,e){if(1&e){let n;for(i=Object.values(t[0]),n=0;n<i.length;n+=1){const o=Ie(t,i,n);a[n]?(a[n].p(o,e),tt(a[n],1)):(a[n]=ke(o),a[n].c(),tt(a[n],1),a[n].m(r.parentNode,r))}for(Z(),n=i.length;n<a.length;n+=1)s(n);Q()}},i(t){if(!o){for(let t=0;t<i.length;t+=1)tt(a[t]);o=!0}},o(t){a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)et(a[t]);o=!1},d(t){t&&v(e),t&&v(n),E(a,t),t&&v(r)}}}function Ae(t){let e,n,r,o;return n=new xe({props:{entryId:t[5].id,entryText:t[5].text,handleUpdateEntryLinks:Le}}),{c(){e=w("li"),ot(n.$$.fragment),r=x()},m(t,i){m(t,e,i),it(n,e,null),g(e,r),o=!0},p(t,e){const r={};1&e&&(r.entryId=t[5].id),1&e&&(r.entryText=t[5].text),n.$set(r)},i(t){o||(tt(n.$$.fragment,t),o=!0)},o(t){et(n.$$.fragment,t),o=!1},d(t){t&&v(e),at(n)}}}function ke(t){let e,n,r,o,i,a,s,l,u,c=t[2].name+"",d=Object.values(t[2].entries),h=[];for(let e=0;e<d.length;e+=1)h[e]=Ae($e(t,d,e));const f=t=>et(h[t],1,1,()=>{h[t]=null});return{c(){e=w("div"),n=w("h3"),r=w("a"),o=b(c),a=x(),s=w("ul");for(let t=0;t<h.length;t+=1)h[t].c();l=x(),C(r,"href",i="#/doc/"+t[2].id),C(n,"class","svelte-17ed1rn"),C(e,"id","backlinks-page-display"),C(e,"class","svelte-17ed1rn")},m(t,i){m(t,e,i),g(e,n),g(n,r),g(r,o),g(e,a),g(e,s);for(let t=0;t<h.length;t+=1)h[t].m(s,null);g(e,l),u=!0},p(t,e){if((!u||1&e)&&c!==(c=t[2].name+"")&&k(o,c),(!u||1&e&&i!==(i="#/doc/"+t[2].id))&&C(r,"href",i),1&e){let n;for(d=Object.values(t[2].entries),n=0;n<d.length;n+=1){const r=$e(t,d,n);h[n]?(h[n].p(r,e),tt(h[n],1)):(h[n]=Ae(r),h[n].c(),tt(h[n],1),h[n].m(s,null))}for(Z(),n=d.length;n<h.length;n+=1)f(n);Q()}},i(t){if(!u){for(let t=0;t<d.length;t+=1)tt(h[t]);u=!0}},o(t){h=h.filter(Boolean);for(let t=0;t<h.length;t+=1)et(h[t]);u=!1},d(t){t&&v(e),E(h,t)}}}function De(t){let e,n,r=t[1]&&Ce(t);return{c(){e=w("div"),r&&r.c(),C(e,"id","doc-references"),C(e,"class","svelte-17ed1rn")},m(t,o){m(t,e,o),r&&r.m(e,null),n=!0},p(t,[n]){t[1]?r?(r.p(t,n),2&n&&tt(r,1)):(r=Ce(t),r.c(),tt(r,1),r.m(e,null)):r&&(Z(),et(r,1,1,()=>{r=null}),Q())},i(t){n||(tt(r),n=!0)},o(t){et(r),n=!1},d(t){t&&v(e),r&&r.d()}}}const Le=()=>{};function Pe(t,e,n){let r,{backlinks:o}=e;return console.log("backlinks = ",o),t.$set=t=>{"backlinks"in t&&n(0,o=t.backlinks)},t.$$.update=()=>{1&t.$$.dirty&&n(1,r=Object.keys(o).length)},[o,r]}var _e=class extends lt{constructor(t){super(),st(this,t,Pe,De,u,{backlinks:0})}};n(12);function Be(t){let e;return{c(){e=w("header"),e.innerHTML='<span class="home svelte-he5a9y"><a href="#/"></a></span>\n  &gt;',C(e,"id","doc-header"),C(e,"class","svelte-he5a9y")},m(t,n){m(t,e,n)},p:r,i:r,o:r,d(t){t&&v(e)}}}var Te=class extends lt{constructor(t){super(),st(this,t,null,Be,u,{})}};n(13);function Ne(t){let e,n,o,i;return{c(){e=w("input"),C(e,"type","text"),C(e,"class",n=y("entry-input heading-"+t[2])+" svelte-qcvo66"),e.value=t[1],L(e,"highlighted",t[0]===t[3])},m(n,r){m(n,e,r),t[30](e),o||(i=[I(e,"input",t[7]),I(e,"click",t[31]),I(e,"keydown",t[5]),I(e,"paste",t[8])],o=!0)},p(t,r){4&r[0]&&n!==(n=y("entry-input heading-"+t[2])+" svelte-qcvo66")&&C(e,"class",n),2&r[0]&&e.value!==t[1]&&(e.value=t[1]),13&r[0]&&L(e,"highlighted",t[0]===t[3])},i:r,o:r,d(n){n&&v(e),t[30](null),o=!1,s(i)}}}function Oe(t,e,n){let r,{entryId:o}=e,{entryValue:i}=e,{entryHeadingSize:a}=e,{docCursorEntryId:s}=e,{docCursorSelStart:l}=e,{docCursorSelEnd:u}=e,{isEntryAbove:c}=e,{isEntryBelow:d}=e,{handleGoUp:h}=e,{handleGoDown:f}=e,{handleEntryBackspace:p}=e,{handleCollapseEntry:y}=e,{handleExpandEntry:g}=e,{handleSplitEntry:m}=e,{handleIndent:v}=e,{handleDedent:E}=e,{handleMultilinePaste:w}=e,{handleMoveCursorLeft:S}=e,{handleMoveCursorRight:b}=e,{handleSaveCursorPos:x}=e,{handleSaveDocEntry:$}=e,{handleSaveFullCursor:I}=e,{handleSwapWithAboveEntry:C}=e,{handleSwapWithBelowEntry:A}=e,{handleCycleEntryHeadingSize:k}=e;function D(t,e){let n=e.target.selectionStart,r=e.target.selectionEnd;s===t&&l==n&&u==r||I(t,n,r)}N(async()=>{let t=document.getElementById("node-name-input");document.activeElement!==t&&r&&(o===s&&document.activeElement!==r&&r.focus(),o===s&&r.setSelectionRange(l,u))});return t.$set=t=>{"entryId"in t&&n(0,o=t.entryId),"entryValue"in t&&n(1,i=t.entryValue),"entryHeadingSize"in t&&n(2,a=t.entryHeadingSize),"docCursorEntryId"in t&&n(3,s=t.docCursorEntryId),"docCursorSelStart"in t&&n(9,l=t.docCursorSelStart),"docCursorSelEnd"in t&&n(10,u=t.docCursorSelEnd),"isEntryAbove"in t&&n(11,c=t.isEntryAbove),"isEntryBelow"in t&&n(12,d=t.isEntryBelow),"handleGoUp"in t&&n(13,h=t.handleGoUp),"handleGoDown"in t&&n(14,f=t.handleGoDown),"handleEntryBackspace"in t&&n(15,p=t.handleEntryBackspace),"handleCollapseEntry"in t&&n(16,y=t.handleCollapseEntry),"handleExpandEntry"in t&&n(17,g=t.handleExpandEntry),"handleSplitEntry"in t&&n(18,m=t.handleSplitEntry),"handleIndent"in t&&n(19,v=t.handleIndent),"handleDedent"in t&&n(20,E=t.handleDedent),"handleMultilinePaste"in t&&n(21,w=t.handleMultilinePaste),"handleMoveCursorLeft"in t&&n(22,S=t.handleMoveCursorLeft),"handleMoveCursorRight"in t&&n(23,b=t.handleMoveCursorRight),"handleSaveCursorPos"in t&&n(24,x=t.handleSaveCursorPos),"handleSaveDocEntry"in t&&n(25,$=t.handleSaveDocEntry),"handleSaveFullCursor"in t&&n(26,I=t.handleSaveFullCursor),"handleSwapWithAboveEntry"in t&&n(27,C=t.handleSwapWithAboveEntry),"handleSwapWithBelowEntry"in t&&n(28,A=t.handleSwapWithBelowEntry),"handleCycleEntryHeadingSize"in t&&n(29,k=t.handleCycleEntryHeadingSize)},[o,i,a,s,r,async function(t){if("Tab"===t.key)return t.preventDefault(),void(t.shiftKey?E():v());if("ArrowUp"===t.key)t.preventDefault(),t.ctrlKey?y(o):t.shiftKey&&t.altKey?C(o):c&&h();else if("ArrowDown"===t.key)t.preventDefault(),t.ctrlKey?g(o):t.shiftKey&&t.altKey?A(o):d&&f();else if("Backspace"===t.key)t.preventDefault(),p();else if("Enter"===t.key)t.preventDefault(),m();else if(["ArrowLeft","ArrowRight","Home","End"].indexOf(t.key)>-1)t.preventDefault(),function(t,e,n){switch(t.key){case"ArrowLeft":return void S(n);case"ArrowRight":return void b(n);case"Home":return void x(0);case"End":x(n)}}(t,this.selectionStart,this.value.length);else{if("H"!=t.key||!t.ctrlKey||!t.shiftKey)return;t.preventDefault(),k(o)}await Y(),this.selectionStart=l,this.selectionEnd=u},D,function(t){let e=t.target.value;$(e,t.target.selectionStart,t.target.selectionEnd)},function(t){let e=(t.clipboardData||window.clipboardData).getData("text");e.split("\n").length>1&&(t.preventDefault(),w(e))},l,u,c,d,h,f,p,y,g,m,v,E,w,S,b,x,$,I,C,A,k,function(t){M[t?"unshift":"push"](()=>{r=t,n(4,r)})},t=>D(o,t)]}var je=class extends lt{constructor(t){super(),st(this,t,Oe,Ne,u,{entryId:0,entryValue:1,entryHeadingSize:2,docCursorEntryId:3,docCursorSelStart:9,docCursorSelEnd:10,isEntryAbove:11,isEntryBelow:12,handleGoUp:13,handleGoDown:14,handleEntryBackspace:15,handleCollapseEntry:16,handleExpandEntry:17,handleSplitEntry:18,handleIndent:19,handleDedent:20,handleMultilinePaste:21,handleMoveCursorLeft:22,handleMoveCursorRight:23,handleSaveCursorPos:24,handleSaveDocEntry:25,handleSaveFullCursor:26,handleSwapWithAboveEntry:27,handleSwapWithBelowEntry:28,handleCycleEntryHeadingSize:29},[-1,-1])}};n(14);function Me(t,e,n){const r=t.slice();return r[31]=e[n],r[33]=n,r}function Re(t){let e,n,r,o,i,a,s,l,u,c,d,h,f;const p=[ze,Ue],y=[];function E(t,e){return 2&e[0]&&(r=!!t[28](t[1])),r?0:1}o=E(t,[-1]),i=y[o]=p[o](t);const S=[Fe,He],b=[];function $(t,e){return t[27]?0:1}return u=$(t),c=b[u]=S[u](t),{c(){e=w("div"),n=w("span"),i.c(),a=x(),s=w("span"),s.textContent="",l=x(),c.c(),C(n,"class","icon-container svelte-1d9ey6k"),C(e,"class","entry-display svelte-1d9ey6k"),C(e,"data-entry-id",t[23])},m(r,i){m(r,e,i),g(e,n),y[o].m(n,null),g(e,a),g(e,s),g(e,l),b[u].m(e,null),d=!0,h||(f=I(n,"click",t[30]),h=!0)},p(t,r){let a=o;o=E(t,r),o===a?y[o].p(t,r):(Z(),et(y[a],1,1,()=>{y[a]=null}),Q(),i=y[o],i||(i=y[o]=p[o](t),i.c()),tt(i,1),i.m(n,null));let s=u;u=$(t),u===s?b[u].p(t,r):(Z(),et(b[s],1,1,()=>{b[s]=null}),Q(),c=b[u],c||(c=b[u]=S[u](t),c.c()),tt(c,1),c.m(e,null)),(!d||8388608&r[0])&&C(e,"data-entry-id",t[23])},i(t){d||(tt(i),tt(c),d=!0)},o(t){et(i),et(c),d=!1},d(t){t&&v(e),y[o].d(),b[u].d(),h=!1,f()}}}function Ue(t){let e,n;return e=new _t({props:{data:Bt,scale:"0.51"}}),{c(){ot(e.$$.fragment)},m(t,r){it(e,t,r),n=!0},p:r,i(t){n||(tt(e.$$.fragment,t),n=!0)},o(t){et(e.$$.fragment,t),n=!1},d(t){at(e,t)}}}function ze(t){let e,n;return e=new _t({props:{data:Ot,scale:"0.51"}}),{c(){ot(e.$$.fragment)},m(t,r){it(e,t,r),n=!0},p:r,i(t){n||(tt(e.$$.fragment,t),n=!0)},o(t){et(e.$$.fragment,t),n=!1},d(t){at(e,t)}}}function He(t){let e,n;return e=new xe({props:{entryId:t[23],entryText:t[0].getEntryText(t[23]),entryHeadingSize:t[0].getEntryHeadingSize(t[23]),handleUpdateEntryLinks:t[19]}}),{c(){ot(e.$$.fragment)},m(t,r){it(e,t,r),n=!0},p(t,n){const r={};8388608&n[0]&&(r.entryId=t[23]),8388609&n[0]&&(r.entryText=t[0].getEntryText(t[23])),8388609&n[0]&&(r.entryHeadingSize=t[0].getEntryHeadingSize(t[23])),524288&n[0]&&(r.handleUpdateEntryLinks=t[19]),e.$set(r)},i(t){n||(tt(e.$$.fragment,t),n=!0)},o(t){et(e.$$.fragment,t),n=!1},d(t){at(e,t)}}}function Fe(t){let e,n;return e=new je({props:{entryId:t[23],entryValue:t[0].getEntryText(t[23]),entryHeadingSize:t[0].getEntryHeadingSize(t[23]),docCursorEntryId:t[2],docCursorSelStart:t[3],docCursorSelEnd:t[4],isEntryAbove:t[0].hasEntryAbove(t[23]),isEntryBelow:t[0].hasEntryBelow(t[23]),handleSaveDocEntry:t[5],handleSaveFullCursor:t[6],handleGoUp:t[7],handleGoDown:t[8],handleCollapseEntry:t[9],handleExpandEntry:t[10],handleSplitEntry:t[11],handleEntryBackspace:t[12],handleIndent:t[13],handleDedent:t[14],handleMultilinePaste:t[15],handleMoveCursorLeft:t[16],handleMoveCursorRight:t[17],handleSaveCursorPos:t[18],handleSwapWithAboveEntry:t[20],handleSwapWithBelowEntry:t[21],handleCycleEntryHeadingSize:t[22]}}),{c(){ot(e.$$.fragment)},m(t,r){it(e,t,r),n=!0},p(t,n){const r={};8388608&n[0]&&(r.entryId=t[23]),8388609&n[0]&&(r.entryValue=t[0].getEntryText(t[23])),8388609&n[0]&&(r.entryHeadingSize=t[0].getEntryHeadingSize(t[23])),4&n[0]&&(r.docCursorEntryId=t[2]),8&n[0]&&(r.docCursorSelStart=t[3]),16&n[0]&&(r.docCursorSelEnd=t[4]),8388609&n[0]&&(r.isEntryAbove=t[0].hasEntryAbove(t[23])),8388609&n[0]&&(r.isEntryBelow=t[0].hasEntryBelow(t[23])),32&n[0]&&(r.handleSaveDocEntry=t[5]),64&n[0]&&(r.handleSaveFullCursor=t[6]),128&n[0]&&(r.handleGoUp=t[7]),256&n[0]&&(r.handleGoDown=t[8]),512&n[0]&&(r.handleCollapseEntry=t[9]),1024&n[0]&&(r.handleExpandEntry=t[10]),2048&n[0]&&(r.handleSplitEntry=t[11]),4096&n[0]&&(r.handleEntryBackspace=t[12]),8192&n[0]&&(r.handleIndent=t[13]),16384&n[0]&&(r.handleDedent=t[14]),32768&n[0]&&(r.handleMultilinePaste=t[15]),65536&n[0]&&(r.handleMoveCursorLeft=t[16]),131072&n[0]&&(r.handleMoveCursorRight=t[17]),262144&n[0]&&(r.handleSaveCursorPos=t[18]),1048576&n[0]&&(r.handleSwapWithAboveEntry=t[20]),2097152&n[0]&&(r.handleSwapWithBelowEntry=t[21]),4194304&n[0]&&(r.handleCycleEntryHeadingSize=t[22]),e.$set(r)},i(t){n||(tt(e.$$.fragment,t),n=!0)},o(t){et(e.$$.fragment,t),n=!1},d(t){at(e,t)}}}function Ye(t){let e,n,r=t[24],o=[];for(let e=0;e<r.length;e+=1)o[e]=Ge(Me(t,r,e));const i=t=>et(o[t],1,1,()=>{o[t]=null});return{c(){e=w("ul");for(let t=0;t<o.length;t+=1)o[t].c();C(e,"class","tree-node-list svelte-1d9ey6k")},m(t,r){m(t,e,r);for(let t=0;t<o.length;t+=1)o[t].m(e,null);n=!0},p(t,n){if(25165821&n[0]){let a;for(r=t[24],a=0;a<r.length;a+=1){const i=Me(t,r,a);o[a]?(o[a].p(i,n),tt(o[a],1)):(o[a]=Ge(i),o[a].c(),tt(o[a],1),o[a].m(e,null))}for(Z(),a=r.length;a<o.length;a+=1)i(a);Q()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)tt(o[t]);n=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)et(o[t]);n=!1},d(t){t&&v(e),E(o,t)}}}function Ge(t){let e,n,r,o;return n=new Ve({props:{tree:t[0],flowyTreeNode:t[31].value,docCursorEntryId:t[2],docCursorSelStart:t[3],docCursorSelEnd:t[4],handleSaveDocEntry:t[5],handleSaveFullCursor:t[6],handleGoUp:t[7],handleGoDown:t[8],handleCollapseEntry:t[9],handleExpandEntry:t[10],handleSplitEntry:t[11],handleEntryBackspace:t[12],handleIndent:t[13],handleDedent:t[14],handleMultilinePaste:t[15],handleMoveCursorLeft:t[16],handleMoveCursorRight:t[17],handleSaveCursorPos:t[18],handleUpdateEntryLinks:t[19],handleSwapWithAboveEntry:t[20],handleSwapWithBelowEntry:t[21],handleCycleEntryHeadingSize:t[22]}}),{c(){e=w("li"),ot(n.$$.fragment),r=x(),C(e,"class","svelte-1d9ey6k")},m(t,i){m(t,e,i),it(n,e,null),g(e,r),o=!0},p(t,e){const r={};1&e[0]&&(r.tree=t[0]),16777216&e[0]&&(r.flowyTreeNode=t[31].value),4&e[0]&&(r.docCursorEntryId=t[2]),8&e[0]&&(r.docCursorSelStart=t[3]),16&e[0]&&(r.docCursorSelEnd=t[4]),32&e[0]&&(r.handleSaveDocEntry=t[5]),64&e[0]&&(r.handleSaveFullCursor=t[6]),128&e[0]&&(r.handleGoUp=t[7]),256&e[0]&&(r.handleGoDown=t[8]),512&e[0]&&(r.handleCollapseEntry=t[9]),1024&e[0]&&(r.handleExpandEntry=t[10]),2048&e[0]&&(r.handleSplitEntry=t[11]),4096&e[0]&&(r.handleEntryBackspace=t[12]),8192&e[0]&&(r.handleIndent=t[13]),16384&e[0]&&(r.handleDedent=t[14]),32768&e[0]&&(r.handleMultilinePaste=t[15]),65536&e[0]&&(r.handleMoveCursorLeft=t[16]),131072&e[0]&&(r.handleMoveCursorRight=t[17]),262144&e[0]&&(r.handleSaveCursorPos=t[18]),524288&e[0]&&(r.handleUpdateEntryLinks=t[19]),1048576&e[0]&&(r.handleSwapWithAboveEntry=t[20]),2097152&e[0]&&(r.handleSwapWithBelowEntry=t[21]),4194304&e[0]&&(r.handleCycleEntryHeadingSize=t[22]),n.$set(r)},i(t){o||(tt(n.$$.fragment,t),o=!0)},o(t){et(n.$$.fragment,t),o=!1},d(t){t&&v(e),at(n)}}}function We(t){let e,n,r,o=null!==t[23]&&Re(t),i=t[25]&&!t[26]&&Ye(t);return{c(){o&&o.c(),e=x(),i&&i.c(),n=$()},m(t,a){o&&o.m(t,a),m(t,e,a),i&&i.m(t,a),m(t,n,a),r=!0},p(t,r){null!==t[23]?o?(o.p(t,r),8388608&r[0]&&tt(o,1)):(o=Re(t),o.c(),tt(o,1),o.m(e.parentNode,e)):o&&(Z(),et(o,1,1,()=>{o=null}),Q()),t[25]&&!t[26]?i?(i.p(t,r),100663296&r[0]&&tt(i,1)):(i=Ye(t),i.c(),tt(i,1),i.m(n.parentNode,n)):i&&(Z(),et(i,1,1,()=>{i=null}),Q())},i(t){r||(tt(o),tt(i),r=!0)},o(t){et(o),et(i),r=!1},d(t){o&&o.d(t),t&&v(e),i&&i.d(t),t&&v(n)}}}function qe(t,e,n){let{tree:r}=e,{flowyTreeNode:o}=e,{docCursorEntryId:i}=e,{docCursorSelStart:a}=e,{docCursorSelEnd:s}=e,{handleSaveDocEntry:l}=e,{handleSaveFullCursor:u}=e,{handleGoUp:c}=e,{handleGoDown:d}=e,{handleCollapseEntry:h}=e,{handleExpandEntry:f}=e,{handleSplitEntry:p}=e,{handleEntryBackspace:y}=e,{handleIndent:g}=e,{handleDedent:m}=e,{handleMultilinePaste:v}=e,{handleMoveCursorLeft:E}=e,{handleMoveCursorRight:w}=e,{handleSaveCursorPos:S}=e,{handleUpdateEntryLinks:b}=e,{handleSwapWithAboveEntry:x}=e,{handleSwapWithBelowEntry:$}=e,{handleCycleEntryHeadingSize:I}=e;function C(t){return t.hasChildren()&&r.getEntryDisplayState(t.getId())===he.COLLAPSED}function A(t,e){e?f(t):h(t)}let k,D,L,P,_;return t.$set=t=>{"tree"in t&&n(0,r=t.tree),"flowyTreeNode"in t&&n(1,o=t.flowyTreeNode),"docCursorEntryId"in t&&n(2,i=t.docCursorEntryId),"docCursorSelStart"in t&&n(3,a=t.docCursorSelStart),"docCursorSelEnd"in t&&n(4,s=t.docCursorSelEnd),"handleSaveDocEntry"in t&&n(5,l=t.handleSaveDocEntry),"handleSaveFullCursor"in t&&n(6,u=t.handleSaveFullCursor),"handleGoUp"in t&&n(7,c=t.handleGoUp),"handleGoDown"in t&&n(8,d=t.handleGoDown),"handleCollapseEntry"in t&&n(9,h=t.handleCollapseEntry),"handleExpandEntry"in t&&n(10,f=t.handleExpandEntry),"handleSplitEntry"in t&&n(11,p=t.handleSplitEntry),"handleEntryBackspace"in t&&n(12,y=t.handleEntryBackspace),"handleIndent"in t&&n(13,g=t.handleIndent),"handleDedent"in t&&n(14,m=t.handleDedent),"handleMultilinePaste"in t&&n(15,v=t.handleMultilinePaste),"handleMoveCursorLeft"in t&&n(16,E=t.handleMoveCursorLeft),"handleMoveCursorRight"in t&&n(17,w=t.handleMoveCursorRight),"handleSaveCursorPos"in t&&n(18,S=t.handleSaveCursorPos),"handleUpdateEntryLinks"in t&&n(19,b=t.handleUpdateEntryLinks),"handleSwapWithAboveEntry"in t&&n(20,x=t.handleSwapWithAboveEntry),"handleSwapWithBelowEntry"in t&&n(21,$=t.handleSwapWithBelowEntry),"handleCycleEntryHeadingSize"in t&&n(22,I=t.handleCycleEntryHeadingSize)},t.$$.update=()=>{2&t.$$.dirty[0]&&n(23,k=o.getId()),2&t.$$.dirty[0]&&n(24,D=o.getChildNodeArray()),16777216&t.$$.dirty[0]&&n(25,L=D.length>0),41943041&t.$$.dirty[0]&&n(26,P=L&&r.getEntryDisplayState(k)==he.COLLAPSED),8388612&t.$$.dirty[0]&&n(27,_=null!=k&&k===i)},[r,o,i,a,s,l,u,c,d,h,f,p,y,g,m,v,E,w,S,b,x,$,I,k,D,L,P,_,C,A,()=>A(k,C(o))]}var Ve=class extends lt{constructor(t){super(),st(this,t,qe,We,u,{tree:0,flowyTreeNode:1,docCursorEntryId:2,docCursorSelStart:3,docCursorSelEnd:4,handleSaveDocEntry:5,handleSaveFullCursor:6,handleGoUp:7,handleGoDown:8,handleCollapseEntry:9,handleExpandEntry:10,handleSplitEntry:11,handleEntryBackspace:12,handleIndent:13,handleDedent:14,handleMultilinePaste:15,handleMoveCursorLeft:16,handleMoveCursorRight:17,handleSaveCursorPos:18,handleUpdateEntryLinks:19,handleSwapWithAboveEntry:20,handleSwapWithBelowEntry:21,handleCycleEntryHeadingSize:22},[-1,-1])}};n(15);function Xe(t){let e,n,r,o,i,a,s,u,c;return a=new _t({props:{data:Tt,scale:"0.91"}}),{c(){e=w("div"),n=w("span"),r=b(t[4]),o=x(),i=w("span"),ot(a.$$.fragment),C(n,"id","doc-name-display"),C(n,"class","svelte-w0vzqc"),C(i,"id","doc-name-edit"),C(i,"class","svelte-w0vzqc"),C(e,"id","doc-name"),C(e,"class","svelte-w0vzqc")},m(d,h){m(d,e,h),g(e,n),g(n,r),g(e,o),g(e,i),it(a,i,null),s=!0,u||(c=I(i,"click",(function(){l(t[7])&&t[7].apply(this,arguments)})),u=!0)},p(e,n){t=e,(!s||16&n)&&k(r,t[4])},i(t){s||(tt(a.$$.fragment,t),s=!0)},o(t){et(a.$$.fragment,t),s=!1},d(t){t&&v(e),at(a),u=!1,c()}}}function Je(t){let e,n,o,i,a,u,c,d;return{c(){e=w("div"),n=w("input"),o=x(),i=w("span"),i.textContent="save",a=x(),u=w("span"),u.textContent="cancel",C(n,"type","text"),C(n,"id","doc-name-input"),C(n,"placeholder","Document name"),C(n,"class","svelte-w0vzqc"),C(i,"class","doc-name-edit-action svelte-w0vzqc"),C(u,"class","doc-name-edit-action svelte-w0vzqc")},m(r,s){m(r,e,s),g(e,n),D(n,t[0]),g(e,o),g(e,i),g(e,a),g(e,u),c||(d=[I(n,"input",t[11]),I(i,"click",(function(){l(t[5])&&t[5].apply(this,arguments)})),I(u,"click",(function(){l(t[6])&&t[6].apply(this,arguments)}))],c=!0)},p(e,r){t=e,1&r&&n.value!==t[0]&&D(n,t[0])},i:r,o:r,d(t){t&&v(e),c=!1,s(d)}}}function Ke(t){let e,n,r,o,i,a,s,l,u,c,d,h;e=new Te({});const f=[Je,Xe],p=[];function y(t,e){return t[8]?0:1}return i=y(t),a=p[i]=f[i](t),u=new Ve({props:{tree:t[1],flowyTreeNode:t[3],docCursorEntryId:t[2].cursorEntryId,docCursorSelStart:t[2].cursorSelectionStart,docCursorSelEnd:t[2].cursorSelectionEnd,handleCollapseEntry:we.collapseEntry,handleDedent:we.dedentEntry,handleEntryBackspace:we.backspaceEntry,handleExpandEntry:we.expandEntry,handleGoDown:we.entryGoDown,handleGoUp:we.entryGoUp,handleIndent:we.indentEntry,handleMultilinePaste:we.savePastedEntries,handleMoveCursorLeft:we.moveCursorLeft,handleMoveCursorRight:we.moveCursorRight,handleSaveCursorPos:we.saveCursorPosition,handleSaveDocEntry:we.saveCurrentPageDocEntry,handleSaveFullCursor:we.saveCursor,handleSplitEntry:we.splitEntry,handleUpdateEntryLinks:we.updateEntryLinks,handleSwapWithAboveEntry:we.swapWithAboveEntry,handleSwapWithBelowEntry:we.swapWithBelowEntry,handleCycleEntryHeadingSize:we.cycleEntryHeadingSize}}),d=new _e({props:{backlinks:t[9]}}),{c(){ot(e.$$.fragment),n=x(),r=w("div"),o=w("div"),a.c(),s=x(),l=w("div"),ot(u.$$.fragment),c=x(),ot(d.$$.fragment),C(o,"id","doc-name-container"),C(l,"id","doc-content"),C(r,"id","document"),C(r,"class","svelte-w0vzqc")},m(t,a){it(e,t,a),m(t,n,a),m(t,r,a),g(r,o),p[i].m(o,null),g(r,s),g(r,l),it(u,l,null),g(r,c),it(d,r,null),h=!0},p(t,[e]){let n=i;i=y(t),i===n?p[i].p(t,e):(Z(),et(p[n],1,1,()=>{p[n]=null}),Q(),a=p[i],a||(a=p[i]=f[i](t),a.c()),tt(a,1),a.m(o,null));const r={};2&e&&(r.tree=t[1]),8&e&&(r.flowyTreeNode=t[3]),4&e&&(r.docCursorEntryId=t[2].cursorEntryId),4&e&&(r.docCursorSelStart=t[2].cursorSelectionStart),4&e&&(r.docCursorSelEnd=t[2].cursorSelectionEnd),u.$set(r);const s={};512&e&&(s.backlinks=t[9]),d.$set(s)},i(t){h||(tt(e.$$.fragment,t),tt(a),tt(u.$$.fragment,t),tt(d.$$.fragment,t),h=!0)},o(t){et(e.$$.fragment,t),et(a),et(u.$$.fragment,t),et(d.$$.fragment,t),h=!1},d(t){at(e,t),t&&v(n),t&&v(r),p[i].d(),at(u),at(d)}}}function Ze(t,e,n){let r;d(t,we,t=>n(2,r=t));let{params:o={}}=e,i=Promise.resolve();N(()=>{var t;t=()=>{MathJax.texReset(),MathJax.typesetClear()},i=i.then(()=>(t(),MathJax.typesetPromise())).catch(t=>console.log("Typeset failed: "+t.message))});let a,s,l,u,c,h,f,p,y=r.docName;return t.$set=t=>{"params"in t&&n(10,o=t.params)},t.$$.update=()=>{if(1024&t.$$.dirty){let t=parseInt(o.id);if(!isNaN(t)){let e=t;we.navigateToDoc(e)}}4&t.$$.dirty&&n(1,a=null!==r.currentDocId?r.documents[r.currentDocId].tree:null),2&t.$$.dirty&&n(3,s=a&&a.getRoot()||null),4&t.$$.dirty&&n(4,l=r.docName),16&t.$$.dirty&&n(6,c=()=>{n(0,y=l),we.cancelEditingDocName()}),16&t.$$.dirty&&n(7,h=()=>{n(0,y=l),we.startEditingDocName()}),1&t.$$.dirty&&n(5,u=()=>we.saveEditingDocName(y)),4&t.$$.dirty&&n(8,f=r.docIsEditingName),4&t.$$.dirty&&n(9,p=function(){let t=r.linkGraph.getBacklinks(r.currentDocId),e={};for(let[[n,o],i]of t.entries())n in e||(e[n]={id:n,name:r.documents[n].name,entries:{}}),e[n].entries[o]={id:o,text:r.documents[n].tree.getEntryText(o)};return e}())},[y,a,r,s,l,u,c,h,f,p,o,function(){y=this.value,n(0,y),n(4,l),n(2,r)}]}var Qe=class extends lt{constructor(t){super(),st(this,t,Ze,Ke,u,{params:10})}};n(16);function tn(t,e,n){const r=t.slice();return r[9]=e[n],r}function en(t){let e,n,r,o,i,a,s,l,u,c,d,h,f,p,E,S,$=t[9].doc.name+"",A=new Date(t[9].doc.lastUpdated).toLocaleString()+"";function D(...e){return t[7](t[9],...e)}return{c(){e=w("tr"),n=w("td"),r=w("input"),i=x(),a=w("td"),s=w("a"),l=b($),c=x(),d=w("td"),h=b(A),f=x(),C(r,"type","checkbox"),r.checked=o=t[9].isSelected,C(n,"class","doc-select svelte-19v3ef1"),C(s,"href",u="#/doc/"+t[9].doc.id),C(a,"class","svelte-19v3ef1"),C(d,"class","last-updated svelte-19v3ef1"),C(e,"class",p=y(t[9].isSelected?"selected-doc":"")+" svelte-19v3ef1")},m(t,o){m(t,e,o),g(e,n),g(n,r),g(e,i),g(e,a),g(a,s),g(s,l),g(e,c),g(e,d),g(d,h),g(e,f),E||(S=I(r,"change",D),E=!0)},p(n,i){t=n,4&i&&o!==(o=t[9].isSelected)&&(r.checked=o),4&i&&$!==($=t[9].doc.name+"")&&k(l,$),4&i&&u!==(u="#/doc/"+t[9].doc.id)&&C(s,"href",u),4&i&&A!==(A=new Date(t[9].doc.lastUpdated).toLocaleString()+"")&&k(h,A),4&i&&p!==(p=y(t[9].isSelected?"selected-doc":"")+" svelte-19v3ef1")&&C(e,"class",p)},d(t){t&&v(e),E=!1,S()}}}function nn(t){let e,n,r,o,i,a,l,u,c,d,h,f,p,y,S,$,A,k,D,L,P,_,B,T,N,O,j,M,R,U;o=new _t({props:{data:jt,scale:"1"}}),u=new _t({props:{data:Ot,scale:"1"}});let z=t[2],H=[];for(let e=0;e<z.length;e+=1)H[e]=en(tn(t,z,e));return{c(){e=w("div"),n=w("div"),r=w("button"),ot(o.$$.fragment),a=x(),l=w("button"),ot(u.$$.fragment),c=x(),d=w("div"),h=w("select"),f=w("option"),p=b("Sort by name "),S=w("option"),$=b("Sort by name "),k=w("option"),D=b("Sort by last updated "),P=w("option"),_=b("Sort by last updated "),T=x(),N=w("table"),O=w("tr"),O.innerHTML='<th class="svelte-19v3ef1"></th> \n    <th id="doc-name-header" class="svelte-19v3ef1">name</th> \n    <th class="svelte-19v3ef1">last updated</th>',j=x();for(let t=0;t<H.length;t+=1)H[t].c();r.disabled=i=!t[0],C(n,"id","top-control-button-bar"),f.__value="name-asc",f.value=f.__value,f.selected=y="name-asc"===t[1].sortMode,S.__value="name-desc",S.value=S.__value,S.selected=A="name-desc"===t[1].sortMode,k.__value="updated-asc",k.value=k.__value,k.selected=L="updated-asc"===t[1].sortMode,P.__value="updated-desc",P.value=P.__value,P.selected=B="updated-desc"===t[1].sortMode,C(h,"id","sort-select"),C(d,"id","top-control-sort"),C(d,"class","svelte-19v3ef1"),C(e,"id","top-control"),C(e,"class","svelte-19v3ef1"),C(O,"id","docsListHeader"),C(O,"class","svelte-19v3ef1"),C(N,"id","docsList"),C(N,"class","svelte-19v3ef1")},m(i,s){m(i,e,s),g(e,n),g(n,r),it(o,r,null),g(n,a),g(n,l),it(u,l,null),g(e,c),g(e,d),g(d,h),g(h,f),g(f,p),g(h,S),g(S,$),g(h,k),g(k,D),g(h,P),g(P,_),m(i,T,s),m(i,N,s),g(N,O),g(N,j);for(let t=0;t<H.length;t+=1)H[t].m(N,null);M=!0,R||(U=[I(r,"click",t[4]),I(l,"click",t[3]),I(h,"change",t[5])],R=!0)},p(t,[e]){if((!M||1&e&&i!==(i=!t[0]))&&(r.disabled=i),(!M||2&e&&y!==(y="name-asc"===t[1].sortMode))&&(f.selected=y),(!M||2&e&&A!==(A="name-desc"===t[1].sortMode))&&(S.selected=A),(!M||2&e&&L!==(L="updated-asc"===t[1].sortMode))&&(k.selected=L),(!M||2&e&&B!==(B="updated-desc"===t[1].sortMode))&&(P.selected=B),68&e){let n;for(z=t[2],n=0;n<z.length;n+=1){const r=tn(t,z,n);H[n]?H[n].p(r,e):(H[n]=en(r),H[n].c(),H[n].m(N,null))}for(;n<H.length;n+=1)H[n].d(1);H.length=z.length}},i(t){M||(tt(o.$$.fragment,t),tt(u.$$.fragment,t),M=!0)},o(t){et(o.$$.fragment,t),et(u.$$.fragment,t),M=!1},d(t){t&&v(e),at(o),at(u),t&&v(T),t&&v(N),E(H,t),R=!1,s(U)}}}function rn(t,e){return t=t.doc,e=e.doc,t.name<e.name?-1:t.name>e.name?1:0}function on(t,e){return t=t.doc,e=e.doc,t.name>e.name?-1:t.name<e.name?1:0}function an(t,e){return t=t.doc,e=e.doc,t.lastUpdated<e.lastUpdated?-1:t.lastUpdated>e.lastUpdated?1:0}function sn(t,e){return t=t.doc,e=e.doc,t.lastUpdated>e.lastUpdated?-1:t.lastUpdated<e.lastUpdated?1:0}function ln(t,e,n){let r;function o(t,e){we.docsDisplaySetSelection(t,e.target.checked)}d(t,we,t=>n(1,r=t));let i=!1;let a,s;return t.$$.update=()=>{2&t.$$.dirty&&n(8,a=function(){switch(r.sortMode){case"name-asc":return rn;case"name-desc":return on;case"updated-asc":return an;case"updated-desc":return sn;default:return rn}}()),258&t.$$.dirty&&n(2,s=function(){let t=!1,e=Object.entries(r.docsDisplay).map(([e,n])=>(t=t||n.isSelected,{doc:r.documents[e],isSelected:n.isSelected})).sort(a);return n(0,i=t),e}())},[i,r,s,function(){qt("/create-doc")},function(){let t=Object.entries(r.docsDisplay).filter(([t,e])=>e.isSelected).map(([t,e])=>t),e=`Are you sure you want to delete the selected ${n=t.length,1==n?"document":n+" documents"}?`;var n;window.confirm(e)&&we.deleteDocs(t)},function(t){we.changeSort(t.target.value)},o,(t,e)=>o(t.doc.id,e)]}var un=class extends lt{constructor(t){super(),st(this,t,ln,nn,u,{})}};function cn(t,e,n){let r;d(t,we,t=>n(1,r=t));let{params:o={}}=e,i=decodeURI(o.name);if(i in r.docIdLookupByDocName){qt("/doc/"+r.docIdLookupByDocName[i])}else console.log("TODO: couldnt find page name in lookup. name = ",o.name),console.log("lookup = ",r.docIdLookupByDocName);return t.$set=t=>{"params"in t&&n(0,o=t.params)},[o]}var dn=class extends lt{constructor(t){super(),st(this,t,cn,null,u,{params:0})}};function hn(t,e,n){let r;return d(t,we,t=>n(0,r=t)),we.createNewDocument(),qt("/doc/"+r.currentDocId),[]}var fn=class extends lt{constructor(t){super(),st(this,t,hn,null,u,{})}};function pn(t){let e,n,o;return{c(){e=w("h1"),e.textContent="Not found",n=x(),o=w("p"),o.textContent="The path requested was not found."},m(t,r){m(t,e,r),m(t,n,r),m(t,o,r)},p:r,i:r,o:r,d(t){t&&v(e),t&&v(n),t&&v(o)}}}var yn=class extends lt{constructor(t){super(),st(this,t,null,pn,u,{})}};class gn{get(t){const e=localStorage.getItem(t);return null==e?null:e}set(t,e){return localStorage.setItem(t,e)}}n(17);function mn(t){let e,n,o,i,a,l,u,c,d,h,f,p,y,E;return n=new Xt({props:{routes:t[2]}}),a=new _t({props:{data:Nt,scale:"1"}}),{c(){e=w("main"),ot(n.$$.fragment),o=x(),i=w("div"),ot(a.$$.fragment),l=x(),u=w("button"),u.textContent="export",c=x(),d=w("button"),d.textContent="import",h=x(),f=w("input"),C(e,"class","svelte-1a95zz1"),C(u,"class","svelte-1a95zz1"),C(d,"class","svelte-1a95zz1"),C(i,"id","actions-bar"),C(i,"class","svelte-1a95zz1"),C(f,"id","import-docs"),C(f,"type","file"),C(f,"class","svelte-1a95zz1")},m(r,s){m(r,e,s),it(n,e,null),m(r,o,s),m(r,i,s),it(a,i,null),g(i,l),g(i,u),g(i,c),g(i,d),m(r,h,s),m(r,f,s),p=!0,y||(E=[I(u,"click",t[0]),I(d,"click",vn),I(f,"change",t[1])],y=!0)},p:r,i(t){p||(tt(n.$$.fragment,t),tt(a.$$.fragment,t),p=!0)},o(t){et(n.$$.fragment,t),et(a.$$.fragment,t),p=!1},d(t){t&&v(e),at(n),t&&v(o),t&&v(i),at(a),t&&v(h),t&&v(f),y=!1,s(E)}}}function vn(){document.getElementById("import-docs").click()}function En(t,e,n){let r;var o;function i(t){we.init(t.documents,t.docIdLookupByDocName,t.linkGraph)}d(t,we,t=>n(3,r=t)),o=()=>{document.addEventListener("selectionchange",()=>{let t=document.getSelection();if(console.log(" %% selchange, anchor = ",t.anchorNode),t.anchorNode.className&&t.anchorNode.className.includes&&t.anchorNode.className.includes("entry-display"))return;if(!document.getElementById("doc-header"))return;if(!document.getElementById("doc-content").contains(t.anchorNode))return void we.saveCursorEntryId(null);console.log(" %% selchange, it's in doc-content");let e=function(t){let e,n=t,r=["rendered-entry","icon-container","entry-display"];function o(){return e=function(t,e){for(var n=0;n<e.length;n++)if(t.includes(e[n]))return e[n];return!1}(n.className,r),e}for(;n&&(!n.className||!n.className.includes||!o());)n=n.parentNode,n&&n.className&&n.className.includes&&o();return{node:n,className:e}}(t.anchorNode);if("icon-container"!==e.className){if(console.log(" %% selchange, not in icon-container. checking r-e"),"rendered-entry"===e.className){const n=e.node;let r=function t(e,n,r){if(e.nodeType!==Node.TEXT_NODE&&e.nodeType!==Node.ELEMENT_NODE)return null;if(e.nodeType===Node.TEXT_NODE)return e===n.anchorNode?{found:!0,pos:r+n.anchorOffset}:{found:!1,pos:r+e.textContent.length};if("mjx-container"===e.localName)return{found:!1,pos:r+2+e.dataset.original.length};"strong"===e.localName||"em"===e.localName?r+=2:"a"===e.localName&&"auto"!==e.dataset.markupLinkType&&"internal"!==e.dataset.markupLinkType&&(r+=1);let o=e.childNodes;for(var i=0;i<o.length;++i){let e=t(o[i],n,r);if(e.found)return e;r=e.pos}return"strong"===e.localName||"em"===e.localName?r+=2:"a"===e.localName&&"auto"!==e.dataset.markupLinkType&&"internal"!==e.dataset.markupLinkType&&(r+=e.getAttribute("href").length+3),{found:!1,pos:r}}(n,t,0).pos,o=parseInt(n.dataset.entryId);return console.log(" %% selchange, saving cursor (entryId, selStart, selEnd) = ",o,r,r),void we.saveCursor(o,r,r)}e.node?we.saveCursor(parseInt(e.node.dataset.entryId),0,0):we.saveCursorEntryId(null)}else we.saveCursorEntryId(null)})},T().$$.on_mount.push(o);let a=new ge(new gn);i(me(a.getDocuments()));const s={"/":un,"/doc/:id":Qe,"/create-doc":fn,"/page/:name":dn,"*":yn};return t.$$.update=()=>{8&t.$$.dirty&&a.saveDocuments(r.documents)},[function(){let t=a.getDocumentsString();location.assign("data:application/octet-stream;base64,"+btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode("0x"+e)}))))},function(t){console.log(" ## handleDocsImport, ev = ",t),console.log(" ## handleDocsImport, this.files = ",this,this.files);const e=this.files;if(e.length>1)return void console.log("TODO: multiple files uploaded. show an error message of some kind? is this even possible?");e[0].arrayBuffer().then(t=>{console.log(" ## handleDocsImport, the array buffer = ",t);let e=String.fromCharCode.apply(null,new Uint8Array(t));console.log(" ## handleFIleUpload, docsStr = ",e);try{let t=JSON.parse(e);Object.entries(t).forEach(([e,n])=>{t[e]=ve(n.id,n.name,n.lastUpdated,n.tree.entries,n.tree.node)}),i(me(t)),function(t){if(!t||t.length<1||"/"!=t.charAt(0)&&0!==t.indexOf("#/"))throw Error("Invalid parameter location");Y().then(()=>{window.location.hash=("#"==t.charAt(0)?"":"#")+t})}("/")}catch(t){console.log("TODO: file is not a valid JSON object, err = ",t)}})},s]}const wn=new class extends lt{constructor(t){super(),st(this,t,En,mn,u,{})}}({target:document.body,props:{}});window.app=wn;e.default=wn}]);