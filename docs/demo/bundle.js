!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=18)}([function(t,e,n){"use strict";n.d(e,"a",(function(){return z})),n.d(e,"b",(function(){return g})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return _})),n.d(e,"e",(function(){return w})),n.d(e,"f",(function(){return A})),n.d(e,"g",(function(){return N})),n.d(e,"h",(function(){return T})),n.d(e,"i",(function(){return O})),n.d(e,"j",(function(){return D})),n.d(e,"k",(function(){return a})),n.d(e,"l",(function(){return E})),n.d(e,"m",(function(){return d})),n.d(e,"n",(function(){return h})),n.d(e,"o",(function(){return s})),n.d(e,"p",(function(){return y})),n.d(e,"q",(function(){return M})),n.d(e,"r",(function(){return j})),n.d(e,"s",(function(){return p})),n.d(e,"t",(function(){return f})),n.d(e,"u",(function(){return U})),n.d(e,"v",(function(){return k})),n.d(e,"w",(function(){return b})),n.d(e,"x",(function(){return L})),n.d(e,"y",(function(){return $})),n.d(e,"z",(function(){return B})),n.d(e,"A",(function(){return u})),n.d(e,"B",(function(){return v})),n.d(e,"C",(function(){return l})),n.d(e,"D",(function(){return R})),n.d(e,"E",(function(){return P})),n.d(e,"F",(function(){return I})),n.d(e,"G",(function(){return S})),n.d(e,"H",(function(){return C}));var r=n(1),i=n(9),o=n(6);function a(t){return Object.keys(t)}function s(t,e,n){void 0===n&&(n=i.c);var r=l(t,n),o=l(e,n);return D(o)?!!D(r)&&o===r:D(r)?r in o:a(r).every((function(t){return t in o&&s(r[t],o[t])}))}function c(t){try{return D(t)||"number"==typeof t?""+t:t.type}catch(t){throw new Error("Events must be strings or objects with a string event.type property.")}}function u(t,e){try{return _(t)?t:t.toString().split(e)}catch(e){throw new Error("'"+t+"' is not a valid state path.")}}function l(t,e){return"object"==typeof(n=t)&&"value"in n&&"context"in n&&"event"in n&&"_event"in n?t.value:_(t)?f(t):"string"!=typeof t?t:f(u(t,e));var n}function f(t){if(1===t.length)return t[0];for(var e={},n=e,r=0;r<t.length-1;r++)r===t.length-2?n[t[r]]=t[r+1]:(n[t[r]]={},n=n[t[r]]);return e}function h(t,e){for(var n={},r=a(t),i=0;i<r.length;i++){var o=r[i];n[o]=e(t[o],o,t,i)}return n}function d(t,e,n){var i,o,s={};try{for(var c=Object(r.e)(a(t)),u=c.next();!u.done;u=c.next()){var l=u.value,f=t[l];n(f)&&(s[l]=e(f,l,t))}}catch(t){i={error:t}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return s}var p=function(t){return function(e){var n,i,o=e;try{for(var a=Object(r.e)(t),s=a.next();!s.done;s=a.next()){o=o[s.value]}}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return o}};function y(t,e){return function(n){var i,o,a=n;try{for(var s=Object(r.e)(t),c=s.next();!c.done;c=s.next()){var u=c.value;a=a[e][u]}}catch(t){i={error:t}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}return a}}function v(t){return t?D(t)?[[t]]:g(a(t).map((function(e){var n=t[e];return"string"==typeof n||n&&Object.keys(n).length?v(t[e]).map((function(t){return[e].concat(t)})):[[e]]}))):[[]]}function g(t){var e;return(e=[]).concat.apply(e,Object(r.d)(t))}function m(t){return _(t)?t:[t]}function b(t){return void 0===t?[]:m(t)}function E(t,e,n){var i,o;if(A(t))return t(e,n.data);var s={};try{for(var c=Object(r.e)(a(t)),u=c.next();!u.done;u=c.next()){var l=u.value,f=t[l];A(f)?s[l]=f(e,n.data):s[l]=f}}catch(t){i={error:t}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return s}function w(t){return/^(done|error)\./.test(t)}function O(t){return t instanceof Promise||!(null===t||!A(t)&&"object"!=typeof t||!A(t.then))}function j(t,e){var n,i,o=Object(r.b)([[],[]],2),a=o[0],s=o[1];try{for(var c=Object(r.e)(t),u=c.next();!u.done;u=c.next()){var l=u.value;e(l)?a.push(l):s.push(l)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return[a,s]}function x(t,e){return h(t.states,(function(t,n){if(t){var r=(D(e)?void 0:e[n])||(t?t.current:void 0);if(r)return{current:r,states:x(t,r)}}}))}function S(t,e){return{current:e,states:x(t,e)}}function I(t,e,n,i){return o.a||C(!!t,"Attempting to update undefined context"),t?n.reduce((function(t,n){var o,s,c=n.assignment,u={state:i,action:n,_event:e},l={};if(A(c))l=c(t,e.data,u);else try{for(var f=Object(r.e)(a(c)),h=f.next();!h.done;h=f.next()){var d=h.value,p=c[d];l[d]=A(p)?p(t,e.data,u):p}}catch(t){o={error:t}}finally{try{h&&!h.done&&(s=f.return)&&s.call(f)}finally{if(o)throw o.error}}return Object.assign({},t,l)}),t):t}var C=function(){};function _(t){return Array.isArray(t)}function A(t){return"function"==typeof t}function D(t){return"string"==typeof t}function $(t,e){if(t)return D(t)?{type:i.a,name:t,predicate:e?e[t]:void 0}:A(t)?{type:i.a,name:t.name,predicate:t}:t}function T(t){try{return"subscribe"in t&&A(t.subscribe)}catch(t){return!1}}o.a||(C=function(t,e){var n=t instanceof Error?t:void 0;if((n||!t)&&void 0!==console){var r=["Warning: "+e];n&&r.push(n),console.warn.apply(console,r)}});var k=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function N(t){try{return"__xstatenode"in t}catch(t){return!1}}var P=function(){var t=0;return function(){return(++t).toString(16)}}();function L(t,e){return D(t)||"number"==typeof t?Object(r.a)({type:t},e):t}function B(t,e){if(!D(t)&&"$$type"in t&&"scxml"===t.$$type)return t;var n=L(t);return Object(r.a)({name:n.type,data:n,$$type:"scxml",type:"external"},e)}function R(t,e){return m(e).map((function(e){return void 0===e||"string"==typeof e||N(e)?{target:e,event:t}:Object(r.a)(Object(r.a)({},e),{event:t})}))}function M(t){if(void 0!==t&&t!==i.d)return b(t)}function U(t,e,n){if(!o.a){var r=t.stack?" Stacktrace was '"+t.stack+"'":"";if(t===e)console.error("Missing onError handler for invocation '"+n+"', error was '"+t+"'."+r);else{var i=e.stack?" Stacktrace was '"+e.stack+"'":"";console.error("Missing onError handler and/or unhandled exception/promise rejection for invocation '"+n+"'. Original error: '"+t+"'. "+r+" Current error is '"+e+"'."+i)}}}function z(t,e,n,r,o){var a=t.options.guards,s={state:o,cond:e,_event:r};if(e.type===i.a)return e.predicate(n,r.data,s);var c=a[e.type];if(!c)throw new Error("Guard '"+e.type+"' is not implemented on machine '"+t.id+"'.");return c(n,r.data,s)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return s})),n.d(e,"e",(function(){return o}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function i(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function o(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function a(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function s(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t}},function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return g})),n.d(e,"d",(function(){return y})),n.d(e,"e",(function(){return p})),n.d(e,"f",(function(){return h})),n.d(e,"g",(function(){return d})),n.d(e,"h",(function(){return f})),n.d(e,"i",(function(){return u})),n.d(e,"j",(function(){return m})),n.d(e,"k",(function(){return a})),n.d(e,"l",(function(){return s})),n.d(e,"m",(function(){return i})),n.d(e,"n",(function(){return o})),n.d(e,"o",(function(){return v}));var r=n(3),i=r.a.Start,o=r.a.Stop,a=r.a.Raise,s=r.a.Send,c=r.a.Cancel,u=r.a.NullEvent,l=r.a.Assign,f=(r.a.After,r.a.DoneState,r.a.Log),h=r.a.Init,d=r.a.Invoke,p=(r.a.ErrorExecution,r.a.ErrorPlatform),y=r.a.ErrorCustom,v=r.a.Update,g=r.a.Choose,m=r.a.Pure},function(t,e,n){"use strict";var r,i;n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i})),function(t){t.Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication",t.ErrorPlatform="error.platform",t.ErrorCustom="xstate.error",t.Update="xstate.update",t.Pure="xstate.pure",t.Choose="xstate.choose"}(r||(r={})),function(t){t.Parent="#_parent",t.Internal="#_internal"}(i||(i={}))},function(t,e,n){(function(e){"undefined"!=typeof self&&self,t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,n,r){"use strict";function i(t){if(!(this instanceof i))return new i(t);this._=t}var o=i.prototype;function a(t,e){for(var n=0;n<t;n++)e(n)}function s(t,e,n){return function(t,e){a(e.length,(function(n){t(e[n],n,e)}))}((function(n,r,i){e=t(e,n,r,i)}),n),e}function c(t,e){return s((function(e,n,r,i){return e.concat([t(n,r,i)])}),[],e)}function u(t,n){var r={v:0,buf:n};return a(t,(function(){var t;r={v:r.v<<1|(t=r.buf,t[0]>>7),buf:function(t){var n=s((function(t,n,r,i){return t.concat(r===i.length-1?e.from([n,0]).readUInt16BE(0):i.readUInt16BE(r))}),[],t);return e.from(c((function(t){return(t<<1&65535)>>8}),n))}(r.buf)}})),r}function l(){return void 0!==e}function f(){if(!l())throw new Error("Buffer global does not exist; please use webpack if you need to parse Buffers in the browser.")}function h(t){f();var e=s((function(t,e){return t+e}),0,t);if(e%8!=0)throw new Error("The bits ["+t.join(", ")+"] add up to "+e+" which is not an even number of bytes; the total should be divisible by 8");var n,r=e/8,o=(n=function(t){return t>48},s((function(t,e){return t||(n(e)?e:t)}),null,t));if(o)throw new Error(o+" bit range requested exceeds 48 bit (6 byte) Number max.");return new i((function(e,n){var i=r+n;return i>e.length?j(n,r.toString()+" bytes"):O(i,s((function(t,e){var n=u(e,t.buf);return{coll:t.coll.concat(n.v),buf:n.buf}}),{coll:[],buf:e.slice(n,i)},t).coll)}))}function d(t,e){return new i((function(n,r){return f(),r+e>n.length?j(r,e+" bytes for "+t):O(r+e,n.slice(r,r+e))}))}function p(t,e){if("number"!=typeof(n=e)||Math.floor(n)!==n||e<0||e>6)throw new Error(t+" requires integer length in range [0, 6].");var n}function y(t){return p("uintBE",t),d("uintBE("+t+")",t).map((function(e){return e.readUIntBE(0,t)}))}function v(t){return p("uintLE",t),d("uintLE("+t+")",t).map((function(e){return e.readUIntLE(0,t)}))}function g(t){return p("intBE",t),d("intBE("+t+")",t).map((function(e){return e.readIntBE(0,t)}))}function m(t){return p("intLE",t),d("intLE("+t+")",t).map((function(e){return e.readIntLE(0,t)}))}function b(t){return t instanceof i}function E(t){return"[object Array]"==={}.toString.call(t)}function w(t){return l()&&e.isBuffer(t)}function O(t,e){return{status:!0,index:t,value:e,furthest:-1,expected:[]}}function j(t,e){return E(e)||(e=[e]),{status:!1,index:-1,value:null,furthest:t,expected:e}}function x(t,e){if(!e)return t;if(t.furthest>e.furthest)return t;var n=t.furthest===e.furthest?function(t,e){for(var n={},r=0;r<t.length;r++)n[t[r]]=!0;for(var i=0;i<e.length;i++)n[e[i]]=!0;var o=[];for(var a in n)({}).hasOwnProperty.call(n,a)&&o.push(a);return o.sort(),o}(t.expected,e.expected):e.expected;return{status:t.status,index:t.index,value:t.value,furthest:e.furthest,expected:n}}function S(t,e){if(w(t))return{offset:e,line:-1,column:-1};var n=t.slice(0,e).split("\n");return{offset:e,line:n.length,column:n[n.length-1].length+1}}function I(t){if(!b(t))throw new Error("not a parser: "+t)}function C(t,e){return"string"==typeof t?t.charAt(e):t[e]}function _(t){if("number"!=typeof t)throw new Error("not a number: "+t)}function A(t){if("function"!=typeof t)throw new Error("not a function: "+t)}function D(t){if("string"!=typeof t)throw new Error("not a string: "+t)}function $(t,e){return new Array(e+1).join(t)}function T(t,e,n){var r=e-t.length;return r<=0?t:$(n,r)+t}function k(t,e,n,r){return{from:t-e>0?t-e:0,to:t+n>r?r:t+n}}function N(t,e){var n,r,i,o,a,u=e.index,l=u.offset,f=1;if(l===t.length)return"Got the end of the input";if(w(t)){var h=l-l%8,d=l-h,p=k(h,40,40,t.length),y=c((function(t){return c((function(t){return T(t.toString(16),2,"0")}),t)}),function(t,e){var n=t.length,r=[],i=0;if(n<=8)return[t.slice()];for(var o=0;o<n;o++)r[i]||r.push([]),r[i].push(t[o]),(o+1)%8==0&&i++;return r}(t.slice(p.from,p.to).toJSON().data));o=function(t){return 0===t.from&&1===t.to?{from:t.from,to:t.to}:{from:t.from/8,to:Math.floor(t.to/8)}}(p),r=h/8,n=3*d,d>=4&&(n+=1),f=2,i=c((function(t){return t.length<=4?t.join(" "):t.slice(0,4).join(" ")+"  "+t.slice(4).join(" ")}),y),(a=(8*(o.to>0?o.to-1:o.to)).toString(16).length)<2&&(a=2)}else{var v=t.split(/\r\n|[\n\r\u2028\u2029]/);n=u.column-1,r=u.line-1,o=k(r,2,3,v.length),i=v.slice(o.from,o.to),a=o.to.toString().length}var g=r-o.from;return w(t)&&(a=(8*(o.to>0?o.to-1:o.to)).toString(16).length)<2&&(a=2),s((function(e,r,i){var s,c=i===g,u=c?"> ":"  ";return s=w(t)?T((8*(o.from+i)).toString(16),a,"0"):T((o.from+i+1).toString(),a," "),[].concat(e,[u+s+" | "+r],c?["  "+$(" ",a)+" | "+T("",n," ")+$("^",f)]:[])}),[],i).join("\n")}function P(t,e){return["\n","-- PARSING FAILED "+$("-",50),"\n\n",N(t,e),"\n\n",(n=e.expected,1===n.length?"Expected:\n\n"+n[0]:"Expected one of the following: \n\n"+n.join(", ")),"\n"].join("");var n}function L(t){var e=""+t;return e.slice(e.lastIndexOf("/")+1)}function B(){for(var t=[].slice.call(arguments),e=t.length,n=0;n<e;n+=1)I(t[n]);return i((function(n,r){for(var i,o=new Array(e),a=0;a<e;a+=1){if(!(i=x(t[a]._(n,r),i)).status)return i;o[a]=i.value,r=i.index}return x(O(r,o),i)}))}function R(){var t=[].slice.call(arguments);if(0===t.length)throw new Error("seqMap needs at least one argument");var e=t.pop();return A(e),B.apply(null,t).map((function(t){return e.apply(null,t)}))}function M(){var t=[].slice.call(arguments),e=t.length;if(0===e)return G("zero alternates");for(var n=0;n<e;n+=1)I(t[n]);return i((function(e,n){for(var r,i=0;i<t.length;i+=1)if((r=x(t[i]._(e,n),r)).status)return r;return r}))}function U(t,e){return z(t,e).or(Y([]))}function z(t,e){return I(t),I(e),R(t,e.then(t).many(),(function(t,e){return[t].concat(e)}))}function V(t){D(t);var e="'"+t+"'";return i((function(n,r){var i=r+t.length,o=n.slice(r,i);return o===t?O(i,o):j(r,e)}))}function F(t,e){!function(t){if(!(t instanceof RegExp))throw new Error("not a regexp: "+t);for(var e=L(t),n=0;n<e.length;n++){var r=e.charAt(n);if("i"!==r&&"m"!==r&&"u"!==r)throw new Error('unsupported regexp flag "'+r+'": '+t)}}(t),arguments.length>=2?_(e):e=0;var n=function(t){return RegExp("^(?:"+t.source+")",L(t))}(t),r=""+t;return i((function(t,i){var o=n.exec(t.slice(i));if(o){if(0<=e&&e<=o.length){var a=o[0],s=o[e];return O(i+a.length,s)}return j(i,"valid match group (0 to "+o.length+") in "+r)}return j(i,r)}))}function Y(t){return i((function(e,n){return O(n,t)}))}function G(t){return i((function(e,n){return j(n,t)}))}function H(t){if(b(t))return i((function(e,n){var r=t._(e,n);return r.index=n,r.value="",r}));if("string"==typeof t)return H(V(t));if(t instanceof RegExp)return H(F(t));throw new Error("not a string, regexp, or parser: "+t)}function q(t){return I(t),i((function(e,n){var r=t._(e,n),i=e.slice(n,r.index);return r.status?j(n,'not "'+i+'"'):O(n,null)}))}function J(t){return A(t),i((function(e,n){var r=C(e,n);return n<e.length&&t(r)?O(n+1,r):j(n,"a character/byte matching "+t)}))}function X(t,e){arguments.length<2&&(e=t,t=void 0);var n=i((function(t,r){return n._=e()._,n._(t,r)}));return t?n.desc(t):n}function W(){return G("fantasy-land/empty")}o.parse=function(t){if("string"!=typeof t&&!w(t))throw new Error(".parse must be called with a string or Buffer as its argument");var e=this.skip(tt)._(t,0);return e.status?{status:!0,value:e.value}:{status:!1,index:S(t,e.furthest),expected:e.expected}},o.tryParse=function(t){var e=this.parse(t);if(e.status)return e.value;var n=P(t,e),r=new Error(n);throw r.type="ParsimmonError",r.result=e,r},o.assert=function(t,e){return this.chain((function(n){return t(n)?Y(n):G(e)}))},o.or=function(t){return M(this,t)},o.trim=function(t){return this.wrap(t,t)},o.wrap=function(t,e){return R(t,this,e,(function(t,e){return e}))},o.thru=function(t){return t(this)},o.then=function(t){return I(t),B(this,t).map((function(t){return t[1]}))},o.many=function(){var t=this;return i((function(e,n){for(var r=[],i=void 0;;){if(!(i=x(t._(e,n),i)).status)return x(O(n,r),i);if(n===i.index)throw new Error("infinite loop detected in .many() parser --- calling .many() on a parser which can accept zero characters is usually the cause");n=i.index,r.push(i.value)}}))},o.tieWith=function(t){return D(t),this.map((function(e){if(function(t){if(!E(t))throw new Error("not an array: "+t)}(e),e.length){D(e[0]);for(var n=e[0],r=1;r<e.length;r++)D(e[r]),n+=t+e[r];return n}return""}))},o.tie=function(){return this.tieWith("")},o.times=function(t,e){var n=this;return arguments.length<2&&(e=t),_(t),_(e),i((function(r,i){for(var o=[],a=void 0,s=void 0,c=0;c<t;c+=1){if(s=x(a=n._(r,i),s),!a.status)return s;i=a.index,o.push(a.value)}for(;c<e&&(s=x(a=n._(r,i),s),a.status);c+=1)i=a.index,o.push(a.value);return x(O(i,o),s)}))},o.result=function(t){return this.map((function(){return t}))},o.atMost=function(t){return this.times(0,t)},o.atLeast=function(t){return R(this.times(t),this.many(),(function(t,e){return t.concat(e)}))},o.map=function(t){A(t);var e=this;return i((function(n,r){var i=e._(n,r);return i.status?x(O(i.index,t(i.value)),i):i}))},o.contramap=function(t){A(t);var e=this;return i((function(n,r){var i=e.parse(t(n.slice(r)));return i.status?O(r+n.length,i.value):i}))},o.promap=function(t,e){return A(t),A(e),this.contramap(t).map(e)},o.skip=function(t){return B(this,t).map((function(t){return t[0]}))},o.mark=function(){return R(K,this,K,(function(t,e,n){return{start:t,value:e,end:n}}))},o.node=function(t){return R(K,this,K,(function(e,n,r){return{name:t,value:n,start:e,end:r}}))},o.sepBy=function(t){return U(this,t)},o.sepBy1=function(t){return z(this,t)},o.lookahead=function(t){return this.skip(H(t))},o.notFollowedBy=function(t){return this.skip(q(t))},o.desc=function(t){E(t)||(t=[t]);var e=this;return i((function(n,r){var i=e._(n,r);return i.status||(i.expected=t),i}))},o.fallback=function(t){return this.or(Y(t))},o.ap=function(t){return R(t,this,(function(t,e){return t(e)}))},o.chain=function(t){var e=this;return i((function(n,r){var i=e._(n,r);return i.status?x(t(i.value)._(n,i.index),i):i}))},o.concat=o.or,o.empty=W,o.of=Y,o["fantasy-land/ap"]=o.ap,o["fantasy-land/chain"]=o.chain,o["fantasy-land/concat"]=o.concat,o["fantasy-land/empty"]=o.empty,o["fantasy-land/of"]=o.of,o["fantasy-land/map"]=o.map;var K=i((function(t,e){return O(e,S(t,e))})),Z=i((function(t,e){return e>=t.length?j(e,"any character/byte"):O(e+1,C(t,e))})),Q=i((function(t,e){return O(t.length,t.slice(e))})),tt=i((function(t,e){return e<t.length?j(e,"EOF"):O(e,null)})),et=F(/[0-9]/).desc("a digit"),nt=F(/[0-9]*/).desc("optional digits"),rt=F(/[a-z]/i).desc("a letter"),it=F(/[a-z]*/i).desc("optional letters"),ot=F(/\s*/).desc("optional whitespace"),at=F(/\s+/).desc("whitespace"),st=V("\r"),ct=V("\n"),ut=V("\r\n"),lt=M(ut,ct,st).desc("newline"),ft=M(lt,tt);i.all=Q,i.alt=M,i.any=Z,i.cr=st,i.createLanguage=function(t){var e={};for(var n in t)({}).hasOwnProperty.call(t,n)&&function(n){e[n]=X((function(){return t[n](e)}))}(n);return e},i.crlf=ut,i.custom=function(t){return i(t(O,j))},i.digit=et,i.digits=nt,i.empty=W,i.end=ft,i.eof=tt,i.fail=G,i.formatError=P,i.index=K,i.isParser=b,i.lazy=X,i.letter=rt,i.letters=it,i.lf=ct,i.lookahead=H,i.makeFailure=j,i.makeSuccess=O,i.newline=lt,i.noneOf=function(t){return J((function(e){return t.indexOf(e)<0})).desc("none of '"+t+"'")},i.notFollowedBy=q,i.of=Y,i.oneOf=function(t){for(var e=t.split(""),n=0;n<e.length;n++)e[n]="'"+e[n]+"'";return J((function(e){return t.indexOf(e)>=0})).desc(e)},i.optWhitespace=ot,i.Parser=i,i.range=function(t,e){return J((function(n){return t<=n&&n<=e})).desc(t+"-"+e)},i.regex=F,i.regexp=F,i.sepBy=U,i.sepBy1=z,i.seq=B,i.seqMap=R,i.seqObj=function(){for(var t,e={},n=0,r=(t=arguments,Array.prototype.slice.call(t)),o=r.length,a=0;a<o;a+=1){var s=r[a];if(!b(s)){if(E(s)&&2===s.length&&"string"==typeof s[0]&&b(s[1])){var c=s[0];if(Object.prototype.hasOwnProperty.call(e,c))throw new Error("seqObj: duplicate key "+c);e[c]=!0,n++;continue}throw new Error("seqObj arguments must be parsers or [string, parser] array pairs.")}}if(0===n)throw new Error("seqObj expects at least one named parser, found zero");return i((function(t,e){for(var n,i={},a=0;a<o;a+=1){var s,c;if(E(r[a])?(s=r[a][0],c=r[a][1]):(s=null,c=r[a]),!(n=x(c._(t,e),n)).status)return n;s&&(i[s]=n.value),e=n.index}return x(O(e,i),n)}))},i.string=V,i.succeed=Y,i.takeWhile=function(t){return A(t),i((function(e,n){for(var r=n;r<e.length&&t(C(e,r));)r++;return O(r,e.slice(n,r))}))},i.test=J,i.whitespace=at,i["fantasy-land/empty"]=W,i["fantasy-land/of"]=Y,i.Binary={bitSeq:h,bitSeqObj:function(t){f();var e={},n=0,r=c((function(t){if(E(t)){var r=t;if(2!==r.length)throw new Error("["+r.join(", ")+"] should be length 2, got length "+r.length);if(D(r[0]),_(r[1]),Object.prototype.hasOwnProperty.call(e,r[0]))throw new Error("duplicate key in bitSeqObj: "+r[0]);return e[r[0]]=!0,n++,r}return _(t),[null,t]}),t);if(n<1)throw new Error("bitSeqObj expects at least one named pair, got ["+t.join(", ")+"]");var i=c((function(t){return t[0]}),r);return h(c((function(t){return t[1]}),r)).map((function(t){return s((function(t,e){return null!==e[0]&&(t[e[0]]=e[1]),t}),{},c((function(e,n){return[e,t[n]]}),i))}))},byte:function(t){if(f(),_(t),t>255)throw new Error("Value specified to byte constructor ("+t+"=0x"+t.toString(16)+") is larger in value than a single byte.");var e=(t>15?"0x":"0x0")+t.toString(16);return i((function(n,r){var i=C(n,r);return i===t?O(r+1,i):j(r,e)}))},buffer:function(t){return d("buffer",t).map((function(t){return e.from(t)}))},encodedString:function(t,e){return d("string",e).map((function(e){return e.toString(t)}))},uintBE:y,uint8BE:y(1),uint16BE:y(2),uint32BE:y(4),uintLE:v,uint8LE:v(1),uint16LE:v(2),uint32LE:v(4),intBE:g,int8BE:g(1),int16BE:g(2),int32BE:g(4),intLE:m,int8LE:m(1),int16LE:m(2),int32LE:m(4),floatBE:d("floatBE",4).map((function(t){return t.readFloatBE(0)})),floatLE:d("floatLE",4).map((function(t){return t.readFloatLE(0)})),doubleBE:d("doubleBE",8).map((function(t){return t.readDoubleBE(0)})),doubleLE:d("doubleLE",8).map((function(t){return t.readDoubleLE(0)}))},t.exports=i}])}).call(this,n(21).Buffer)},function(t,e,n){"use strict";n.d(e,"a",(function(){return b})),n.d(e,"b",(function(){return m})),n.d(e,"c",(function(){return y})),n.d(e,"d",(function(){return E})),n.d(e,"e",(function(){return w})),n.d(e,"f",(function(){return O})),n.d(e,"g",(function(){return u})),n.d(e,"h",(function(){return c})),n.d(e,"i",(function(){return d})),n.d(e,"j",(function(){return j})),n.d(e,"k",(function(){return p})),n.d(e,"l",(function(){return v})),n.d(e,"m",(function(){return g})),n.d(e,"n",(function(){return l})),n.d(e,"o",(function(){return f})),n.d(e,"p",(function(){return h}));var r=n(1),i=n(6),o=n(0),a=n(3),s=n(2),c=Object(o.z)({type:s.f});function u(t,e){return e&&e[t]||void 0}function l(t,e){var n;if(Object(o.j)(t)||"number"==typeof t){var i=u(t,e);n=Object(o.f)(i)?{type:t,exec:i}:i||{type:t,exec:void 0}}else if(Object(o.f)(t))n={type:t.name||t.toString(),exec:t};else{i=u(t.type,e);if(Object(o.f)(i))n=Object(r.a)(Object(r.a)({},t),{exec:i});else if(i){var a=t.type,s=Object(r.c)(t,["type"]);n=Object(r.a)(Object(r.a)({type:a},i),s)}else n=t}return Object.defineProperty(n,"toString",{value:function(){return n.type},enumerable:!1,configurable:!0}),n}var f=function(t,e){return t?(Object(o.d)(t)?t:[t]).map((function(t){return l(t,e)})):[]};function h(t){var e=l(t);return Object(r.a)(Object(r.a)({id:Object(o.j)(t)?t:e.id},e),{type:e.type})}function d(t){return Object(o.j)(t)?{type:s.k,event:t}:p(t,{to:a.b.Internal})}function p(t,e){return{to:e?e.to:void 0,type:s.l,event:Object(o.f)(t)?t:Object(o.x)(t),delay:e?e.delay:void 0,id:e&&void 0!==e.id?e.id:Object(o.f)(t)?t.name:Object(o.c)(t)}}var y=function(t){return{type:s.b,sendId:t}};function v(t){var e=h(t);return{type:a.a.Start,activity:e,exec:void 0}}function g(t){var e=h(t);return{type:a.a.Stop,activity:e,exec:void 0}}var m=function(t){return{type:s.a,assignment:t}};function b(t,e){var n=e?"#"+e:"";return a.a.After+"("+t+")"+n}function E(t,e){var n=a.a.DoneState+"."+t,r={type:n,data:e,toString:function(){return n}};return r}function w(t,e){var n=a.a.DoneInvoke+"."+t,r={type:n,data:e,toString:function(){return n}};return r}function O(t,e){var n=a.a.ErrorPlatform+"."+t,r={type:n,data:e,toString:function(){return n}};return r}function j(t,e,n,a,c){var u=Object(r.b)(Object(o.r)(c,(function(t){return t.type===s.a})),2),h=u[0],d=u[1],p=h.length?Object(o.F)(n,a,h,e):n;return[Object(o.b)(d.map((function(n){var c,u;switch(n.type){case s.k:return u=n,{type:s.k,_event:Object(o.z)(u.event)};case s.l:var h=function(t,e,n,i){var a,s={_event:n},c=Object(o.z)(Object(o.f)(t.event)?t.event(e,n.data,s):t.event);if(Object(o.j)(t.delay)){var u=i&&i[t.delay];a=Object(o.f)(u)?u(e,n.data,s):u}else a=Object(o.f)(t.delay)?t.delay(e,n.data,s):t.delay;var l=Object(o.f)(t.to)?t.to(e,n.data,s):t.to;return Object(r.a)(Object(r.a)({},t),{to:l,_event:c,event:c.data,delay:a})}(n,p,a,t.options.delays);return i.a||Object(o.H)(!Object(o.j)(n.delay)||"number"==typeof h.delay,"No delay reference for delay expression '"+n.delay+"' was found on machine '"+t.id+"'"),h;case s.h:return function(t,e,n){return Object(r.a)(Object(r.a)({},t),{value:Object(o.j)(t.expr)?t.expr:t.expr(e,n.data,{_event:n})})}(n,p,a);case s.c:if(!(y=null===(c=n.conds.find((function(n){var r=Object(o.y)(n.cond,t.options.guards);return!r||Object(o.a)(t,r,p,a,e)})))||void 0===c?void 0:c.actions))return[];var d=j(t,e,p,a,f(Object(o.w)(y),t.options.actions));return p=d[1],d[0];case s.j:var y;if(!(y=n.get(p,a.data)))return[];d=j(t,e,p,a,f(Object(o.w)(y),t.options.actions));return p=d[1],d[0];default:return l(n,t.options.actions)}}))),p]}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=!0},function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return l})),n.d(e,"e",(function(){return f})),n.d(e,"f",(function(){return d})),n.d(e,"g",(function(){return o})),n.d(e,"h",(function(){return h}));var r=n(1),i=n(0),o=function(t){return"atomic"===t.type||"final"===t.type};function a(t){return Object(i.k)(t.states).map((function(e){return t.states[e]}))}function s(t){var e=[t];return o(t)?e:e.concat(Object(i.b)(a(t).map(s)))}function c(t,e){var n,i,o,s,c,l,f,h,d=u(new Set(t)),p=new Set(e);try{for(var y=Object(r.e)(p),v=y.next();!v.done;v=y.next())for(var g=(I=v.value).parent;g&&!p.has(g);)p.add(g),g=g.parent}catch(t){n={error:t}}finally{try{v&&!v.done&&(i=y.return)&&i.call(y)}finally{if(n)throw n.error}}var m=u(p);try{for(var b=Object(r.e)(p),E=b.next();!E.done;E=b.next()){if("compound"!==(I=E.value).type||m.get(I)&&m.get(I).length){if("parallel"===I.type)try{for(var w=(c=void 0,Object(r.e)(a(I))),O=w.next();!O.done;O=w.next()){var j=O.value;"history"!==j.type&&(p.has(j)||(p.add(j),d.get(j)?d.get(j).forEach((function(t){return p.add(t)})):j.initialStateNodes.forEach((function(t){return p.add(t)}))))}}catch(t){c={error:t}}finally{try{O&&!O.done&&(l=w.return)&&l.call(w)}finally{if(c)throw c.error}}}else d.get(I)?d.get(I).forEach((function(t){return p.add(t)})):I.initialStateNodes.forEach((function(t){return p.add(t)}))}}catch(t){o={error:t}}finally{try{E&&!E.done&&(s=b.return)&&s.call(b)}finally{if(o)throw o.error}}try{for(var x=Object(r.e)(p),S=x.next();!S.done;S=x.next()){var I;for(g=(I=S.value).parent;g&&!p.has(g);)p.add(g),g=g.parent}}catch(t){f={error:t}}finally{try{S&&!S.done&&(h=x.return)&&h.call(x)}finally{if(f)throw f.error}}return p}function u(t){var e,n,i=new Map;try{for(var o=Object(r.e)(t),a=o.next();!a.done;a=o.next()){var s=a.value;i.has(s)||i.set(s,[]),s.parent&&(i.has(s.parent)||i.set(s.parent,[]),i.get(s.parent).push(s))}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i}function l(t,e){return function t(e,n){var r=n.get(e);if(!r)return{};if("compound"===e.type){var i=r[0];if(!i)return{};if(o(i))return i.key}var a={};return r.forEach((function(e){a[e.key]=t(e,n)})),a}(t,u(c([t],e)))}function f(t,e){return Array.isArray(t)?t.some((function(t){return t===e})):t instanceof Set&&t.has(e)}function h(t){return Object(i.b)(Object(r.d)(new Set(t.map((function(t){return t.ownEvents})))))}function d(t,e){return"compound"===e.type?a(e).some((function(e){return"final"===e.type&&f(t,e)})):"parallel"===e.type&&a(e).every((function(e){return d(t,e)}))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return u})),n.d(e,"d",(function(){return c}));var r=n(1),i=n(9),o=n(0),a=n(7),s=n(5);function c(t,e){if(t===e)return!0;if(void 0===t||void 0===e)return!1;if(Object(o.j)(t)||Object(o.j)(e))return t===e;var n=Object(o.k)(t),r=Object(o.k)(e);return n.length===r.length&&n.every((function(n){return c(t[n],e[n])}))}function u(t){return!Object(o.j)(t)&&("value"in t&&"history"in t)}function l(t,e){var n=t.exec;return Object(r.a)(Object(r.a)({},t),{exec:void 0!==n?function(){return n(e.context,e.event,{action:t,state:e,_event:e._event})}:void 0})}var f=function(){function t(t){var e=this;this.actions=[],this.activities=i.b,this.meta={},this.events=[],this.value=t.value,this.context=t.context,this._event=t._event,this._sessionid=t._sessionid,this.event=this._event.data,this.historyValue=t.historyValue,this.history=t.history,this.actions=t.actions||[],this.activities=t.activities||i.b,this.meta=t.meta||{},this.events=t.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=t.configuration,this.transitions=t.transitions,this.children=t.children,this.done=!!t.done,Object.defineProperty(this,"nextEvents",{get:function(){return Object(a.h)(e.configuration)}})}return t.from=function(e,n){return e instanceof t?e.context!==n?new t({value:e.value,context:n,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):e:new t({value:e,context:n,_event:s.h,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},t.create=function(e){return new t(e)},t.inert=function(e,n){if(e instanceof t){if(!e.actions.length)return e;var r=s.h;return new t({value:e.value,context:n,_event:r,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}})}return t.from(e,n)},t.prototype.toStrings=function(t,e){var n=this;if(void 0===t&&(t=this.value),void 0===e&&(e="."),Object(o.j)(t))return[t];var i=Object(o.k)(t);return i.concat.apply(i,Object(r.d)(i.map((function(r){return n.toStrings(t[r],e).map((function(t){return r+e+t}))}))))},t.prototype.toJSON=function(){this.configuration,this.transitions;return Object(r.c)(this,["configuration","transitions"])},t.prototype.matches=function(t){return Object(o.o)(t,this.value)},t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"d",(function(){return a}));var r=".",i={},o="xstate.guard",a=""},function(t,e,n){"use strict";function r(t){var e,n={id:e=t.id,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},toJSON:function(){return{id:e}}};return n.meta=t,n}function i(t){try{return"function"==typeof t.send}catch(t){return!1}}n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return i}))},function(t,e,n){"use strict";t.exports=c,c.Item=l;var r=c.prototype,i=l.prototype,o=f.prototype,a="undefined"==typeof Symbol?void 0:Symbol.iterator;r.tail=r.head=null,c.of=function(){return u(new this,arguments)},c.from=function(t){return u(new this,t)},r.toArray=function(){var t=this.head,e=[];for(;t;)e.push(t),t=t.next;return e},r.prepend=function(t){var e=this.head;if(!t)return!1;if(!t.append||!t.prepend||!t.detach)throw new Error(s+"#prepend`.");if(e)return e.prepend(t);return t.detach(),t.list=this,this.head=t,this.size++,t},r.append=function(t){if(!t)return!1;if(!t.append||!t.prepend||!t.detach)throw new Error(s+"#append`.");var e=this.head,n=this.tail;if(n)return n.append(t);if(e)return e.append(t);return t.detach(),t.list=this,this.head=t,this.size++,t},void 0!==a&&(r[a]=function(){return new f(this.head)}),i.next=i.prev=i.list=null,i.prepend=function(t){if(!(t&&t.append&&t.prepend&&t.detach))throw new Error(s+"Item#prepend`.");var e=this.list,n=this.prev;if(!e)return!1;t.detach(),n&&(t.prev=n,n.next=t);t.next=this,t.list=e,this.prev=t,this===e.head&&(e.head=t);e.tail||(e.tail=this);return e.size++,t},i.append=function(t){if(!(t&&t.append&&t.prepend&&t.detach))throw new Error(s+"Item#append`.");var e=this.list,n=this.next;if(!e)return!1;t.detach(),n&&(t.next=n,n.prev=t);t.prev=this,t.list=e,this.next=t,this!==e.tail&&e.tail||(e.tail=t);return e.size++,t},i.detach=function(){var t=this.list,e=this.prev,n=this.next;if(!t)return this;t.tail===this&&(t.tail=e);t.head===this&&(t.head=n);t.tail===t.head&&(t.tail=null);e&&(e.next=n);n&&(n.prev=e);return this.prev=this.next=this.list=null,t.size--,this},o.next=function(){var t=this.item;return this.value=t,this.done=!t,this.item=t?t.next:void 0,this};var s="An argument without append, prepend, or detach methods was given to `List";function c(){this.size=0,0!==arguments.length&&u(this,arguments)}function u(t,e){var n,r,i,o;if(!e)return t;if(void 0!==a&&e[a])for(o=e[a](),i={};!i.done;)i=o.next(),t.append(i&&i.value);else for(n=e.length,r=-1;++r<n;)t.append(e[r]);return t}function l(){}function f(t){this.item=t}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=new Map,i=0,o={bookId:function(){return"x:"+i++},register:function(t,e){return r.set(t,e),t},get:function(t){return r.get(t)},free:function(t){r.delete(t)}}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(1),i={deferEvents:!1},o=function(){function t(t){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=Object(r.a)(Object(r.a)({},i),t)}return t.prototype.initialize=function(t){if(this.initialized=!0,t){if(!this.options.deferEvents)return void this.schedule(t);this.process(t)}this.flushEvents()},t.prototype.schedule=function(t){if(this.initialized&&!this.processingEvent){if(0!==this.queue.length)throw new Error("Event queue should be empty when it is not processing events");this.process(t),this.flushEvents()}else this.queue.push(t)},t.prototype.clear=function(){this.queue=[]},t.prototype.flushEvents=function(){for(var t=this.queue.shift();t;)this.process(t),t=this.queue.shift()},t.prototype.process=function(t){this.processingEvent=!0;try{t()}catch(t){throw this.clear(),t}finally{this.processingEvent=!1}},t}()},,function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(6);function i(t){if(!r.a&&"undefined"!=typeof window){var e=function(){var t=window;if(t.__xstate__)return t.__xstate__}();e&&e.register(t)}}},function(t,e,n){t.exports=n(29)},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(22),i=n(23),o=n(24);function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=c.prototype:(null===t&&(t=new c(e)),t.length=e),t}function c(t,e,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return u(this,t,e,n)}function u(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);c.TYPED_ARRAY_SUPPORT?(t=e).__proto__=c.prototype:t=h(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n),i=(t=s(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(c.isBuffer(e)){var n=0|d(e.length);return 0===(t=s(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?s(t,0):h(t,e);if("Buffer"===e.type&&o(e.data))return h(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(l(e),t=s(t,e<0?0:0|d(e)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function h(t,e){var n=e.length<0?0:0|d(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function d(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function p(t,e){if(c.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(t).length;default:if(r)return U(t).length;e=(""+e).toLowerCase(),r=!0}}function y(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return A(this,e,n);case"utf8":case"utf-8":return I(this,e,n);case"ascii":return C(this,e,n);case"latin1":case"binary":return _(this,e,n);case"base64":return S(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function v(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function g(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=c.from(e,r)),c.isBuffer(e))return 0===e.length?-1:m(t,e,n,r,i);if("number"==typeof e)return e&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):m(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(t,e,n,r,i){var o,a=1,s=t.length,c=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,c/=2,n/=2}function u(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var l=-1;for(o=n;o<s;o++)if(u(t,o)===u(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===c)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+c>s&&(n=s-c),o=n;o>=0;o--){for(var f=!0,h=0;h<c;h++)if(u(t,o+h)!==u(e,h)){f=!1;break}if(f)return o}return-1}function b(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function E(t,e,n,r){return V(U(e,t.length-n),t,n,r)}function w(t,e,n,r){return V(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function O(t,e,n,r){return w(t,e,n,r)}function j(t,e,n,r){return V(z(e),t,n,r)}function x(t,e,n,r){return V(function(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function I(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,s,c,u=t[i],l=null,f=u>239?4:u>223?3:u>191?2:1;if(i+f<=n)switch(f){case 1:u<128&&(l=u);break;case 2:128==(192&(o=t[i+1]))&&(c=(31&u)<<6|63&o)>127&&(l=c);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(c=(15&u)<<12|(63&o)<<6|63&a)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(c=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(l=c)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=f}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}e.Buffer=c,e.SlowBuffer=function(t){+t!=t&&(t=0);return c.alloc(+t)},e.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t},c.from=function(t,e,n){return u(null,t,e,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,e,n){return function(t,e,n,r){return l(e),e<=0?s(t,e):void 0!==n?"string"==typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},c.allocUnsafe=function(t){return f(null,t)},c.allocUnsafeSlow=function(t){return f(null,t)},c.isBuffer=function(t){return!(null==t||!t._isBuffer)},c.compare=function(t,e){if(!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=c.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},c.byteLength=p,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?I(this,0,t):y.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,e,n,r,i){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(o,a),u=this.slice(r,i),l=t.slice(e,n),f=0;f<s;++f)if(u[f]!==l[f]){o=u[f],a=l[f];break}return o<a?-1:a<o?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return g(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return g(this,t,e,n,!1)},c.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return E(this,t,e,n);case"ascii":return w(this,t,e,n);case"latin1":case"binary":return O(this,t,e,n);case"base64":return j(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function C(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function _(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function A(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=M(t[o]);return i}function D(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function $(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function T(t,e,n,r,i,o){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function k(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function N(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function P(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(t,e,n,r,o){return o||P(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function B(t,e,n,r,o){return o||P(t,0,n,8),i.write(t,e,n,r,52,8),n+8}c.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=c.prototype;else{var i=e-t;n=new c(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},c.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||$(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},c.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||$(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},c.prototype.readUInt8=function(t,e){return e||$(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return e||$(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return e||$(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return e||$(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return e||$(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||$(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},c.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||$(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},c.prototype.readInt8=function(t,e){return e||$(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){e||$(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){e||$(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return e||$(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return e||$(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return e||$(t,4,this.length),i.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return e||$(t,4,this.length),i.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return e||$(t,8,this.length),i.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return e||$(t,8,this.length),i.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||T(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},c.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||T(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},c.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):k(this,t,e,!0),e+2},c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):k(this,t,e,!1),e+2},c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):N(this,t,e,!0),e+4},c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):N(this,t,e,!1),e+4},c.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);T(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},c.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);T(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):k(this,t,e,!0),e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):k(this,t,e,!1),e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):N(this,t,e,!0),e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||T(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):N(this,t,e,!1),e+4},c.prototype.writeFloatLE=function(t,e,n){return L(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return L(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return B(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return B(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},c.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=c.isBuffer(t)?t:U(new c(t,r).toString()),s=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var R=/[^+\/0-9A-Za-z-_]/g;function M(t){return t<16?"0"+t.toString(16):t.toString(16)}function U(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function z(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(R,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function V(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(16))},function(t,e,n){"use strict";e.byteLength=function(t){var e=u(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=u(t),a=r[0],s=r[1],c=new o(function(t,e,n){return 3*(e+n)/4-n}(0,a,s)),l=0,f=s>0?a-4:a;for(n=0;n<f;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],c[l++]=e>>16&255,c[l++]=e>>8&255,c[l++]=255&e;2===s&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,c[l++]=255&e);1===s&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,c[l++]=e>>8&255,c[l++]=255&e);return c},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(l(t,a,a+16383>s?s:a+16383));1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,n){for(var i,o,a=[],s=e;s<n;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,c=(1<<s)-1,u=c>>1,l=-7,f=n?i-1:0,h=n?-1:1,d=t[e+f];for(f+=h,o=d&(1<<-l)-1,d>>=-l,l+=s;l>0;o=256*o+t[e+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+t[e+f],f+=h,l-=8);if(0===o)o=1-u;else{if(o===c)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=u}return(d?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,c,u=8*o-i-1,l=(1<<u)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),(e+=a+f>=1?h/c:h*Math.pow(2,1-f))*c>=2&&(a++,c/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(e*c-1)*Math.pow(2,i),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;t[n+d]=255&a,d+=p,a/=256,u-=8);t[n+d-p]|=128*y}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";function r(){}n.r(e);function i(t,e){for(const n in e)t[n]=e[n];return t}function o(t){return t()}function a(){return Object.create(null)}function s(t){t.forEach(o)}function c(t){return"function"==typeof t}function u(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(t,...e){if(null==t)return r;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function f(t,e,n,r){if(t){const i=h(t,e,n,r);return t[0](i)}}function h(t,e,n,r){return t[1]&&r?i(n.ctx.slice(),t[1](r(e))):n.ctx}function d(t,e,n,r,i,o,a){const s=function(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|i[r];return t}return e.dirty|i}return e.dirty}(e,r,i,o);if(s){const i=h(e,n,r,a);t.p(i,s)}}new Set;function p(t,e){t.appendChild(e)}function y(t,e,n){t.insertBefore(e,n||null)}function v(t){t.parentNode.removeChild(t)}function g(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function m(t){return document.createElement(t)}function b(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function E(t){return document.createTextNode(t)}function w(){return E(" ")}function O(){return E("")}function j(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function x(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function S(t,e){for(const n in e)x(t,n,e[n])}function I(t,e){e=""+e,t.data!==e&&(t.data=e)}function C(t,e){t.value=null==e?"":e}function _(t,e,n){t.classList[n?"add":"remove"](e)}new Set;let A;function D(t){A=t}function $(){if(!A)throw new Error("Function called outside component initialization");return A}function T(t){$().$$.after_update.push(t)}const k=[],N=[],P=[],L=[],B=Promise.resolve();let R=!1;function M(){R||(R=!0,B.then(F))}function U(t){P.push(t)}let z=!1;const V=new Set;function F(){if(!z){z=!0;do{for(let t=0;t<k.length;t+=1){const e=k[t];D(e),Y(e.$$)}for(k.length=0;N.length;)N.pop()();for(let t=0;t<P.length;t+=1){const e=P[t];V.has(e)||(V.add(e),e())}P.length=0}while(k.length);for(;L.length;)L.pop()();R=!1,z=!1,V.clear()}}function Y(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(U)}}const G=new Set;let H;function q(){H={r:0,c:[],p:H}}function J(){H.r||s(H.c),H=H.p}function X(t,e){t&&t.i&&(G.delete(t),t.i(e))}function W(t,e,n,r){if(t&&t.o){if(G.has(t))return;G.add(t),H.c.push(()=>{G.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function K(t,e){const n={},r={},i={$$scope:1};let o=t.length;for(;o--;){const a=t[o],s=e[o];if(s){for(const t in a)t in s||(r[t]=1);for(const t in s)i[t]||(n[t]=s[t],i[t]=1);t[o]=s}else for(const t in a)i[t]=1}for(const t in r)t in n||(n[t]=void 0);return n}new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]);let Z;function Q(t){t&&t.c()}function tt(t,e,n){const{fragment:r,on_mount:i,on_destroy:a,after_update:u}=t.$$;r&&r.m(e,n),U(()=>{const e=i.map(o).filter(c);a?a.push(...e):s(e),t.$$.on_mount=[]}),u.forEach(U)}function et(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function nt(t,e,n,i,o,c,u=[-1]){const l=A;D(t);const f=e.props||{},h=t.$$={fragment:null,ctx:null,props:c,update:r,not_equal:o,bound:a(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:a(),dirty:u};let d=!1;if(h.ctx=n?n(t,f,(e,n,...r)=>{const i=r.length?r[0]:n;return h.ctx&&o(h.ctx[e],h.ctx[e]=i)&&(h.bound[e]&&h.bound[e](i),d&&function(t,e){-1===t.$$.dirty[0]&&(k.push(t),M(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(t,e)),n}):[],h.update(),d=!0,s(h.before_update),h.fragment=!!i&&i(h.ctx),e.target){if(e.hydrate){const t=(p=e.target,Array.from(p.childNodes));h.fragment&&h.fragment.l(t),t.forEach(v)}else h.fragment&&h.fragment.c();e.intro&&X(t.$$.fragment),tt(t,e.target,e.anchor),F()}var p;D(l)}"function"==typeof HTMLElement&&(Z=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}$destroy(){et(this,1),this.$destroy=r}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}});class rt{$destroy(){et(this,1),this.$destroy=r}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function it(){return(it=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function ot(t){return"/"===t.charAt(0)}function at(t,e){for(var n=e,r=n+1,i=t.length;r<i;n+=1,r+=1)t[n]=t[r];t.pop()}var st=function(t,e){void 0===e&&(e="");var n,r=t&&t.split("/")||[],i=e&&e.split("/")||[],o=t&&ot(t),a=e&&ot(e),s=o||a;if(t&&ot(t)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var c=i[i.length-1];n="."===c||".."===c||""===c}else n=!1;for(var u=0,l=i.length;l>=0;l--){var f=i[l];"."===f?at(i,l):".."===f?(at(i,l),u++):u&&(at(i,l),u--)}if(!s)for(;u--;u)i.unshift("..");!s||""===i[0]||i[0]&&ot(i[0])||i.unshift("");var h=i.join("/");return n&&"/"!==h.substr(-1)&&(h+="/"),h};var ct=function(t,e){if(!t)throw new Error("Invariant failed")};function ut(t){return"/"===t.charAt(0)?t:"/"+t}function lt(t){return"/"===t.charAt(0)?t.substr(1):t}function ft(t,e){return function(t,e){return 0===t.toLowerCase().indexOf(e.toLowerCase())&&-1!=="/?#".indexOf(t.charAt(e.length))}(t,e)?t.substr(e.length):t}function ht(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t}function dt(t){var e=t.pathname,n=t.search,r=t.hash,i=e||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function pt(t,e,n,r){var i;"string"==typeof t?(i=function(t){var e=t||"/",n="",r="",i=e.indexOf("#");-1!==i&&(r=e.substr(i),e=e.substr(0,i));var o=e.indexOf("?");return-1!==o&&(n=e.substr(o),e=e.substr(0,o)),{pathname:e,search:"?"===n?"":n,hash:"#"===r?"":r}}(t)).state=e:(void 0===(i=it({},t)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==e&&void 0===i.state&&(i.state=e));try{i.pathname=decodeURI(i.pathname)}catch(t){throw t instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):t}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=st(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function yt(){var t=null;var e=[];return{setPrompt:function(e){return t=e,function(){t===e&&(t=null)}},confirmTransitionTo:function(e,n,r,i){if(null!=t){var o="function"==typeof t?t(e,n):t;"string"==typeof o?"function"==typeof r?r(o,i):i(!0):i(!1!==o)}else i(!0)},appendListener:function(t){var n=!0;function r(){n&&t.apply(void 0,arguments)}return e.push(r),function(){n=!1,e=e.filter((function(t){return t!==r}))}},notifyListeners:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.forEach((function(t){return t.apply(void 0,n)}))}}}var vt=!("undefined"==typeof window||!window.document||!window.document.createElement);function gt(t,e){e(window.confirm(t))}var mt={hashbang:{encodePath:function(t){return"!"===t.charAt(0)?t:"!/"+lt(t)},decodePath:function(t){return"!"===t.charAt(0)?t.substr(1):t}},noslash:{encodePath:lt,decodePath:ut},slash:{encodePath:ut,decodePath:ut}};function bt(t){var e=t.indexOf("#");return-1===e?t:t.slice(0,e)}function Et(){var t=window.location.href,e=t.indexOf("#");return-1===e?"":t.substring(e+1)}function wt(t){window.location.replace(bt(window.location.href)+"#"+t)}function Ot(t){void 0===t&&(t={}),vt||ct(!1);var e=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),t),r=n.getUserConfirmation,i=void 0===r?gt:r,o=n.hashType,a=void 0===o?"slash":o,s=t.basename?ht(ut(t.basename)):"",c=mt[a],u=c.encodePath,l=c.decodePath;function f(){var t=l(Et());return s&&(t=ft(t,s)),pt(t)}var h=yt();function d(t){it(S,t),S.length=e.length,h.notifyListeners(S.location,S.action)}var p=!1,y=null;function v(){var t,e,n=Et(),r=u(n);if(n!==r)wt(r);else{var o=f(),a=S.location;if(!p&&(e=o,(t=a).pathname===e.pathname&&t.search===e.search&&t.hash===e.hash))return;if(y===dt(o))return;y=null,function(t){if(p)p=!1,d();else{h.confirmTransitionTo(t,"POP",i,(function(e){e?d({action:"POP",location:t}):function(t){var e=S.location,n=E.lastIndexOf(dt(e));-1===n&&(n=0);var r=E.lastIndexOf(dt(t));-1===r&&(r=0);var i=n-r;i&&(p=!0,w(i))}(t)}))}}(o)}}var g=Et(),m=u(g);g!==m&&wt(m);var b=f(),E=[dt(b)];function w(t){e.go(t)}var O=0;function j(t){1===(O+=t)&&1===t?window.addEventListener("hashchange",v):0===O&&window.removeEventListener("hashchange",v)}var x=!1;var S={length:e.length,action:"POP",location:b,createHref:function(t){var e=document.querySelector("base"),n="";return e&&e.getAttribute("href")&&(n=bt(window.location.href)),n+"#"+u(s+dt(t))},push:function(t,e){var n=pt(t,void 0,void 0,S.location);h.confirmTransitionTo(n,"PUSH",i,(function(t){if(t){var e=dt(n),r=u(s+e);if(Et()!==r){y=e,function(t){window.location.hash=t}(r);var i=E.lastIndexOf(dt(S.location)),o=E.slice(0,i+1);o.push(e),E=o,d({action:"PUSH",location:n})}else d()}}))},replace:function(t,e){var n=pt(t,void 0,void 0,S.location);h.confirmTransitionTo(n,"REPLACE",i,(function(t){if(t){var e=dt(n),r=u(s+e);Et()!==r&&(y=e,wt(r));var i=E.indexOf(dt(S.location));-1!==i&&(E[i]=e),d({action:"REPLACE",location:n})}}))},go:w,goBack:function(){w(-1)},goForward:function(){w(1)},block:function(t){void 0===t&&(t=!1);var e=h.setPrompt(t);return x||(j(1),x=!0),function(){return x&&(x=!1,j(-1)),e()}},listen:function(t){var e=h.appendListener(t);return j(1),function(){j(-1),e()}}};return S}var jt=n(5);function xt(t){let e,n=[{key:"path-"+t[0]},t[1]],o={};for(let t=0;t<n.length;t+=1)o=i(o,n[t]);return{c(){e=b("path"),S(e,o)},m(t,n){y(t,e,n)},p(t,[r]){S(e,o=K(n,[1&r&&{key:"path-"+t[0]},2&r&&t[1]]))},i:r,o:r,d(t){t&&v(e)}}}function St(t,e,n){let{id:r=""}=e,{data:i={}}=e;return t.$set=t=>{"id"in t&&n(0,r=t.id),"data"in t&&n(1,i=t.data)},[r,i]}var It=class extends rt{constructor(t){super(),nt(this,t,St,xt,u,{id:0,data:1})}};function Ct(t){let e,n=[{key:"polygon-"+t[0]},t[1]],o={};for(let t=0;t<n.length;t+=1)o=i(o,n[t]);return{c(){e=b("polygon"),S(e,o)},m(t,n){y(t,e,n)},p(t,[r]){S(e,o=K(n,[1&r&&{key:"polygon-"+t[0]},2&r&&t[1]]))},i:r,o:r,d(t){t&&v(e)}}}function _t(t,e,n){let{id:r=""}=e,{data:i={}}=e;return t.$set=t=>{"id"in t&&n(0,r=t.id),"data"in t&&n(1,i=t.data)},[r,i]}var At=class extends rt{constructor(t){super(),nt(this,t,_t,Ct,u,{id:0,data:1})}};function Dt(t){let e;return{c(){e=b("g")},m(n,r){y(n,e,r),e.innerHTML=t[0]},p(t,[n]){1&n&&(e.innerHTML=t[0])},i:r,o:r,d(t){t&&v(e)}}}function $t(t,e,n){let r,i=870711;let{data:o}=e;function a(t){if(!t||!t.raw)return null;let e=t.raw;const n={};return e=e.replace(/\s(?:xml:)?id=["']?([^"')\s]+)/g,(t,e)=>{const r=(i+=1,"fa-"+i.toString(16));return n[e]=r,` id="${r}"`}),e=e.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,(t,e,r,i)=>{const o=e||i;return o&&n[o]?"#"+n[o]:t}),e}return t.$set=t=>{"data"in t&&n(1,o=t.data)},t.$$.update=()=>{2&t.$$.dirty&&n(0,r=a(o))},[r,o]}var Tt=class extends rt{constructor(t){super(),nt(this,t,$t,Dt,u,{data:1})}};n(19);function kt(t){let e,n,r,i;const o=t[13].default,a=f(o,t,t[12],null);return{c(){e=b("svg"),a&&a.c(),x(e,"x",t[8]),x(e,"version","1.1"),x(e,"class",n="fa-icon "+t[0]+" svelte-1dof0an"),x(e,"y",t[9]),x(e,"width",t[1]),x(e,"height",t[2]),x(e,"aria-label",t[11]),x(e,"role",r=t[11]?"img":"presentation"),x(e,"viewBox",t[3]),x(e,"style",t[10]),_(e,"fa-spin",t[4]),_(e,"fa-pulse",t[6]),_(e,"fa-inverse",t[5]),_(e,"fa-flip-horizontal","horizontal"===t[7]),_(e,"fa-flip-vertical","vertical"===t[7])},m(t,n){y(t,e,n),a&&a.m(e,null),i=!0},p(t,[s]){a&&a.p&&4096&s&&d(a,o,t,t[12],s,null,null),(!i||256&s)&&x(e,"x",t[8]),(!i||1&s&&n!==(n="fa-icon "+t[0]+" svelte-1dof0an"))&&x(e,"class",n),(!i||512&s)&&x(e,"y",t[9]),(!i||2&s)&&x(e,"width",t[1]),(!i||4&s)&&x(e,"height",t[2]),(!i||2048&s)&&x(e,"aria-label",t[11]),(!i||2048&s&&r!==(r=t[11]?"img":"presentation"))&&x(e,"role",r),(!i||8&s)&&x(e,"viewBox",t[3]),(!i||1024&s)&&x(e,"style",t[10]),17&s&&_(e,"fa-spin",t[4]),65&s&&_(e,"fa-pulse",t[6]),33&s&&_(e,"fa-inverse",t[5]),129&s&&_(e,"fa-flip-horizontal","horizontal"===t[7]),129&s&&_(e,"fa-flip-vertical","vertical"===t[7])},i(t){i||(X(a,t),i=!0)},o(t){W(a,t),i=!1},d(t){t&&v(e),a&&a.d(t)}}}function Nt(t,e,n){let{class:r}=e,{width:i}=e,{height:o}=e,{box:a}=e,{spin:s=!1}=e,{inverse:c=!1}=e,{pulse:u=!1}=e,{flip:l=null}=e,{x:f}=e,{y:h}=e,{style:d}=e,{label:p}=e,{$$slots:y={},$$scope:v}=e;return t.$set=t=>{"class"in t&&n(0,r=t.class),"width"in t&&n(1,i=t.width),"height"in t&&n(2,o=t.height),"box"in t&&n(3,a=t.box),"spin"in t&&n(4,s=t.spin),"inverse"in t&&n(5,c=t.inverse),"pulse"in t&&n(6,u=t.pulse),"flip"in t&&n(7,l=t.flip),"x"in t&&n(8,f=t.x),"y"in t&&n(9,h=t.y),"style"in t&&n(10,d=t.style),"label"in t&&n(11,p=t.label),"$$scope"in t&&n(12,v=t.$$scope)},[r,i,o,a,s,c,u,l,f,h,d,p,v,y]}var Pt=class extends rt{constructor(t){super(),nt(this,t,Nt,kt,u,{class:0,width:1,height:2,box:3,spin:4,inverse:5,pulse:6,flip:7,x:8,y:9,style:10,label:11})}};function Lt(t,e,n){const r=t.slice();return r[24]=e[n],r[26]=n,r}function Bt(t,e,n){const r=t.slice();return r[27]=e[n],r[26]=n,r}function Rt(t){let e,n,r,i,o=t[0].paths&&Mt(t),a=t[0].polygons&&zt(t),s=t[0].raw&&Ft(t);return{c(){o&&o.c(),e=w(),a&&a.c(),n=w(),s&&s.c(),r=O()},m(t,c){o&&o.m(t,c),y(t,e,c),a&&a.m(t,c),y(t,n,c),s&&s.m(t,c),y(t,r,c),i=!0},p(t,i){t[0].paths?o?(o.p(t,i),1&i&&X(o,1)):(o=Mt(t),o.c(),X(o,1),o.m(e.parentNode,e)):o&&(q(),W(o,1,1,()=>{o=null}),J()),t[0].polygons?a?(a.p(t,i),1&i&&X(a,1)):(a=zt(t),a.c(),X(a,1),a.m(n.parentNode,n)):a&&(q(),W(a,1,1,()=>{a=null}),J()),t[0].raw?s?(s.p(t,i),1&i&&X(s,1)):(s=Ft(t),s.c(),X(s,1),s.m(r.parentNode,r)):s&&(q(),W(s,1,1,()=>{s=null}),J())},i(t){i||(X(o),X(a),X(s),i=!0)},o(t){W(o),W(a),W(s),i=!1},d(t){o&&o.d(t),t&&v(e),a&&a.d(t),t&&v(n),s&&s.d(t),t&&v(r)}}}function Mt(t){let e,n,r=t[0].paths,i=[];for(let e=0;e<r.length;e+=1)i[e]=Ut(Bt(t,r,e));const o=t=>W(i[t],1,1,()=>{i[t]=null});return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=O()},m(t,r){for(let e=0;e<i.length;e+=1)i[e].m(t,r);y(t,e,r),n=!0},p(t,n){if(1&n){let a;for(r=t[0].paths,a=0;a<r.length;a+=1){const o=Bt(t,r,a);i[a]?(i[a].p(o,n),X(i[a],1)):(i[a]=Ut(o),i[a].c(),X(i[a],1),i[a].m(e.parentNode,e))}for(q(),a=r.length;a<i.length;a+=1)o(a);J()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)X(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)W(i[t]);n=!1},d(t){g(i,t),t&&v(e)}}}function Ut(t){let e;const n=new It({props:{id:t[26],data:t[27]}});return{c(){Q(n.$$.fragment)},m(t,r){tt(n,t,r),e=!0},p(t,e){const r={};1&e&&(r.data=t[27]),n.$set(r)},i(t){e||(X(n.$$.fragment,t),e=!0)},o(t){W(n.$$.fragment,t),e=!1},d(t){et(n,t)}}}function zt(t){let e,n,r=t[0].polygons,i=[];for(let e=0;e<r.length;e+=1)i[e]=Vt(Lt(t,r,e));const o=t=>W(i[t],1,1,()=>{i[t]=null});return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=O()},m(t,r){for(let e=0;e<i.length;e+=1)i[e].m(t,r);y(t,e,r),n=!0},p(t,n){if(1&n){let a;for(r=t[0].polygons,a=0;a<r.length;a+=1){const o=Lt(t,r,a);i[a]?(i[a].p(o,n),X(i[a],1)):(i[a]=Vt(o),i[a].c(),X(i[a],1),i[a].m(e.parentNode,e))}for(q(),a=r.length;a<i.length;a+=1)o(a);J()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)X(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)W(i[t]);n=!1},d(t){g(i,t),t&&v(e)}}}function Vt(t){let e;const n=new At({props:{id:t[26],data:t[24]}});return{c(){Q(n.$$.fragment)},m(t,r){tt(n,t,r),e=!0},p(t,e){const r={};1&e&&(r.data=t[24]),n.$set(r)},i(t){e||(X(n.$$.fragment,t),e=!0)},o(t){W(n.$$.fragment,t),e=!1},d(t){et(n,t)}}}function Ft(t){let e,n;function r(e){t[22].call(null,e)}let i={};void 0!==t[0]&&(i.data=t[0]);const o=new Tt({props:i});return N.push(()=>function(t,e,n){const r=t.$$.props[e];void 0!==r&&(t.$$.bound[r]=n,n(t.$$.ctx[r]))}(o,"data",r)),{c(){Q(o.$$.fragment)},m(t,e){tt(o,t,e),n=!0},p(t,n){const r={};var i;!e&&1&n&&(e=!0,r.data=t[0],i=()=>e=!1,L.push(i)),o.$set(r)},i(t){n||(X(o.$$.fragment,t),n=!0)},o(t){W(o.$$.fragment,t),n=!1},d(t){et(o,t)}}}function Yt(t){let e;const n=t[21].default,r=f(n,t,t[23],null),i=r||function(t){let e,n,r=t[0]&&Rt(t);return{c(){r&&r.c(),e=O()},m(t,i){r&&r.m(t,i),y(t,e,i),n=!0},p(t,n){t[0]?r?(r.p(t,n),1&n&&X(r,1)):(r=Rt(t),r.c(),X(r,1),r.m(e.parentNode,e)):r&&(q(),W(r,1,1,()=>{r=null}),J())},i(t){n||(X(r),n=!0)},o(t){W(r),n=!1},d(t){r&&r.d(t),t&&v(e)}}}(t);return{c(){i&&i.c()},m(t,n){i&&i.m(t,n),e=!0},p(t,e){r?r.p&&8388608&e&&d(r,n,t,t[23],e,null,null):i&&i.p&&1&e&&i.p(t,e)},i(t){e||(X(i,t),e=!0)},o(t){W(i,t),e=!1},d(t){i&&i.d(t)}}}function Gt(t){let e;const n=new Pt({props:{label:t[6],width:t[7],height:t[8],box:t[10],style:t[9],spin:t[2],flip:t[5],inverse:t[3],pulse:t[4],class:t[1],$$slots:{default:[Yt]},$$scope:{ctx:t}}});return{c(){Q(n.$$.fragment)},m(t,r){tt(n,t,r),e=!0},p(t,[e]){const r={};64&e&&(r.label=t[6]),128&e&&(r.width=t[7]),256&e&&(r.height=t[8]),1024&e&&(r.box=t[10]),512&e&&(r.style=t[9]),4&e&&(r.spin=t[2]),32&e&&(r.flip=t[5]),8&e&&(r.inverse=t[3]),16&e&&(r.pulse=t[4]),2&e&&(r.class=t[1]),8388609&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){e||(X(n.$$.fragment,t),e=!0)},o(t){W(n.$$.fragment,t),e=!1},d(t){et(n,t)}}}function Ht(t,e,n){let r,i,o,a,{class:s=""}=e,{data:c}=e,{scale:u=1}=e,{spin:l=!1}=e,{inverse:f=!1}=e,{pulse:h=!1}=e,{flip:d=null}=e,{label:p=null}=e,{self:y=null}=e,{style:v=null}=e;function g(){if(void 0===c)return;const t=function(t){if("iconName"in t&&"icon"in t){let e={},n=t.icon,r=t.iconName,i={width:n[0],height:n[1],paths:[{d:n[4]}]};return e[r]=i,e}return t}(c),[e]=Object.keys(t),r=t[e];r.paths||(r.paths=[]),r.d&&r.paths.push({d:r.d}),r.polygons||(r.polygons=[]),r.points&&r.polygons.push({points:r.points}),n(0,y=r)}function m(){let t=1;return void 0!==u&&(t=Number(u)),isNaN(t)||t<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.'),1):1*t}function b(){return y?`0 0 ${y.width} ${y.height}`:`0 0 ${r} ${i}`}function E(){return y?Math.max(y.width,y.height)/16:1}function w(){return y?y.width/E()*m():0}function O(){return y?y.height/E()*m():0}function j(){let t="";null!==v&&(t+=v);let e=m();return 1===e?t:(""===t||t.endsWith(";")||(t+="; "),`${t}font-size: ${e}em`)}let{$$slots:x={},$$scope:S}=e;return t.$set=t=>{"class"in t&&n(1,s=t.class),"data"in t&&n(11,c=t.data),"scale"in t&&n(12,u=t.scale),"spin"in t&&n(2,l=t.spin),"inverse"in t&&n(3,f=t.inverse),"pulse"in t&&n(4,h=t.pulse),"flip"in t&&n(5,d=t.flip),"label"in t&&n(6,p=t.label),"self"in t&&n(0,y=t.self),"style"in t&&n(13,v=t.style),"$$scope"in t&&n(23,S=t.$$scope)},t.$$.update=()=>{14336&t.$$.dirty&&(g(),n(7,r=w()),n(8,i=O()),n(9,o=j()),n(10,a=b()))},[y,s,l,f,h,d,p,r,i,o,a,c,u,v,g,m,b,E,w,O,j,x,function(t){y=t,n(0,y)},S]}var qt=class extends rt{constructor(t){super(),nt(this,t,Ht,Gt,u,{class:1,data:11,scale:12,spin:2,inverse:3,pulse:4,flip:5,label:6,self:0,style:13})}},Jt={prefix:"fas",iconName:"circle",icon:[512,512,[],"f111","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"]},Xt={prefix:"fas",iconName:"edit",icon:[576,512,[],"f044","M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"]},Wt={prefix:"fas",iconName:"hammer",icon:[576,512,[],"f6e3","M571.31 193.94l-22.63-22.63c-6.25-6.25-16.38-6.25-22.63 0l-11.31 11.31-28.9-28.9c5.63-21.31.36-44.9-16.35-61.61l-45.25-45.25c-62.48-62.48-163.79-62.48-226.28 0l90.51 45.25v18.75c0 16.97 6.74 33.25 18.75 45.25l49.14 49.14c16.71 16.71 40.3 21.98 61.61 16.35l28.9 28.9-11.31 11.31c-6.25 6.25-6.25 16.38 0 22.63l22.63 22.63c6.25 6.25 16.38 6.25 22.63 0l90.51-90.51c6.23-6.24 6.23-16.37-.02-22.62zm-286.72-15.2c-3.7-3.7-6.84-7.79-9.85-11.95L19.64 404.96c-25.57 23.88-26.26 64.19-1.53 88.93s65.05 24.05 88.93-1.53l238.13-255.07c-3.96-2.91-7.9-5.87-11.44-9.41l-49.14-49.14z"]},Kt={prefix:"fas",iconName:"plus",icon:[448,512,[],"f067","M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"]};n(20);function Zt(t){let e,n,i;return{c(){e=m("input"),x(e,"type","text"),x(e,"class","entry-input svelte-1kytzsf"),e.value=t[1],_(e,"highlighted",t[0]===t[2])},m(r,o){y(r,e,o),t[22](e),n||(i=[j(e,"input",(function(){c(t[5])&&t[5].apply(this,arguments)})),j(e,"click",t[23]),j(e,"keydown",t[6])],n=!0)},p(n,[r]){t=n,2&r&&e.value!==t[1]&&(e.value=t[1]),5&r&&_(e,"highlighted",t[0]===t[2])},i:r,o:r,d(r){r&&v(e),t[22](null),n=!1,s(i)}}}function Qt(t,e,n){let r,{entryId:i}=e,{entryValue:o}=e,{docCursorEntryId:a}=e,{docCursorColId:s}=e,{isEntryAbove:c}=e,{isEntryBelow:u}=e,{handleGoUp:l}=e,{handleGoDown:f}=e,{handleEntryBackspace:h}=e,{handleCollapseEntry:d}=e,{handleExpandEntry:p}=e,{handleSplitEntry:y}=e,{handleIndent:v}=e,{handleDedent:g}=e,{handleSaveCursorColId:m}=e,{handleSaveDocEntry:b}=e,{handleSaveFullCursor:E}=e;function w(t,e){let n=t;switch(event.key){case"ArrowLeft":n=Math.max(0,t-1);break;case"ArrowRight":n=Math.min(e,t+1);break;case"Home":n=0;break;case"End":n=e}m(n)}T(async()=>{let t=document.getElementById("node-name-input");document.activeElement!==t&&r&&(i===a&&document.activeElement!==r&&r.focus(),i===a&&r.setSelectionRange(s,s))});let O,j;return t.$set=t=>{"entryId"in t&&n(0,i=t.entryId),"entryValue"in t&&n(1,o=t.entryValue),"docCursorEntryId"in t&&n(2,a=t.docCursorEntryId),"docCursorColId"in t&&n(7,s=t.docCursorColId),"isEntryAbove"in t&&n(8,c=t.isEntryAbove),"isEntryBelow"in t&&n(9,u=t.isEntryBelow),"handleGoUp"in t&&n(10,l=t.handleGoUp),"handleGoDown"in t&&n(11,f=t.handleGoDown),"handleEntryBackspace"in t&&n(12,h=t.handleEntryBackspace),"handleCollapseEntry"in t&&n(13,d=t.handleCollapseEntry),"handleExpandEntry"in t&&n(14,p=t.handleExpandEntry),"handleSplitEntry"in t&&n(15,y=t.handleSplitEntry),"handleIndent"in t&&n(16,v=t.handleIndent),"handleDedent"in t&&n(17,g=t.handleDedent),"handleSaveCursorColId"in t&&n(18,m=t.handleSaveCursorColId),"handleSaveDocEntry"in t&&n(19,b=t.handleSaveDocEntry),"handleSaveFullCursor"in t&&n(20,E=t.handleSaveFullCursor)},t.$$.update=()=>{1048708&t.$$.dirty&&n(4,O=(t,e)=>{let n=e.target.selectionStart;a===t&&s==n||E(t,n)}),524288&t.$$.dirty&&n(5,j=t=>{let e=t.target.selectionStart,n=t.target.value;b(n,e)})},[i,o,a,r,O,j,async function(t){if("Tab"===t.key)return t.preventDefault(),void(t.shiftKey?g():v());if("ArrowUp"===t.key)t.preventDefault(),t.ctrlKey?d():c&&l();else if("ArrowDown"===t.key)t.preventDefault(),t.ctrlKey?p():u&&f();else if("Backspace"===t.key)t.preventDefault(),h();else if("Enter"===t.key)t.preventDefault(),y();else{if(!(["ArrowLeft","ArrowRight","Home","End"].indexOf(t.key)>-1))return;t.preventDefault(),w(this.selectionStart,this.value.length)}await(M(),B),this.selectionStart=s,this.selectionEnd=s},s,c,u,l,f,h,d,p,y,v,g,m,b,E,w,function(t){N[t?"unshift":"push"](()=>{n(3,r=t)})},t=>O(i,t)]}var te=class extends rt{constructor(t){super(),nt(this,t,Qt,Zt,u,{entryId:0,entryValue:1,docCursorEntryId:2,docCursorColId:7,isEntryAbove:8,isEntryBelow:9,handleGoUp:10,handleGoDown:11,handleEntryBackspace:12,handleCollapseEntry:13,handleExpandEntry:14,handleSplitEntry:15,handleIndent:16,handleDedent:17,handleSaveCursorColId:18,handleSaveDocEntry:19,handleSaveFullCursor:20})}},ee=n(4),ne=n.n(ee);function re(t){switch(t){case'"':return"&quot;";case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";default:return t}}const ie=ne.a.createLanguage({EscapedPunctuation:function(){return ne.a.string("\\").then(ne.a.regexp(/[!"#$%&'()*+,-./:;<=>?@[\\\]^_`{|}~]/).map(t=>re(t)))},Char:function(){return ne.a.any.map(t=>re(t))},CharInsideStrong:function(t){return ne.a.notFollowedBy(t.StrongDelimiter).then(t.Char)},CharInsideEmphasis:function(t){return ne.a.notFollowedBy(t.EmphasisDelimiter).then(t.Char)},InlineMathjaxDelimiter:function(){return ne.a.string("$")},StrongDelimiter:function(){return ne.a.string("**")},EmphasisDelimiter:function(){return ne.a.string("__")},PageName:function(t){return ne.a.notFollowedBy(ne.a.string("]")).then(t.Char).many().map(t=>t.join(""))},Strong:function(t){return t.StrongDelimiter.notFollowedBy(ne.a.whitespace).then(t.ValueInsideStrong.many()).skip(t.StrongDelimiter).map(t=>"<strong>"+t.join("")+"</strong>")},Emphasis:function(t){return t.EmphasisDelimiter.notFollowedBy(ne.a.whitespace).then(t.ValueInsideEmphasis.many()).skip(t.EmphasisDelimiter).map(t=>"<em>"+t.join("")+"</em>")},InlineMathjax:function(t){return t.InlineMathjaxDelimiter.notFollowedBy(ne.a.whitespace).then(ne.a.notFollowedBy(t.InlineMathjaxDelimiter).then(t.Char).many()).skip(ne.a.notFollowedBy(ne.a.whitespace).then(t.InlineMathjaxDelimiter)).map(t=>"\\("+t.join("")+"\\)")},InternalLink:function(t){return ne.a.string("[[").then(t.PageName).skip(ne.a.string("]]")).map(t=>`<a data-markup-link-type="internal" href="#/page/${encodeURI(t)}">${t}</a>`)},AutoLink:function(){return ne.a.regexp(/https?:\/\/(\w+\.)*\w+(\/(\w|[-.~:])+)*\/?/).map(t=>`<a data-markup-link-type="auto" href="${t}">${t}</a>`)},StandardLink:function(t){return ne.a.seqMap(ne.a.string("[").notFollowedBy(ne.a.string("[")),t.ValueInsideStandardLinkName.many(),ne.a.string("]"),ne.a.string("("),ne.a.notFollowedBy(ne.a.string(")")).then(t.Char).many(),ne.a.string(")"),(function(t,e,n,r,i,o){return`<a href="${i.join("")}">${e.join("")}</a>`}))},Link:function(t){return ne.a.alt(t.InternalLink,t.StandardLink,t.AutoLink)},ValueInsideStandardLinkName:function(t){return ne.a.alt(t.EscapedPunctuation,t.Strong,t.Emphasis,ne.a.notFollowedBy(ne.a.string("]")).then(t.Char))},ValueInsideEmphasis:function(t){return ne.a.alt(t.EscapedPunctuation,t.Strong,t.Link,t.InlineMathjax,t.CharInsideEmphasis)},ValueInsideStrong:function(t){return ne.a.alt(t.EscapedPunctuation,t.Emphasis,t.Link,t.InlineMathjax,t.CharInsideStrong)},Value:function(t){return ne.a.alt(t.EscapedPunctuation,t.Strong,t.Emphasis,t.Link,t.InlineMathjax,t.Char)},Text:function(t){return t.Value.many().map(t=>t.join(""))}});function oe(t){let e;return{c(){e=m("div"),x(e,"class","rendered-entry"),x(e,"data-entry-id",t[0])},m(n,r){y(n,e,r),t[3](e)},p(t,[n]){1&n&&x(e,"data-entry-id",t[0])},i:r,o:r,d(n){n&&v(e),t[3](null)}}}function ae(t,e,n){let r,{entryId:i}=e,{entryText:o}=e;return t.$set=t=>{"entryId"in t&&n(0,i=t.entryId),"entryText"in t&&n(2,o=t.entryText)},t.$$.update=()=>{if(6&t.$$.dirty&&r)try{let t=ie.Text.tryParse(o);n(1,r.innerHTML=t,r)}catch(t){console.log("err parsing: ",t),n(1,r.innerHTML=o,r)}},[i,r,o,function(t){N[t?"unshift":"push"](()=>{n(1,r=t)})}]}var se=class extends rt{constructor(t){super(),nt(this,t,ae,oe,u,{entryId:0,entryText:2})}},ce=n(11),ue=n.n(ce),le=n(13),fe=n.n(le);function he(){ue.a.apply(this,arguments)}function de(t){this.value=t,ue.a.Item.apply(this,arguments)}fe()(he,ue.a),fe()(de,ue.a.Item),he.Item=de,he.prototype.get=function(t){let e=this.head;for(var n=0;n<t;++n)e=e.next;return e};class pe{constructor(t,e,n){this.id=t,this.parentId=e,this.children=n||new he}getId(){return this.id}hasParent(){return 0===this.parentId||this.parentId}getParentId(){return this.parentId}setParentId(t){this.parentId=t}hasChildren(){return this.children.size>0}getChildren(){return this.children}appendChildItem(t){return this.children.append(t)}getChildNodeArray(){return this.children.toArray()}getLastChildNode(){return this.children.size>1?this.children.tail.value:this.children.head.value}}function ye(t,e){let n=Object.keys(t)[0],r=t[n],i="root"===n?null:parseInt(n),o=new he(...Array.from(r,t=>{return new de((e=t)===Object(e)?ye(t,i):new pe(t,i));var e}));return new pe(i,e=0===e?e:e||null,o)}function ve(t){if(t.hasChildren()){let e={};return e[null==t.getId()?"root":""+t.getId()]=t.getChildNodeArray().map(t=>ve(t.value)),e}return t.getId()}function ge(t){let e={...t};return Object.entries(e).map(([t,n])=>{(n={...n}).displayState=n.displayState===Ee.COLLAPSED?"COLLAPSED":"EXPANDED",e[t]=n}),e}class me{constructor(){this.list=new he}add(t){this.list.append(new de(t))}remove(){if(this.list.head){let t=this.list.head.value;return this.list.head.detach(),t}}isEmpty(){return 0===this.list.size}}class be{constructor(t,e){this.entries=t,this.root=e;let n,r=new me,i={};for(this.root.getChildNodeArray().forEach(t=>r.add(t));!r.isEmpty();)n=r.remove(),i[n.value.getId()]=n,n.value.getChildNodeArray().forEach(t=>r.add(t));this.entryItems=i}getTopEntryId(){return this.root.getChildren().head.value.getId()}getEntries(){return this.entries}getRoot(){return this.root}getEntryTexts(){return this.root.getChildren().toArray().map(t=>this.entries[t.value.getId()].text)}hasEntryAbove(t){return null!==this.entryItems[t].prev||null!==this.entryItems[t].value.getParentId()}getLastAncestorNode(t){let e=t;for(;e.hasChildren();)e=e.getLastChildNode();return e}getNextSiblingOfFirstAncestor(t){let e=t.getId();for(;this.entryItems[e].value.hasParent();)if(e=this.entryItems[e].value.getParentId(),this.entryItems[e].next)return this.entryItems[e].next.value;return null}getEntryIdAbove(t){if(null!==this.entryItems[t].prev){let e=this.entryItems[t].prev.value;return this.getLastAncestorNode(e).getId()}return this.entryItems[t].value.parentId}getEntryIdAboveWithCollapse(t){let e=this.getEntryIdAbove(t),n=null,r=this.getEntryItem(e).value.getParentId();for(;null!=r;)this.getEntryDisplayState(r)===Ee.COLLAPSED&&(n=r),r=this.getEntryItem(r).value.getParentId();return null==n?e:n}hasEntryBelow(t){let e=this.entryItems[t];return e.value.getChildren().size>0||null!==e.next||this.entryAncestorHasNextSibling(t)}getEntryIdBelowWithCollapse(t){if(this.getEntryDisplayState(t)!==Ee.COLLAPSED){let e=this.entryItems[t].value.getChildren();if(e.size>0)return e.head.value.getId()}if(null!==this.entryItems[t].next)return this.entryItems[t].next.value.getId();let e=this.getNextSiblingOfFirstAncestor(this.entryItems[t].value);return e?e.getId():null}entryAncestorHasNextSibling(t){let e=this.entryItems[t].value;if(null===e.parentId)return!1;let n=e.getId();for(;null!==this.entryItems[n].value.parentId;)if(n=this.entryItems[n].value.parentId,this.entryItems[n].next)return!0;return!1}getEntryText(t){return this.entries[t].text}getEntryDisplayState(t){return null!=this.entries[t]&&this.entries[t].displayState||Ee.EXPANDED}getEntryItem(t){return this.entryItems[t]}setEntryText(t,e){null==this.entries[t]&&(this.entries[t]={}),this.entries[t].text=e}setEntryDisplayState(t,e){null==this.entries[t]&&(this.entries[t]={}),this.entries[t].displayState=e}getParentId(t){return this.entryItems[t].value.parentId}insertEntryBelow(t,e,n){let r=Object.keys(this.entries).map(t=>parseInt(t)),i=Math.max(...r)+1;this.setEntryText(i,n);let o=new de(new pe(i,e));return this.entryItems[t].append(o),this.entryItems[i]=o,i}insertEntryAbove(t,e,n){let r=Object.keys(this.entries).map(t=>parseInt(t)),i=Math.max(...r)+1;this.setEntryText(i,n);let o=new de(new pe(i,e));this.entryItems[t].prepend(o),this.entryItems[i]=o}removeEntry(t){let e=this.entryItems[t];delete this.entries[t],e.detach()}size(){return this.entries.length}hasPrevSibling(t){return null!==this.entryItems[t].prev}getPrevSiblingNode(t){return this.entryItems[t].prev.value}}const Ee=Object.freeze({COLLAPSED:Symbol("Colors.COLLAPSED"),EXPANDED:Symbol("Colors.EXPANDED")});function we(t,e){let n=ye(e,null);return new be(t,n)}class Oe{constructor(t){this.dataStore=t}treeToSerializationObject(t){return{entries:ge(t.getEntries()),node:ve(t.getRoot())}}documentToSerializationObject(t){let e={...t};return e.tree=this.treeToSerializationObject(e.tree),e}getDocumentsString(){const t=this.dataStore.get("itero-docs");if(null==t){let t=Se();return this.saveDocuments(t)}return t}getDocuments(){const t=this.dataStore.get("itero-docs");let e;if(null==t)e=Se(),this.saveDocuments(e);else{let n=JSON.parse(t),r={};Object.entries(n).forEach(([t,e])=>{let n={...e};n.tree=new be(function(t){let e={...t};return Object.entries(e).map(([t,n])=>{(n={...n}).displayState="COLLAPSED"===n.displayState?Ee.COLLAPSED:Ee.EXPANDED,e[t]=n}),e}(e.tree.entries),ye(e.tree.node)),r[t]=n}),e=r}return e}saveDocuments(t){let e={};Object.entries(t).forEach(([t,n])=>{e[t]=this.documentToSerializationObject(n)});let n=JSON.stringify(e);return this.dataStore.set("itero-docs",n),n}}function je(t){return{currentDocId:null,docTitle:"",documents:t,displayDocs:Object.keys(t),docCursorEntryId:null,docCursorColId:0}}function xe(t,e,n,r){return{id:t,name:e,tree:we(n,r)}}function Se(){let t=[{0:{text:"this is a note taking app"},1:{text:"you can use it to write a list. ¯\\\\_(ツ)_/¯"},2:{text:"Arrow Up/Down to navigate up/down (😲)"},3:{text:"or clicking on the text with your mouse works too"},4:{text:"actually it's a nested list"},5:{text:"you can keep nesting"},6:{text:"items"},7:{text:"and items",displayState:Ee.COLLAPSED},8:{text:"a n d i t e m s"},9:{text:"you can collapse parts of the tree. the plus icon (+) indicates a collapsed item"},10:{text:"__collapse__: Ctrl + Up"},11:{text:"__expand__: Ctrl + Down"},12:{text:"make **bold portions** of the text with double asterisks (\\*\\*), like so:"},13:{text:"my \\**bolded** text"},14:{text:"make __emphasis__ with double underscore:"},15:{text:"my \\__emphasized__ text"},16:{text:"make links in two ways"},17:{text:"just write a URL: https://en.wikipedia.org/wiki/Special:Random"},18:{text:"link name + URL: [random wiki page](https://en.wikipedia.org/wiki/Special:Random)"},19:{text:"type: \\[link name](www.example.com)"}},{root:[0,1,2,3,{4:[{5:[{6:[{7:[8]}]}]},{9:[10,11]}]},{12:[13]},{14:[15]},{16:[17,{18:[19]}]}]}];return{1:xe(1,"hello and what is this",t[0],t[1])}}n(25);function Ie(t,e,n){const r=t.slice();return r[23]=e[n],r[25]=n,r}function Ce(t){let e,n,r,i,o,a,s,c,u,l,f;const h=[Ae,_e],d=[];function g(t,e){return 2&e&&(r=!!t[20](t[1])),r?0:1}i=g(t,-1),o=d[i]=h[i](t);const b=[$e,De],E=[];function O(t,e){return t[19]?0:1}return s=O(t),c=E[s]=b[s](t),{c(){e=m("div"),n=m("span"),o.c(),a=w(),c.c(),x(n,"class","icon-container svelte-oki7qk"),x(e,"class","entry-display svelte-oki7qk")},m(r,o){y(r,e,o),p(e,n),d[i].m(n,null),p(e,a),E[s].m(e,null),u=!0,l||(f=j(n,"click",t[22]),l=!0)},p(t,r){let a=i;i=g(t,r),i===a?d[i].p(t,r):(q(),W(d[a],1,1,()=>{d[a]=null}),J(),o=d[i],o||(o=d[i]=h[i](t),o.c()),X(o,1),o.m(n,null));let u=s;s=O(t),s===u?E[s].p(t,r):(q(),W(E[u],1,1,()=>{E[u]=null}),J(),c=E[s],c||(c=E[s]=b[s](t),c.c()),X(c,1),c.m(e,null))},i(t){u||(X(o),X(c),u=!0)},o(t){W(o),W(c),u=!1},d(t){t&&v(e),d[i].d(),E[s].d(),l=!1,f()}}}function _e(t){let e;const n=new qt({props:{data:Jt,scale:"0.51"}});return{c(){Q(n.$$.fragment)},m(t,r){tt(n,t,r),e=!0},p:r,i(t){e||(X(n.$$.fragment,t),e=!0)},o(t){W(n.$$.fragment,t),e=!1},d(t){et(n,t)}}}function Ae(t){let e;const n=new qt({props:{data:Kt,scale:"0.51"}});return{c(){Q(n.$$.fragment)},m(t,r){tt(n,t,r),e=!0},p:r,i(t){e||(X(n.$$.fragment,t),e=!0)},o(t){W(n.$$.fragment,t),e=!1},d(t){et(n,t)}}}function De(t){let e;const n=new se({props:{entryId:t[15],entryText:t[0].getEntryText(t[15])}});return{c(){Q(n.$$.fragment)},m(t,r){tt(n,t,r),e=!0},p(t,e){const r={};32768&e&&(r.entryId=t[15]),32769&e&&(r.entryText=t[0].getEntryText(t[15])),n.$set(r)},i(t){e||(X(n.$$.fragment,t),e=!0)},o(t){W(n.$$.fragment,t),e=!1},d(t){et(n,t)}}}function $e(t){let e;const n=new te({props:{entryId:t[15],entryValue:t[0].getEntryText(t[15]),docCursorEntryId:t[2],docCursorColId:t[3],isEntryAbove:t[0].hasEntryAbove(t[15]),isEntryBelow:t[0].hasEntryBelow(t[15]),handleSaveDocEntry:t[4],handleSaveFullCursor:t[5],handleGoUp:t[6],handleGoDown:t[7],handleCollapseEntry:t[8],handleExpandEntry:t[9],handleSplitEntry:t[10],handleEntryBackspace:t[11],handleIndent:t[12],handleDedent:t[13],handleSaveCursorColId:t[14]}});return{c(){Q(n.$$.fragment)},m(t,r){tt(n,t,r),e=!0},p(t,e){const r={};32768&e&&(r.entryId=t[15]),32769&e&&(r.entryValue=t[0].getEntryText(t[15])),4&e&&(r.docCursorEntryId=t[2]),8&e&&(r.docCursorColId=t[3]),32769&e&&(r.isEntryAbove=t[0].hasEntryAbove(t[15])),32769&e&&(r.isEntryBelow=t[0].hasEntryBelow(t[15])),16&e&&(r.handleSaveDocEntry=t[4]),32&e&&(r.handleSaveFullCursor=t[5]),64&e&&(r.handleGoUp=t[6]),128&e&&(r.handleGoDown=t[7]),256&e&&(r.handleCollapseEntry=t[8]),512&e&&(r.handleExpandEntry=t[9]),1024&e&&(r.handleSplitEntry=t[10]),2048&e&&(r.handleEntryBackspace=t[11]),4096&e&&(r.handleIndent=t[12]),8192&e&&(r.handleDedent=t[13]),16384&e&&(r.handleSaveCursorColId=t[14]),n.$set(r)},i(t){e||(X(n.$$.fragment,t),e=!0)},o(t){W(n.$$.fragment,t),e=!1},d(t){et(n,t)}}}function Te(t){let e,n,r=t[16],i=[];for(let e=0;e<r.length;e+=1)i[e]=ke(Ie(t,r,e));const o=t=>W(i[t],1,1,()=>{i[t]=null});return{c(){e=m("ul");for(let t=0;t<i.length;t+=1)i[t].c();x(e,"class","tree-node-list svelte-oki7qk")},m(t,r){y(t,e,r);for(let t=0;t<i.length;t+=1)i[t].m(e,null);n=!0},p(t,n){if(98301&n){let a;for(r=t[16],a=0;a<r.length;a+=1){const o=Ie(t,r,a);i[a]?(i[a].p(o,n),X(i[a],1)):(i[a]=ke(o),i[a].c(),X(i[a],1),i[a].m(e,null))}for(q(),a=r.length;a<i.length;a+=1)o(a);J()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)X(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)W(i[t]);n=!1},d(t){t&&v(e),g(i,t)}}}function ke(t){let e,n,r;const i=new Le({props:{tree:t[0],flowyTreeNode:t[23].value,docCursorEntryId:t[2],docCursorColId:t[3],handleSaveDocEntry:t[4],handleSaveFullCursor:t[5],handleGoUp:t[6],handleGoDown:t[7],handleCollapseEntry:t[8],handleExpandEntry:t[9],handleSplitEntry:t[10],handleEntryBackspace:t[11],handleIndent:t[12],handleDedent:t[13],handleSaveCursorColId:t[14]}});return{c(){e=m("li"),Q(i.$$.fragment),n=w(),x(e,"class","svelte-oki7qk")},m(t,o){y(t,e,o),tt(i,e,null),p(e,n),r=!0},p(t,e){const n={};1&e&&(n.tree=t[0]),65536&e&&(n.flowyTreeNode=t[23].value),4&e&&(n.docCursorEntryId=t[2]),8&e&&(n.docCursorColId=t[3]),16&e&&(n.handleSaveDocEntry=t[4]),32&e&&(n.handleSaveFullCursor=t[5]),64&e&&(n.handleGoUp=t[6]),128&e&&(n.handleGoDown=t[7]),256&e&&(n.handleCollapseEntry=t[8]),512&e&&(n.handleExpandEntry=t[9]),1024&e&&(n.handleSplitEntry=t[10]),2048&e&&(n.handleEntryBackspace=t[11]),4096&e&&(n.handleIndent=t[12]),8192&e&&(n.handleDedent=t[13]),16384&e&&(n.handleSaveCursorColId=t[14]),i.$set(n)},i(t){r||(X(i.$$.fragment,t),r=!0)},o(t){W(i.$$.fragment,t),r=!1},d(t){t&&v(e),et(i)}}}function Ne(t){let e,n,r,i=null!==t[15]&&Ce(t),o=t[17]&&!t[18]&&Te(t);return{c(){i&&i.c(),e=w(),o&&o.c(),n=O()},m(t,a){i&&i.m(t,a),y(t,e,a),o&&o.m(t,a),y(t,n,a),r=!0},p(t,[r]){null!==t[15]?i?(i.p(t,r),32768&r&&X(i,1)):(i=Ce(t),i.c(),X(i,1),i.m(e.parentNode,e)):i&&(q(),W(i,1,1,()=>{i=null}),J()),t[17]&&!t[18]?o?(o.p(t,r),393216&r&&X(o,1)):(o=Te(t),o.c(),X(o,1),o.m(n.parentNode,n)):o&&(q(),W(o,1,1,()=>{o=null}),J())},i(t){r||(X(i),X(o),r=!0)},o(t){W(i),W(o),r=!1},d(t){i&&i.d(t),t&&v(e),o&&o.d(t),t&&v(n)}}}function Pe(t,e,n){let{tree:r}=e,{flowyTreeNode:i}=e,{docCursorEntryId:o}=e,{docCursorColId:a}=e,{handleSaveDocEntry:s}=e,{handleSaveFullCursor:c}=e,{handleGoUp:u}=e,{handleGoDown:l}=e,{handleCollapseEntry:f}=e,{handleExpandEntry:h}=e,{handleSplitEntry:d}=e,{handleEntryBackspace:p}=e,{handleIndent:y}=e,{handleDedent:v}=e,{handleSaveCursorColId:g}=e;function m(t){return t.hasChildren()&&r.getEntryDisplayState(t.getId())===Ee.COLLAPSED}function b(t,e){e?(console.log("trying to expand"),h()):f()}let E,w,O,j,x;return t.$set=t=>{"tree"in t&&n(0,r=t.tree),"flowyTreeNode"in t&&n(1,i=t.flowyTreeNode),"docCursorEntryId"in t&&n(2,o=t.docCursorEntryId),"docCursorColId"in t&&n(3,a=t.docCursorColId),"handleSaveDocEntry"in t&&n(4,s=t.handleSaveDocEntry),"handleSaveFullCursor"in t&&n(5,c=t.handleSaveFullCursor),"handleGoUp"in t&&n(6,u=t.handleGoUp),"handleGoDown"in t&&n(7,l=t.handleGoDown),"handleCollapseEntry"in t&&n(8,f=t.handleCollapseEntry),"handleExpandEntry"in t&&n(9,h=t.handleExpandEntry),"handleSplitEntry"in t&&n(10,d=t.handleSplitEntry),"handleEntryBackspace"in t&&n(11,p=t.handleEntryBackspace),"handleIndent"in t&&n(12,y=t.handleIndent),"handleDedent"in t&&n(13,v=t.handleDedent),"handleSaveCursorColId"in t&&n(14,g=t.handleSaveCursorColId)},t.$$.update=()=>{2&t.$$.dirty&&n(15,E=i.getId()),2&t.$$.dirty&&n(16,w=i.getChildNodeArray()),65536&t.$$.dirty&&n(17,O=w.length>0),163841&t.$$.dirty&&n(18,j=O&&r.getEntryDisplayState(E)==Ee.COLLAPSED),32772&t.$$.dirty&&n(19,x=E===o)},[r,i,o,a,s,c,u,l,f,h,d,p,y,v,g,E,w,O,j,x,m,b,()=>b(0,m(i))]}var Le=class extends rt{constructor(t){super(),nt(this,t,Pe,Ne,u,{tree:0,flowyTreeNode:1,docCursorEntryId:2,docCursorColId:3,handleSaveDocEntry:4,handleSaveFullCursor:5,handleGoUp:6,handleGoDown:7,handleCollapseEntry:8,handleExpandEntry:9,handleSplitEntry:10,handleEntryBackspace:11,handleIndent:12,handleDedent:13,handleSaveCursorColId:14})}};n(26);function Be(t){let e,n,r,i,o,a,s,u;const l=new qt({props:{data:Xt,scale:"0.91"}});return{c(){e=m("div"),n=m("span"),r=E(t[2]),i=w(),o=m("span"),Q(l.$$.fragment),x(n,"id","doc-name-display"),x(n,"class","svelte-1h0eh7a"),x(o,"id","doc-name-edit"),x(o,"class","svelte-1h0eh7a"),x(e,"id","doc-name"),x(e,"class","svelte-1h0eh7a")},m(f,h){y(f,e,h),p(e,n),p(n,r),p(e,i),p(e,o),tt(l,o,null),a=!0,s||(u=j(o,"click",(function(){c(t[20])&&t[20].apply(this,arguments)})),s=!0)},p(e,n){t=e,(!a||4&n)&&I(r,t[2])},i(t){a||(X(l.$$.fragment,t),a=!0)},o(t){W(l.$$.fragment,t),a=!1},d(t){t&&v(e),et(l),s=!1,u()}}}function Re(t){let e,n,i,o,a,u,l,f;return{c(){e=m("div"),n=m("input"),i=w(),o=m("span"),o.textContent="save",a=w(),u=m("span"),u.textContent="cancel",x(n,"type","text"),x(n,"id","doc-name-input"),x(n,"placeholder","Document name"),x(n,"class","svelte-1h0eh7a"),x(o,"class","doc-name-edit-action svelte-1h0eh7a"),x(u,"class","doc-name-edit-action svelte-1h0eh7a")},m(r,s){y(r,e,s),p(e,n),C(n,t[17]),p(e,i),p(e,o),p(e,a),p(e,u),l||(f=[j(n,"input",t[26]),j(o,"click",(function(){c(t[18])&&t[18].apply(this,arguments)})),j(u,"click",(function(){c(t[19])&&t[19].apply(this,arguments)}))],l=!0)},p(e,r){t=e,131072&r&&n.value!==t[17]&&C(n,t[17])},i:r,o:r,d(t){t&&v(e),l=!1,s(f)}}}function Me(t){let e,n,r,i,o;const a=[Re,Be],s=[];function c(t,e){return t[5]?0:1}n=c(t),r=s[n]=a[n](t);const u=new Le({props:{tree:t[0],flowyTreeNode:t[1],docCursorEntryId:t[3],docCursorColId:t[4],handleSaveDocEntry:t[6],handleSaveFullCursor:t[7],handleGoUp:t[8],handleGoDown:t[9],handleCollapseEntry:t[11],handleExpandEntry:t[12],handleSplitEntry:t[13],handleEntryBackspace:t[10],handleIndent:t[14],handleDedent:t[15],handleSaveCursorColId:t[16]}});return{c(){e=m("div"),r.c(),i=w(),Q(u.$$.fragment),x(e,"id","document"),x(e,"class","svelte-1h0eh7a")},m(t,r){y(t,e,r),s[n].m(e,null),p(e,i),tt(u,e,null),o=!0},p(t,[o]){let l=n;n=c(t),n===l?s[n].p(t,o):(q(),W(s[l],1,1,()=>{s[l]=null}),J(),r=s[n],r||(r=s[n]=a[n](t),r.c()),X(r,1),r.m(e,i));const f={};1&o&&(f.tree=t[0]),2&o&&(f.flowyTreeNode=t[1]),8&o&&(f.docCursorEntryId=t[3]),16&o&&(f.docCursorColId=t[4]),64&o&&(f.handleSaveDocEntry=t[6]),128&o&&(f.handleSaveFullCursor=t[7]),256&o&&(f.handleGoUp=t[8]),512&o&&(f.handleGoDown=t[9]),2048&o&&(f.handleCollapseEntry=t[11]),4096&o&&(f.handleExpandEntry=t[12]),8192&o&&(f.handleSplitEntry=t[13]),1024&o&&(f.handleEntryBackspace=t[10]),16384&o&&(f.handleIndent=t[14]),32768&o&&(f.handleDedent=t[15]),65536&o&&(f.handleSaveCursorColId=t[16]),u.$set(f)},i(t){o||(X(r),X(u.$$.fragment,t),o=!0)},o(t){W(r),W(u.$$.fragment,t),o=!1},d(t){t&&v(e),s[n].d(),et(u)}}}function Ue(t,e,n){let{tree:r}=e,{flowyTreeNode:i}=e,{docTitle:o}=e,{docCursorEntryId:a}=e,{docCursorColId:s}=e,{docIsEditingName:c}=e,{handleSaveDocEntry:u}=e,{handleSaveFullCursor:l}=e,{handleGoUp:f}=e,{handleGoDown:h}=e,{handleEntryBackspace:d}=e,{handleCollapseEntry:p}=e,{handleExpandEntry:y}=e,{handleSplitEntry:v}=e,{handleIndent:g}=e,{handleDedent:m}=e,{handleStartEditingDocName:b}=e,{handleCancelEditingDocName:E}=e,{handleSaveDocName:w}=e,{handleSaveCursorColId:O}=e,j=Promise.resolve();function x(t){return j=j.then(()=>(t(),MathJax.typesetPromise())).catch(t=>console.log("Typeset failed: "+t.message)),j}T(()=>{x(()=>{MathJax.texReset(),MathJax.typesetClear()})});let S,I,C,_=o;return t.$set=t=>{"tree"in t&&n(0,r=t.tree),"flowyTreeNode"in t&&n(1,i=t.flowyTreeNode),"docTitle"in t&&n(2,o=t.docTitle),"docCursorEntryId"in t&&n(3,a=t.docCursorEntryId),"docCursorColId"in t&&n(4,s=t.docCursorColId),"docIsEditingName"in t&&n(5,c=t.docIsEditingName),"handleSaveDocEntry"in t&&n(6,u=t.handleSaveDocEntry),"handleSaveFullCursor"in t&&n(7,l=t.handleSaveFullCursor),"handleGoUp"in t&&n(8,f=t.handleGoUp),"handleGoDown"in t&&n(9,h=t.handleGoDown),"handleEntryBackspace"in t&&n(10,d=t.handleEntryBackspace),"handleCollapseEntry"in t&&n(11,p=t.handleCollapseEntry),"handleExpandEntry"in t&&n(12,y=t.handleExpandEntry),"handleSplitEntry"in t&&n(13,v=t.handleSplitEntry),"handleIndent"in t&&n(14,g=t.handleIndent),"handleDedent"in t&&n(15,m=t.handleDedent),"handleStartEditingDocName"in t&&n(21,b=t.handleStartEditingDocName),"handleCancelEditingDocName"in t&&n(22,E=t.handleCancelEditingDocName),"handleSaveDocName"in t&&n(23,w=t.handleSaveDocName),"handleSaveCursorColId"in t&&n(16,O=t.handleSaveCursorColId)},t.$$.update=()=>{4194308&t.$$.dirty&&n(19,I=()=>{n(17,_=o),E()}),2097156&t.$$.dirty&&n(20,C=()=>{n(17,_=o),b()}),8519680&t.$$.dirty&&n(18,S=()=>w(_))},[r,i,o,a,s,c,u,l,f,h,d,p,y,v,g,m,O,_,S,I,C,b,E,w,j,x,function(){_=this.value,n(17,_),n(2,o),n(22,E),n(21,b)}]}var ze=class extends rt{constructor(t){super(),nt(this,t,Ue,Me,u,{tree:0,flowyTreeNode:1,docTitle:2,docCursorEntryId:3,docCursorColId:4,docIsEditingName:5,handleSaveDocEntry:6,handleSaveFullCursor:7,handleGoUp:8,handleGoDown:9,handleEntryBackspace:10,handleCollapseEntry:11,handleExpandEntry:12,handleSplitEntry:13,handleIndent:14,handleDedent:15,handleStartEditingDocName:21,handleCancelEditingDocName:22,handleSaveDocName:23,handleSaveCursorColId:16})}};n(27);function Ve(t,e,n){const r=t.slice();return r[2]=e[n],r}function Fe(t){let e,n,r,i,o,a=t[2].name+"";return{c(){e=m("li"),n=m("a"),r=E(a),o=w(),x(n,"href",i="#/"+t[2].id),x(e,"class","svelte-55q5al")},m(t,i){y(t,e,i),p(e,n),p(n,r),p(e,o)},p(t,e){1&e&&a!==(a=t[2].name+"")&&I(r,a),1&e&&i!==(i="#/"+t[2].id)&&x(n,"href",i)},d(t){t&&v(e)}}}function Ye(t){let e,n,r,i,o,a;const s=new qt({props:{data:Kt,scale:"1"}});let u=t[0],l=[];for(let e=0;e<u.length;e+=1)l[e]=Fe(Ve(t,u,e));return{c(){e=m("button"),Q(s.$$.fragment),n=w(),r=m("ul");for(let t=0;t<l.length;t+=1)l[t].c();x(r,"id","docsList"),x(r,"class","svelte-55q5al")},m(u,f){y(u,e,f),tt(s,e,null),y(u,n,f),y(u,r,f);for(let t=0;t<l.length;t+=1)l[t].m(r,null);i=!0,o||(a=j(e,"click",(function(){c(t[1])&&t[1].apply(this,arguments)})),o=!0)},p(e,[n]){if(t=e,1&n){let e;for(u=t[0],e=0;e<u.length;e+=1){const i=Ve(t,u,e);l[e]?l[e].p(i,n):(l[e]=Fe(i),l[e].c(),l[e].m(r,null))}for(;e<l.length;e+=1)l[e].d(1);l.length=u.length}},i(t){i||(X(s.$$.fragment,t),i=!0)},o(t){W(s.$$.fragment,t),i=!1},d(t){t&&v(e),et(s),t&&v(n),t&&v(r),g(l,t),o=!1,a()}}}function Ge(t,e,n){let{displayDocs:r}=e,{createDoc:i}=e;return t.$set=t=>{"displayDocs"in t&&n(0,r=t.displayDocs),"createDoc"in t&&n(1,i=t.createDoc)},[r,i]}var He=class extends rt{constructor(t){super(),nt(this,t,Ge,Ye,u,{displayDocs:0,createDoc:1})}};class qe{get(t){const e=localStorage.getItem(t);return null==e?null:e}set(t,e){return localStorage.setItem(t,e)}}var Je=n(1),Xe=n(9),We=n(6),Ke=n(0),Ze=n(3),Qe=n(7),tn=n(2),en=n(8),nn=n(10),rn={},on=function(t){return"#"===t[0]},an=function(){function t(e,n,r){var i=this;this.config=e,this.context=r,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.options=Object.assign({actions:{},guards:{},services:{},activities:{},delays:{}},n),this.parent=this.options._parent,this.key=this.config.key||this.options._key||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:Xe.c),this.id=this.config.id||Object(Je.d)([this.machine.key],this.path).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object(Ke.k)(this.config.states).length?"compound":this.config.history?"history":"atomic"),We.a||Object(Ke.H)(!("parallel"in this.config),'The "parallel" property is deprecated and will be removed in version 4.1. '+(this.config.parallel?"Replace with `type: 'parallel'`":"Use `type: '"+this.type+"'`")+" in the config for state node '"+this.id+"' instead."),this.initial=this.config.initial,this.states=this.config.states?Object(Ke.n)(this.config.states,(function(e,n){var r,o=new t(e,{_parent:i,_key:n});return Object.assign(i.idMap,Object(Je.a)(((r={})[o.id]=o,r),o.idMap)),o})):rn;var o=0;!function t(e){var n,r;e.order=o++;try{for(var i=Object(Je.e)(Object(Qe.b)(e)),a=i.next();!a.done;a=i.next()){t(a.value)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}(this),this.history=!0===this.config.history?"shallow":this.config.history||!1,this._transient=!!this.config.on&&(Array.isArray(this.config.on)?this.config.on.some((function(t){return""===t.event})):""in this.config.on),this.strict=!!this.config.strict,this.onEntry=Object(Ke.w)(this.config.entry||this.config.onEntry).map((function(t){return Object(jt.n)(t)})),this.onExit=Object(Ke.w)(this.config.exit||this.config.onExit).map((function(t){return Object(jt.n)(t)})),this.meta=this.config.meta,this.data="final"===this.type?this.config.data:void 0,this.invoke=Object(Ke.w)(this.config.invoke).map((function(t,e){var n,r;if(Object(Ke.g)(t))return i.machine.options.services=Object(Je.a)(((n={})[t.id]=t,n),i.machine.options.services),{type:tn.g,src:t.id,id:t.id};if("string"!=typeof t.src){var o=i.id+":invocation["+e+"]";return i.machine.options.services=Object(Je.a)(((r={})[o]=t.src,r),i.machine.options.services),Object(Je.a)(Object(Je.a)({type:tn.g,id:o},t),{src:o})}return Object(Je.a)(Object(Je.a)({},t),{type:tn.g,id:t.id||t.src,src:t.src})})),this.activities=Object(Ke.w)(this.config.activities).concat(this.invoke).map((function(t){return Object(jt.p)(t)})),this.transition=this.transition.bind(this)}return t.prototype._init=function(){this.__cache.transitions||Object(Qe.a)(this).forEach((function(t){return t.on}))},t.prototype.withConfig=function(e,n){void 0===n&&(n=this.context);var r=this.options,i=r.actions,o=r.activities,a=r.guards,s=r.services,c=r.delays;return new t(this.config,{actions:Object(Je.a)(Object(Je.a)({},i),e.actions),activities:Object(Je.a)(Object(Je.a)({},o),e.activities),guards:Object(Je.a)(Object(Je.a)({},a),e.guards),services:Object(Je.a)(Object(Je.a)({},s),e.services),delays:Object(Je.a)(Object(Je.a)({},c),e.delays)},n)},t.prototype.withContext=function(e){return new t(this.config,this.options,e)},Object.defineProperty(t.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:Object(Ke.n)(this.states,(function(t){return t.definition})),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.data,invoke:this.invoke}},enumerable:!0,configurable:!0}),t.prototype.toJSON=function(){return this.definition},Object.defineProperty(t.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var t=this.transitions;return this.__cache.on=t.reduce((function(t,e){return t[e.eventType]=t[e.eventType]||[],t[e.eventType].push(e),t}),{})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!0,configurable:!0}),t.prototype.getCandidates=function(t){if(this.__cache.candidates[t])return this.__cache.candidates[t];var e=""===t,n=this.transitions.filter((function(n){var r=n.eventType===t;return e?r:r||"*"===n.eventType}));return this.__cache.candidates[t]=n,n},t.prototype.getDelayedTransitions=function(){var t=this,e=this.config.after;if(!e)return[];var n=function(e,n){var r=Object(Ke.f)(e)?t.id+":delay["+n+"]":e,i=Object(jt.a)(r,t.id);return t.onEntry.push(Object(jt.k)(i,{delay:e})),t.onExit.push(Object(jt.c)(i)),i};return(Object(Ke.d)(e)?e.map((function(t,e){var r=n(t.delay,e);return Object(Je.a)(Object(Je.a)({},t),{event:r})})):Object(Ke.b)(Object(Ke.k)(e).map((function(t,r){var i=e[t],o=Object(Ke.j)(i)?{target:i}:i,a=isNaN(+t)?t:+t,s=n(a,r);return Object(Ke.w)(o).map((function(t){return Object(Je.a)(Object(Je.a)({},t),{event:s,delay:a})}))})))).map((function(e){var n=e.delay;return Object(Je.a)(Object(Je.a)({},t.formatTransition(e)),{delay:n})}))},t.prototype.getStateNodes=function(t){var e,n=this;if(!t)return[];var r=t instanceof en.a?t.value:Object(Ke.C)(t,this.delimiter);if(Object(Ke.j)(r)){var i=this.getStateNode(r).initial;return void 0!==i?this.getStateNodes(((e={})[r]=i,e)):[this.states[r]]}var o=Object(Ke.k)(r);return o.map((function(t){return n.getStateNode(t)})).concat(o.reduce((function(t,e){var i=n.getStateNode(e).getStateNodes(r[e]);return t.concat(i)}),[]))},t.prototype.handles=function(t){var e=Object(Ke.c)(t);return this.events.includes(e)},t.prototype.resolveState=function(t){var e=Array.from(Object(Qe.c)([],this.getStateNodes(t.value)));return new en.a(Object(Je.a)(Object(Je.a)({},t),{value:this.resolve(t.value),configuration:e}))},t.prototype.transitionLeafNode=function(t,e,n){var r=this.getStateNode(t).next(e,n);return r&&r.transitions.length?r:this.next(e,n)},t.prototype.transitionCompoundNode=function(t,e,n){var r=Object(Ke.k)(t),i=this.getStateNode(r[0])._transition(t[r[0]],e,n);return i&&i.transitions.length?i:this.next(e,n)},t.prototype.transitionParallelNode=function(t,e,n){var r,i,o={};try{for(var a=Object(Je.e)(Object(Ke.k)(t)),s=a.next();!s.done;s=a.next()){var c=s.value,u=t[c];if(u){var l=this.getStateNode(c)._transition(u,e,n);l&&(o[c]=l)}}}catch(t){r={error:t}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}var f=Object(Ke.k)(o).map((function(t){return o[t]})),h=Object(Ke.b)(f.map((function(t){return t.transitions})));if(!f.some((function(t){return t.transitions.length>0})))return this.next(e,n);var d=Object(Ke.b)(f.map((function(t){return t.entrySet}))),p=Object(Ke.b)(Object(Ke.k)(o).map((function(t){return o[t].configuration})));return{transitions:h,entrySet:d,exitSet:Object(Ke.b)(f.map((function(t){return t.exitSet}))),configuration:p,source:e,actions:Object(Ke.b)(Object(Ke.k)(o).map((function(t){return o[t].actions})))}},t.prototype._transition=function(t,e,n){return Object(Ke.j)(t)?this.transitionLeafNode(t,e,n):1===Object(Ke.k)(t).length?this.transitionCompoundNode(t,e,n):this.transitionParallelNode(t,e,n)},t.prototype.next=function(t,e){var n,r,i,o=this,a=e.name,s=[],c=[];try{for(var u=Object(Je.e)(this.getCandidates(a)),l=u.next();!l.done;l=u.next()){var f=l.value,h=f.cond,d=f.in,p=t.context,y=!d||(Object(Ke.j)(d)&&on(d)?t.matches(Object(Ke.C)(this.getStateNodeById(d).path,this.delimiter)):Object(Ke.o)(Object(Ke.C)(d,this.delimiter),Object(Ke.s)(this.path.slice(0,-2))(t.value))),v=!1;try{v=!h||Object(Ke.a)(this.machine,h,p,e,t)}catch(t){throw new Error("Unable to evaluate guard '"+(h.name||h.type)+"' in transition for event '"+a+"' in state node '"+this.id+"':\n"+t.message)}if(v&&y){void 0!==f.target&&(c=f.target),s.push.apply(s,Object(Je.d)(f.actions)),i=f;break}}}catch(t){n={error:t}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}if(i){if(!c.length)return{transitions:[i],entrySet:[],exitSet:[],configuration:t.value?[this]:[],source:t,actions:s};var g=Object(Ke.b)(c.map((function(e){return o.getRelativeStateNodes(e,t.historyValue)}))),m=!!i.internal;return{transitions:[i],entrySet:m?[]:Object(Ke.b)(g.map((function(t){return o.nodesFromChild(t)}))),exitSet:m?[]:[this],configuration:g,source:t,actions:s}}},t.prototype.nodesFromChild=function(t){if(t.escapes(this))return[];for(var e=[],n=t;n&&n!==this;)e.push(n),n=n.parent;return e.push(this),e},t.prototype.escapes=function(t){if(this===t)return!1;for(var e=this.parent;e;){if(e===t)return!1;e=e.parent}return!0},t.prototype.getActions=function(t,e,n,r){var i,o,a,s,c=Object(Qe.c)([],r?this.getStateNodes(r.value):[this]),u=t.configuration.length?Object(Qe.c)(c,t.configuration):c;try{for(var l=Object(Je.e)(u),f=l.next();!f.done;f=l.next()){var h=f.value;Object(Qe.e)(c,h)||t.entrySet.push(h)}}catch(t){i={error:t}}finally{try{f&&!f.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}try{for(var d=Object(Je.e)(c),p=d.next();!p.done;p=d.next()){h=p.value;Object(Qe.e)(u,h)&&!Object(Qe.e)(t.exitSet,h.parent)||t.exitSet.push(h)}}catch(t){a={error:t}}finally{try{p&&!p.done&&(s=d.return)&&s.call(d)}finally{if(a)throw a.error}}t.source||(t.exitSet=[],t.entrySet.push(this));var y=Object(Ke.b)(t.entrySet.map((function(r){var i=[];if("final"!==r.type)return i;var o=r.parent;if(!o.parent)return i;i.push(Object(jt.d)(r.id,r.data),Object(jt.d)(o.id,r.data?Object(Ke.l)(r.data,e,n):void 0));var a=o.parent;return"parallel"===a.type&&Object(Qe.b)(a).every((function(e){return Object(Qe.f)(t.configuration,e)}))&&i.push(Object(jt.d)(a.id,a.data)),i})));t.exitSet.sort((function(t,e){return e.order-t.order})),t.entrySet.sort((function(t,e){return t.order-e.order}));var v=new Set(t.entrySet),g=new Set(t.exitSet),m=Object(Je.b)([Object(Ke.b)(Array.from(v).map((function(t){return Object(Je.d)(t.activities.map((function(t){return Object(jt.l)(t)})),t.onEntry)}))).concat(y.map(jt.i)),Object(Ke.b)(Array.from(g).map((function(t){return Object(Je.d)(t.onExit,t.activities.map((function(t){return Object(jt.m)(t)})))})))],2),b=m[0],E=m[1];return Object(jt.o)(E.concat(t.actions).concat(b),this.machine.options.actions)},t.prototype.transition=function(t,e,n){void 0===t&&(t=this.initialState);var r,i=Object(Ke.z)(e);if(t instanceof en.a)r=void 0===n?t:this.resolveState(en.a.from(t,n));else{var o=Object(Ke.j)(t)?this.resolve(Object(Ke.t)(this.getResolvedPath(t))):this.resolve(t),a=n||this.machine.context;r=this.resolveState(en.a.from(o,a))}if(!We.a&&"*"===i.name)throw new Error("An event cannot have the wildcard type ('*')");if(this.strict&&!this.events.includes(i.name)&&!Object(Ke.e)(i.name))throw new Error("Machine '"+this.id+"' does not accept event '"+i.name+"'");var s=this._transition(r.value,r,i)||{transitions:[],configuration:[],entrySet:[],exitSet:[],source:r,actions:[]},c=Object(Qe.c)([],this.getStateNodes(r.value)),u=s.configuration.length?Object(Qe.c)(c,s.configuration):c;return s.configuration=Object(Je.d)(u),this.resolveTransition(s,r,i)},t.prototype.resolveRaisedTransition=function(t,e,n){var r,i=t.actions;return(t=this.transition(t,e))._event=n,t.event=n.data,(r=t.actions).unshift.apply(r,Object(Je.d)(i)),t},t.prototype.resolveTransition=function(t,e,n,r){var i,o;void 0===n&&(n=jt.h),void 0===r&&(r=this.machine.context);var a=t.configuration,s=!e||t.transitions.length>0?Object(Qe.d)(this.machine,a):void 0,c=e?e.historyValue?e.historyValue:t.source?this.machine.historyValue(e.value):void 0:void 0,u=e?e.context:r,l=this.getActions(t,u,n,e),f=e?Object(Je.a)({},e.activities):{};try{for(var h=Object(Je.e)(l),d=h.next();!d.done;d=h.next()){var p=d.value;p.type===tn.m?f[p.activity.id||p.activity.type]=p:p.type===tn.n&&(f[p.activity.id||p.activity.type]=!1)}}catch(t){i={error:t}}finally{try{d&&!d.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}var y=Object(Je.b)(Object(jt.j)(this,e,u,n,l),2),v=y[0],g=y[1],m=Object(Je.b)(Object(Ke.r)(v,(function(t){return t.type===tn.k||t.type===tn.l&&t.to===Ze.b.Internal})),2),b=m[0],E=m[1],w=v.filter((function(t){return t.type===tn.m&&t.activity.type===tn.g})).reduce((function(t,e){return t[e.activity.id]=Object(nn.a)(e.activity),t}),e?Object(Je.a)({},e.children):{}),O=s?t.configuration:e?e.configuration:[],j=O.reduce((function(t,e){return void 0!==e.meta&&(t[e.id]=e.meta),t}),{}),x=Object(Qe.f)(O,this),S=new en.a({value:s||e.value,context:g,_event:n,_sessionid:e?e._sessionid:null,historyValue:s?c?Object(Ke.G)(c,s):void 0:e?e.historyValue:void 0,history:!s||t.source?e:void 0,actions:s?E:[],activities:s?f:e?e.activities:{},meta:s?j:e?e.meta:void 0,events:[],configuration:O,transitions:t.transitions,children:w,done:x}),I=u!==g;S.changed=n.name===tn.o||I;var C=S.history;if(C&&delete C.history,!s)return S;var _=S;if(!x)for((this._transient||a.some((function(t){return t._transient})))&&(_=this.resolveRaisedTransition(_,{type:tn.i},n));b.length;){var A=b.shift();_=this.resolveRaisedTransition(_,A._event,n)}var D=_.changed||(C?!!_.actions.length||I||typeof C.value!=typeof _.value||!Object(en.d)(_.value,C.value):void 0);return _.changed=D,_.historyValue=S.historyValue,_.history=C,_},t.prototype.getStateNode=function(t){if(on(t))return this.machine.getStateNodeById(t);if(!this.states)throw new Error("Unable to retrieve child state '"+t+"' from '"+this.id+"'; no child states exist.");var e=this.states[t];if(!e)throw new Error("Child state '"+t+"' does not exist on '"+this.id+"'");return e},t.prototype.getStateNodeById=function(t){var e=on(t)?t.slice("#".length):t;if(e===this.id)return this;var n=this.machine.idMap[e];if(!n)throw new Error("Child state node '#"+e+"' does not exist on machine '"+this.id+"'");return n},t.prototype.getStateNodeByPath=function(t){if("string"==typeof t&&on(t))try{return this.getStateNodeById(t.slice(1))}catch(t){}for(var e=Object(Ke.A)(t,this.delimiter).slice(),n=this;e.length;){var r=e.shift();if(!r.length)break;n=n.getStateNode(r)}return n},t.prototype.resolve=function(t){var e,n=this;if(!t)return this.initialStateValue||rn;switch(this.type){case"parallel":return Object(Ke.n)(this.initialStateValue,(function(e,r){return e?n.getStateNode(r).resolve(t[r]||e):rn}));case"compound":if(Object(Ke.j)(t)){var r=this.getStateNode(t);return"parallel"===r.type||"compound"===r.type?((e={})[t]=r.initialStateValue,e):t}return Object(Ke.k)(t).length?Object(Ke.n)(t,(function(t,e){return t?n.getStateNode(e).resolve(t):rn})):this.initialStateValue||{};default:return t||rn}},t.prototype.getResolvedPath=function(t){if(on(t)){var e=this.machine.idMap[t.slice("#".length)];if(!e)throw new Error("Unable to find state node '"+t+"'");return e.path}return Object(Ke.A)(t,this.delimiter)},Object.defineProperty(t.prototype,"initialStateValue",{get:function(){var t,e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;if("parallel"===this.type)e=Object(Ke.m)(this.states,(function(t){return t.initialStateValue||rn}),(function(t){return!("history"===t.type)}));else if(void 0!==this.initial){if(!this.states[this.initial])throw new Error("Initial state '"+this.initial+"' not found on '"+this.key+"'");e=Object(Qe.g)(this.states[this.initial])?this.initial:((t={})[this.initial]=this.states[this.initial].initialStateValue,t)}return this.__cache.initialStateValue=e,this.__cache.initialStateValue},enumerable:!0,configurable:!0}),t.prototype.getInitialState=function(t,e){var n=this.getStateNodes(t);return this.resolveTransition({configuration:n,entrySet:n,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,void 0,e)},Object.defineProperty(t.prototype,"initialState",{get:function(){this._init();var t=this.initialStateValue;if(!t)throw new Error("Cannot retrieve initial state from simple state '"+this.id+"'.");return this.getInitialState(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){var t;if("history"===this.type){var e=this.config;t=Object(Ke.j)(e.target)&&on(e.target)?Object(Ke.t)(this.machine.getStateNodeById(e.target).path.slice(this.path.length-1)):e.target}return t},enumerable:!0,configurable:!0}),t.prototype.getRelativeStateNodes=function(t,e,n){return void 0===n&&(n=!0),n?"history"===t.type?t.resolveHistory(e):t.initialStateNodes:[t]},Object.defineProperty(t.prototype,"initialStateNodes",{get:function(){var t=this;if(Object(Qe.g)(this))return[this];if("compound"===this.type&&!this.initial)return We.a||Object(Ke.H)(!1,"Compound state node '"+this.id+"' has no initial state."),[this];var e=Object(Ke.B)(this.initialStateValue);return Object(Ke.b)(e.map((function(e){return t.getFromRelativePath(e)})))},enumerable:!0,configurable:!0}),t.prototype.getFromRelativePath=function(t){if(!t.length)return[this];var e=Object(Je.b)(t),n=e[0],r=e.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '"+n+"' from node with no states");var i=this.getStateNode(n);if("history"===i.type)return i.resolveHistory();if(!this.states[n])throw new Error("Child state '"+n+"' does not exist on '"+this.id+"'");return this.states[n].getFromRelativePath(r)},t.prototype.historyValue=function(t){if(Object(Ke.k)(this.states).length)return{current:t||this.initialStateValue,states:Object(Ke.m)(this.states,(function(e,n){if(!t)return e.historyValue();var r=Object(Ke.j)(t)?void 0:t[n];return e.historyValue(r||e.initialStateValue)}),(function(t){return!t.history}))}},t.prototype.resolveHistory=function(t){var e=this;if("history"!==this.type)return[this];var n=this.parent;if(!t){var r=this.target;return r?Object(Ke.b)(Object(Ke.B)(r).map((function(t){return n.getFromRelativePath(t)}))):n.initialStateNodes}var i=Object(Ke.p)(n.path,"states")(t).current;return Object(Ke.j)(i)?[n.getStateNode(i)]:Object(Ke.b)(Object(Ke.B)(i).map((function(t){return"deep"===e.history?n.getFromRelativePath(t):[n.states[t[0]]]})))},Object.defineProperty(t.prototype,"stateIds",{get:function(){var t=this,e=Object(Ke.b)(Object(Ke.k)(this.states).map((function(e){return t.states[e].stateIds})));return[this.id].concat(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){var t,e,n,r;if(this.__cache.events)return this.__cache.events;var i=this.states,o=new Set(this.ownEvents);if(i)try{for(var a=Object(Je.e)(Object(Ke.k)(i)),s=a.next();!s.done;s=a.next()){var c=i[s.value];if(c.states)try{for(var u=(n=void 0,Object(Je.e)(c.events)),l=u.next();!l.done;l=u.next()){var f=l.value;o.add(""+f)}}catch(t){n={error:t}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return this.__cache.events=Array.from(o)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ownEvents",{get:function(){var t=new Set(this.transitions.filter((function(t){return!(!t.target&&!t.actions.length&&t.internal)})).map((function(t){return t.eventType})));return Array.from(t)},enumerable:!0,configurable:!0}),t.prototype.resolveTarget=function(t){var e=this;if(void 0!==t)return t.map((function(t){if(!Object(Ke.j)(t))return t;var n=t[0]===e.delimiter;if(n&&!e.parent)return e.getStateNodeByPath(t.slice(1));var r=n?e.key+t:t;if(!e.parent)return e.getStateNodeByPath(r);try{return e.parent.getStateNodeByPath(r)}catch(t){throw new Error("Invalid transition definition for state node '"+e.id+"':\n"+t.message)}}))},t.prototype.formatTransition=function(t){var e=this,n=Object(Ke.q)(t.target),r="internal"in t?t.internal:!n||n.some((function(t){return Object(Ke.j)(t)&&t[0]===e.delimiter})),i=this.machine.options.guards,o=this.resolveTarget(n),a=Object(Je.a)(Object(Je.a)({},t),{actions:Object(jt.o)(Object(Ke.w)(t.actions)),cond:Object(Ke.y)(t.cond,i),target:o,source:this,internal:r,eventType:t.event,toJSON:function(){return Object(Je.a)(Object(Je.a)({},a),{target:a.target?a.target.map((function(t){return"#"+t.id})):void 0,source:"#{this.id}"})}});return a},t.prototype.formatTransitions=function(){var t,e,n,r=this;if(this.config.on)if(Array.isArray(this.config.on))n=this.config.on;else{var i=this.config.on,o=i["*"],a=void 0===o?[]:o,s=Object(Je.c)(i,["*"]);n=Object(Ke.b)(Object(Ke.k)(s).map((function(t){var e=Object(Ke.D)(t,s[t]);return We.a||function(t,e,n){var r=n.slice(0,-1).some((function(t){return!("cond"in t)&&!("in"in t)&&(Object(Ke.j)(t.target)||Object(Ke.g)(t.target))})),i=""===e?"the transient event":"event '"+e+"'";Object(Ke.H)(!r,"One or more transitions for "+i+" on state '"+t.id+"' are unreachable. Make sure that the default transition is the last one defined.")}(r,t,e),e})).concat(Object(Ke.D)("*",a)))}else n=[];var c=this.config.onDone?Object(Ke.D)(String(Object(jt.d)(this.id)),this.config.onDone):[];We.a||Object(Ke.H)(!(this.config.onDone&&!this.parent),'Root nodes cannot have an ".onDone" transition. Please check the config of "'+this.id+'".');var u=Object(Ke.b)(this.invoke.map((function(t){var e=[];return t.onDone&&e.push.apply(e,Object(Je.d)(Object(Ke.D)(String(Object(jt.e)(t.id)),t.onDone))),t.onError&&e.push.apply(e,Object(Je.d)(Object(Ke.D)(String(Object(jt.f)(t.id)),t.onError))),e}))),l=this.after,f=Object(Ke.b)(Object(Je.d)(c,u,n).map((function(t){return Object(Ke.w)(t).map((function(t){return r.formatTransition(t)}))})));try{for(var h=Object(Je.e)(l),d=h.next();!d.done;d=h.next()){var p=d.value;f.push(p)}}catch(e){t={error:e}}finally{try{d&&!d.done&&(e=h.return)&&e.call(h)}finally{if(t)throw t.error}}return f},t}();let sn=Object(jt.b)(t=>{let e={...t.documents},n=Object.keys(e).map(t=>parseInt(t)),r=Math.max(...n)+1,i=new be({0:{text:"TODO"}},ye({root:[0]},null));e[r]={id:r,name:"New document",tree:i};let o=[...t.displayDocs];return o.push(r),{currentDocId:r,docCursorEntryId:null,docCursorColId:0,docTitle:"New document",documents:e,displayDocs:o}}),cn=Object(jt.b)(t=>{let e=t.documents[t.currentDocId].tree;return{docCursorEntryId:e.hasEntryAbove(t.docCursorEntryId)?e.getEntryIdAboveWithCollapse(t.docCursorEntryId):t.docCursorEntryId}}),un=Object(jt.b)(t=>{let e=t.documents[t.currentDocId].tree;return{docCursorEntryId:e.hasEntryBelow(t.docCursorEntryId)?e.getEntryIdBelowWithCollapse(t.docCursorEntryId):t.docCursorEntryId}}),ln=Object(jt.b)(t=>{let e=t.currentDocId,n=t.docCursorEntryId,r={...t.documents},i=r[e],o=i.tree;if(o.getEntryItem(n).value.hasChildren()&&o.getEntryDisplayState(n)===Ee.EXPANDED){let t=new be(o.getEntries(),o.getRoot());return i.tree=t,t.setEntryDisplayState(n,Ee.COLLAPSED),{documents:r}}return{}}),fn=Object(jt.b)(t=>{let e=t.currentDocId,n=t.docCursorEntryId,r={...t.documents},i=r[e],o=i.tree;if(o.getEntryItem(n).value.hasChildren()&&o.getEntryDisplayState(n)===Ee.COLLAPSED){let t=new be(o.getEntries(),o.getRoot());return i.tree=t,t.setEntryDisplayState(n,Ee.EXPANDED),{documents:r}}return{}}),hn=Object(jt.b)(t=>{let e=t.currentDocId,n=t.docCursorEntryId,r=t.docCursorColId,i={...t.documents},o=i[e],a=o.tree,s=a.getEntryText(n),c=a.getParentId(n),u=new be(a.getEntries(),a.getRoot());if(o.tree=u,a.getEntryDisplayState(n)===Ee.COLLAPSED&&r===s.length){return{docCursorEntryId:u.insertEntryBelow(n,c,""),docCursorColId:0,documents:i}}let l=s.substring(0,r),f=s.substring(r,s.length);return u.setEntryText(n,f),u.insertEntryAbove(n,c,l),{docCursorColId:0,documents:i}}),dn=Object(jt.b)(t=>{let e=t.docCursorEntryId,n=t.currentDocId,r={...t.documents},i=r[n].tree,o=i.getEntryItem(e);if(i.hasPrevSibling(e)){let t=i.getPrevSiblingNode(e);o.detach(),t.appendChildItem(o);let n=t.getId();o.value.setParentId(n)}return{documents:r}}),pn=Object(jt.b)(t=>{let e=t.docCursorEntryId,n=t.currentDocId,r={...t.documents},i=r[n].tree,o=i.getEntryItem(e);if(o.value.hasParent()){let t=i.getEntryItem(o.value.getParentId());o.detach(),t.append(o);let e=t.value.getParentId();o.value.setParentId(e)}return{documents:r}});var yn=(t,e,n,r,i,o,a,s)=>function(t,e,n){void 0===n&&(n=t.context);var r="function"==typeof n?n():n;return new an(t,e,r)}({id:"flowiki",initial:"flowiki",context:t,states:{flowiki:{on:{NAVIGATE:{target:"flowiki.document",actions:e},GO_HOME:{target:"flowiki.top"},IMPORT_DOCS:{target:"flowiki.top",actions:n}},...{initial:"top",states:{top:{on:{CREATE_DOC:{target:["document.docTitle.editing"],actions:sn}}},document:{on:{UP:{actions:cn},DOWN:{actions:un},COLLAPSE_ENTRY:{actions:ln},EXPAND_ENTRY:{actions:fn},SPLIT_ENTRY:{actions:hn},ENTRY_BACKSPACE:{actions:s},INDENT:{actions:dn},DEDENT:{actions:pn},SAVE_DOC_ENTRY:{actions:i},SAVE_FULL_CURSOR:{actions:o},SAVE_CURSOR_COL_ID:{actions:a}},type:"parallel",...{states:{docTitle:{on:{},initial:"displaying",states:{editing:{on:{SAVE_DOC_NAME:{target:"displaying",actions:r},CANCEL_EDITING_NAME:{target:"displaying"}}},displaying:{on:{START_EDITING_NAME:{target:"editing"}}}}}}}}}}}}});const vn=[];function gn(t,e){return{subscribe:mn(t,e).subscribe}}function mn(t,e=r){let n;const i=[];function o(e){if(u(t,e)&&(t=e,n)){const e=!vn.length;for(let e=0;e<i.length;e+=1){const n=i[e];n[1](),vn.push(n,t)}if(e){for(let t=0;t<vn.length;t+=2)vn[t][0](vn[t+1]);vn.length=0}}}return{set:o,update:function(e){o(e(t))},subscribe:function(a,s=r){const c=[a,s];return i.push(c),1===i.length&&(n=e(o)||r),a(t),()=>{const t=i.indexOf(c);-1!==t&&i.splice(t,1),0===i.length&&(n(),n=null)}}}}var bn=n(31);n(28);function En(t){let e,n,r;const i=new ze({props:{tree:t[3],flowyTreeNode:t[4],docCursorEntryId:t[0].context.docCursorEntryId,docCursorColId:t[0].context.docCursorColId,docTitle:t[0].context.docTitle,docIsEditingName:t[5],handleStartEditingDocName:t[10],handleCancelEditingDocName:t[11],handleGoUp:t[16],handleGoDown:t[17],handleCollapseEntry:t[19],handleExpandEntry:t[20],handleSplitEntry:t[21],handleEntryBackspace:t[18],handleIndent:t[22],handleDedent:t[23],handleSaveCursorColId:t[15],handleSaveDocName:t[12],handleSaveDocEntry:t[13],handleSaveFullCursor:t[14]}});return{c(){e=m("header"),e.innerHTML='<span class="home svelte-1oteck3"><a href="#/">🏠</a></span>\n    &gt;\n  ',n=w(),Q(i.$$.fragment),x(e,"class","svelte-1oteck3")},m(t,o){y(t,e,o),y(t,n,o),tt(i,t,o),r=!0},p(t,e){const n={};8&e[0]&&(n.tree=t[3]),16&e[0]&&(n.flowyTreeNode=t[4]),1&e[0]&&(n.docCursorEntryId=t[0].context.docCursorEntryId),1&e[0]&&(n.docCursorColId=t[0].context.docCursorColId),1&e[0]&&(n.docTitle=t[0].context.docTitle),32&e[0]&&(n.docIsEditingName=t[5]),i.$set(n)},i(t){r||(X(i.$$.fragment,t),r=!0)},o(t){W(i.$$.fragment,t),r=!1},d(t){t&&v(e),t&&v(n),et(i,t)}}}function wn(t){let e,n,r;const i=new He({props:{displayDocs:t[2],createDoc:t[7]}});return{c(){e=m("header"),e.innerHTML='<span class="home svelte-1oteck3">🏠</span>',n=w(),Q(i.$$.fragment),x(e,"class","svelte-1oteck3")},m(t,o){y(t,e,o),y(t,n,o),tt(i,t,o),r=!0},p(t,e){const n={};4&e[0]&&(n.displayDocs=t[2]),i.$set(n)},i(t){r||(X(i.$$.fragment,t),r=!0)},o(t){W(i.$$.fragment,t),r=!1},d(t){t&&v(e),t&&v(n),et(i,t)}}}function On(t){let e,n,r,i,o,a,c,u,l,f,h,d,g;const b=[wn,En],E=[];function O(t,e){return t[1]?0:1}e=O(t),n=E[e]=b[e](t);const S=new qt({props:{data:Wt,scale:"1"}});return{c(){n.c(),r=w(),i=m("div"),Q(S.$$.fragment),o=w(),a=m("button"),a.textContent="export",c=w(),u=m("button"),u.textContent="import",l=w(),f=m("input"),x(a,"class","svelte-1oteck3"),x(u,"class","svelte-1oteck3"),x(i,"id","actions-bar"),x(i,"class","svelte-1oteck3"),x(f,"id","import-docs"),x(f,"type","file"),x(f,"class","svelte-1oteck3")},m(n,s){E[e].m(n,s),y(n,r,s),y(n,i,s),tt(S,i,null),p(i,o),p(i,a),p(i,c),p(i,u),y(n,l,s),y(n,f,s),h=!0,d||(g=[j(a,"click",t[8]),j(u,"click",jn),j(f,"change",t[9])],d=!0)},p(t,i){let o=e;e=O(t),e===o?E[e].p(t,i):(q(),W(E[o],1,1,()=>{E[o]=null}),J(),n=E[e],n||(n=E[e]=b[e](t),n.c()),X(n,1),n.m(r.parentNode,r))},i(t){h||(X(n),X(S.$$.fragment,t),h=!0)},o(t){W(n),W(S.$$.fragment,t),h=!1},d(t){E[e].d(t),t&&v(r),t&&v(i),et(S),t&&v(l),t&&v(f),d=!1,s(g)}}}function jn(){document.getElementById("import-docs").click()}function xn(t,e,n){let r;var i;let o,a,s,c,u,f;i=()=>{h.listen((t,e)=>{"REPLACE"!==e&&t.pathname.startsWith("/")&&C(t.pathname)}),document.addEventListener("selectionchange",()=>{let t=document.getSelection();const e=function(t){let e=t;for(;null!=e&&(null==e.className||!e.className.includes("rendered-entry"));)e=e.parentNode;return e}(t.anchorNode);if(null==e)return;let n=function t(e,n,r){if(e.nodeType!==Node.TEXT_NODE&&e.nodeType!==Node.ELEMENT_NODE)return null;if(e.nodeType===Node.TEXT_NODE)return e===n.anchorNode?{found:!0,pos:r+n.anchorOffset}:{found:!1,pos:r+e.textContent.length};if("mjx-container"===e.localName)return{found:!1,pos:r+2+e.dataset.original.length};"strong"===e.localName||"em"===e.localName?r+=2:"a"===e.localName&&("internal"===e.dataset.markupLinkType?r+=2:"auto"!==e.dataset.markupLinkType&&(r+=1));let i=e.childNodes;for(var o=0;o<i.length;++o){let e=t(i[o],n,r);if(e.found)return e;r=e.pos}return"strong"===e.localName||"em"===e.localName?r+=2:"a"===e.localName&&("internal"===e.dataset.markupLinkType?r+=2:"auto"!==e.dataset.markupLinkType&&(r+=e.getAttribute("href").length+3)),{found:!1,pos:r}}(e,t,0).pos;_(parseInt(e.dataset.entryId),n)}),location.hash.startsWith("#/")&&C(location.hash.substring(1))},$().$$.on_mount.push(i);const h=Ot();let d=Object(jt.b)(t=>{let e=o,n=t.documents[e];return{currentDocId:e,docCursorEntryId:n.tree.getTopEntryId(),docTitle:n.name}}),p=Object(jt.b)(t=>je(f)),y=Object(jt.b)(t=>{let e={...t.documents},n=t.currentDocId;return e[n]={...t.documents[n]},e[n].name=a,{documents:e,docTitle:a}}),v=Object(jt.b)(t=>{let e={...t.documents},n=t.currentDocId,r=t.docCursorEntryId;e[n]={...t.documents[n]};let i=new be(e[n].tree.getEntries(),e[n].tree.getRoot());return e[n].tree=i,i.setEntryText(r,s),{documents:e,docCursorColId:u}}),g=Object(jt.b)(t=>({docCursorEntryId:c,docCursorColId:u})),m=Object(jt.b)(t=>({docCursorColId:u})),b=Object(jt.b)(t=>{let e={...t.documents},n=e[t.currentDocId];n.tree=new be(n.tree.getEntries(),n.tree.getRoot());let r=t.docCursorColId;if(r>0){let i=n.tree.getEntryText(t.docCursorEntryId),o=i.length,a=Math.min(r,o),s=i.substring(0,a-1)+i.substring(a);return n.tree.setEntryText(t.docCursorEntryId,s),u=a-1,{docCursorColId:a-1,documents:e}}let i=t.documents[t.currentDocId].tree,o=t.docCursorEntryId;if(i.hasEntryAbove(o)){let e,r=i.getEntryItem(o),a=r.prev;if(r.value.hasChildren()&&(null==a||a.value.hasChildren()))return{};e={...t.documents};let s=e[t.currentDocId];n.tree=new be(s.tree.getEntries(),s.tree.getRoot());let c,l,f=s.tree.getEntryText(o);if(r.value.hasChildren()){let t=i.getEntryIdAbove(o),e=s.tree.getEntryText(t);s.tree.setEntryText(o,e+f),s.tree.removeEntry(t),c=o,l=e.length}else{let t=i.getEntryIdAboveWithCollapse(o),e=s.tree.getEntryText(t);s.tree.setEntryText(t,e+f),s.tree.removeEntry(o),c=t,l=e.length}return u=l,{docCursorEntryId:c,docCursorColId:l,documents:e}}}),E=new Oe(new qe),w=je(E.getDocuments()),O=yn(w,d,p,y,v,g,m,b);const{state:j,send:x}=function(t,e){const n=Object(bn.a)(t,e);return{state:gn(n.initialState,t=>(n.onTransition(e=>{console.log("-------------------"),console.log("transitioning to context = ",e.context,", state = ",e.value),t(e)}),n.start(),()=>{n.stop()})),send:n.send}}(O);var S,I;function C(t){if("/"===t)return void x("GO_HOME");if("/create"===t)return void x("CREATE_DOC");if(t.startsWith("/page/")){let e=t.substring(6),n=!1;return Object.entries(r.context.documents).forEach(([t,r])=>{r.name===e&&(n=!0,o=parseInt(t),x("NAVIGATE"),h.replace("/"+t))}),void(n||h.go(-1))}let e=t.substring(1),n=parseInt(e);isNaN(n)?x("GO_HOME"):(o=n,x("NAVIGATE"))}function _(t,e){c=t,u=e,x("SAVE_FULL_CURSOR")}let A,D,T,k,N;return S=j,I=t=>n(0,r=t),t.$$.on_destroy.push(l(S,I)),t.$$.update=()=>{1&t.$$.dirty[0]&&E.saveDocuments(r.context.documents),1&t.$$.dirty[0]&&n(1,A=r.matches("flowiki.top")),1&t.$$.dirty[0]&&n(2,D=r.context.displayDocs.map(t=>r.context.documents[t])),1&t.$$.dirty[0]&&n(3,T=null!==r.context.currentDocId?r.context.documents[r.context.currentDocId].tree:null),8&t.$$.dirty[0]&&n(4,k=T&&T.getRoot()||null),33&t.$$.dirty[0]&&n(5,N=(()=>{let t=r.value.flowiki;return(e=t)!==Object(e)?N:"editing"===t.document.docTitle;var e})()),2&t.$$.dirty[0]&&A&&"/"!==h.location.pathname&&h.replace("/"),1&t.$$.dirty[0]&&"/create"===h.location.pathname&&"number"==typeof r.context.currentDocId&&h.replace("/"+r.context.currentDocId)},[r,A,D,T,k,N,j,function(){h.push("/create")},function(){let t=E.getDocumentsString();location.assign("data:application/octet-stream;base64,"+btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,(function(t,e){return String.fromCharCode("0x"+e)}))))},function(t){console.log(" ## handleDocsImport, ev = ",t),console.log(" ## handleDocsImport, this.files = ",this,this.files);const e=this.files;if(e.length>1)return void console.log("TODO: multiple files uploaded. show an error message of some kind? is this even possible?");e[0].arrayBuffer().then(t=>{console.log(" ## handleDocsImport, the array buffer = ",t);let e=String.fromCharCode.apply(null,new Uint8Array(t));console.log(" ## handleFIleUpload, docsStr = ",e);try{let t=JSON.parse(e);Object.entries(t).forEach(([e,n])=>{t[e]=xe(n.id,n.name,n.tree.entries,n.tree.node)}),f=t,x("IMPORT_DOCS")}catch(t){console.log("TODO: file is not a valid JSON object, err = ",t)}})},function(){x("START_EDITING_NAME")},function(){x("CANCEL_EDITING_NAME")},function(t){a=t,x("SAVE_DOC_NAME")},function(t,e){s=t,u=e,x("SAVE_DOC_ENTRY")},_,function(t){u=t,x("SAVE_CURSOR_COL_ID")},function(){x("UP")},function(){x("DOWN")},function(){x("ENTRY_BACKSPACE")},function(){x("COLLAPSE_ENTRY")},function(){x("EXPAND_ENTRY")},function(){x("SPLIT_ENTRY")},function(){x("INDENT")},function(){x("DEDENT")}]}const Sn=new class extends rt{constructor(t){super(),nt(this,t,xn,On,u,{},[-1,-1])}}({target:document.body,props:{}});window.app=Sn;e.default=Sn},,function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return b}));var r,i=n(1),o=n(6),a=n(0),s=n(3),c=n(7),u=n(2),l=n(5),f=n(8),h=n(10),d=n(14),p=n(12),y=n(17),v={sync:!1,autoForward:!1},g=function(){var t=[];return function(e,n){e&&t.push(e);var r=n(e||t[t.length-1]);return e&&t.pop(),r}}();!function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"}(r||(r={}));var m=function(){function e(t,n){var c=this;void 0===n&&(n=e.defaultOptions),this.machine=t,this.scheduler=new d.a,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this._status=r.NotStarted,this.children=new Map,this.forwardTo=new Set,this.init=this.start,this.send=function(t,e){if(Object(a.d)(t))return c.batch(t),c.state;var n=Object(a.z)(Object(a.x)(t,e));if(c._status===r.Stopped)return o.a||Object(a.H)(!1,'Event "'+n.name+'" was sent to stopped service "'+c.machine.id+'". This service has already reached its final state, and will not transition.\nEvent: '+JSON.stringify(n.data)),c.state;if(c._status===r.NotStarted&&c.options.deferEvents)o.a||Object(a.H)(!1,'Event "'+n.name+'" was sent to uninitialized service "'+c.machine.id+'" and is deferred. Make sure .start() is called for this service.\nEvent: '+JSON.stringify(n.data));else if(c._status!==r.Running)throw new Error('Event "'+n.name+'" was sent to uninitialized service "'+c.machine.id+'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.\nEvent: '+JSON.stringify(n.data));return c.scheduler.schedule((function(){c.forward(n);var t=c.nextState(n);c.update(t,n)})),c._state},this.sendTo=function(t,e){var n=c.parent&&(e===s.b.Parent||c.parent.id===e),r=n?c.parent:Object(h.b)(e)?e:c.children.get(e)||p.a.get(e);if(r)"machine"in r?r.send(Object(i.a)(Object(i.a)({},t),{name:t.name===u.d?""+Object(l.f)(c.id):t.name,origin:c.sessionId})):r.send(t.data);else{if(!n)throw new Error("Unable to send event to child '"+e+"' from service '"+c.id+"'.");o.a||Object(a.H)(!1,"Service '"+c.id+"' has no parent: unable to send event "+t.type)}};var f=Object(i.a)(Object(i.a)({},e.defaultOptions),n),y=f.clock,v=f.logger,g=f.parent,m=f.id,b=void 0!==m?m:t.id;this.id=b,this.logger=v,this.clock=y,this.parent=g,this.options=f,this.scheduler=new d.a({deferEvents:this.options.deferEvents}),this.sessionId=p.a.bookId()}return Object.defineProperty(e.prototype,"initialState",{get:function(){var t=this;return this._initialState?this._initialState:g(this,(function(){return t._initialState=t.machine.initialState,t._initialState}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return o.a||Object(a.H)(this._status!==r.NotStarted,"Attempted to read state from uninitialized service '"+this.id+"'. Make sure the service is started first."),this._state},enumerable:!0,configurable:!0}),e.prototype.execute=function(t,e){var n,r;try{for(var o=Object(i.e)(t.actions),a=o.next();!a.done;a=o.next()){var s=a.value;this.exec(s,t,e)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e.prototype.update=function(t,e){var n,r,o,s,u,f,h,d,p=this;if(t._sessionid=this.sessionId,this._state=t,this.options.execute&&this.execute(this.state),this.devTools&&this.devTools.send(e.data,t),t.event)try{for(var y=Object(i.e)(this.eventListeners),v=y.next();!v.done;v=y.next()){(0,v.value)(t.event)}}catch(t){n={error:t}}finally{try{v&&!v.done&&(r=y.return)&&r.call(y)}finally{if(n)throw n.error}}try{for(var g=Object(i.e)(this.listeners),m=g.next();!m.done;m=g.next()){(0,m.value)(t,t.event)}}catch(t){o={error:t}}finally{try{m&&!m.done&&(s=g.return)&&s.call(g)}finally{if(o)throw o.error}}try{for(var b=Object(i.e)(this.contextListeners),E=b.next();!E.done;E=b.next()){(0,E.value)(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(t){u={error:t}}finally{try{E&&!E.done&&(f=b.return)&&f.call(b)}finally{if(u)throw u.error}}var w=Object(c.f)(t.configuration||[],this.machine);if(this.state.configuration&&w){var O=t.configuration.find((function(t){return"final"===t.type&&t.parent===p.machine})),j=O&&O.data?Object(a.l)(O.data,t.context,e):void 0;try{for(var x=Object(i.e)(this.doneListeners),S=x.next();!S.done;S=x.next()){(0,S.value)(Object(l.e)(this.id,j))}}catch(t){h={error:t}}finally{try{S&&!S.done&&(d=x.return)&&d.call(x)}finally{if(h)throw h.error}}this.stop()}},e.prototype.onTransition=function(t){return this.listeners.add(t),this._status===r.Running&&t(this.state,this.state.event),this},e.prototype.subscribe=function(t,e,n){var i,o=this;if(!t)return{unsubscribe:function(){}};var a=n;return"function"==typeof t?i=t:(i=t.next.bind(t),a=t.complete.bind(t)),this.listeners.add(i),this._status===r.Running&&i(this.state),a&&this.onDone(a),{unsubscribe:function(){i&&o.listeners.delete(i),a&&o.doneListeners.delete(a)}}},e.prototype.onEvent=function(t){return this.eventListeners.add(t),this},e.prototype.onSend=function(t){return this.sendListeners.add(t),this},e.prototype.onChange=function(t){return this.contextListeners.add(t),this},e.prototype.onStop=function(t){return this.stopListeners.add(t),this},e.prototype.onDone=function(t){return this.doneListeners.add(t),this},e.prototype.off=function(t){return this.listeners.delete(t),this.eventListeners.delete(t),this.sendListeners.delete(t),this.stopListeners.delete(t),this.doneListeners.delete(t),this.contextListeners.delete(t),this},e.prototype.start=function(t){var e=this;if(this._status===r.Running)return this;p.a.register(this.sessionId,this),this.initialized=!0,this._status=r.Running;var n=void 0===t?this.initialState:g(this,(function(){return Object(f.c)(t)?e.machine.resolveState(t):e.machine.resolveState(f.a.from(t,e.machine.context))}));return this.options.devTools&&this.attachDev(),this.scheduler.initialize((function(){e.update(n,l.h)})),this},e.prototype.stop=function(){var t,e,n,o,s,c,u,l,f,h;try{for(var d=Object(i.e)(this.listeners),y=d.next();!y.done;y=d.next()){var v=y.value;this.listeners.delete(v)}}catch(e){t={error:e}}finally{try{y&&!y.done&&(e=d.return)&&e.call(d)}finally{if(t)throw t.error}}try{for(var g=Object(i.e)(this.stopListeners),m=g.next();!m.done;m=g.next()){(v=m.value)(),this.stopListeners.delete(v)}}catch(t){n={error:t}}finally{try{m&&!m.done&&(o=g.return)&&o.call(g)}finally{if(n)throw n.error}}try{for(var b=Object(i.e)(this.contextListeners),E=b.next();!E.done;E=b.next()){v=E.value;this.contextListeners.delete(v)}}catch(t){s={error:t}}finally{try{E&&!E.done&&(c=b.return)&&c.call(b)}finally{if(s)throw s.error}}try{for(var w=Object(i.e)(this.doneListeners),O=w.next();!O.done;O=w.next()){v=O.value;this.doneListeners.delete(v)}}catch(t){u={error:t}}finally{try{O&&!O.done&&(l=w.return)&&l.call(w)}finally{if(u)throw u.error}}this.children.forEach((function(t){Object(a.f)(t.stop)&&t.stop()}));try{for(var j=Object(i.e)(Object(a.k)(this.delayedEventsMap)),x=j.next();!x.done;x=j.next()){var S=x.value;this.clock.clearTimeout(this.delayedEventsMap[S])}}catch(t){f={error:t}}finally{try{x&&!x.done&&(h=j.return)&&h.call(j)}finally{if(f)throw f.error}}return this.scheduler.clear(),this.initialized=!1,this._status=r.Stopped,p.a.free(this.sessionId),this},e.prototype.batch=function(t){var e=this;if(this._status===r.NotStarted&&this.options.deferEvents)o.a||Object(a.H)(!1,t.length+' event(s) were sent to uninitialized service "'+this.machine.id+'" and are deferred. Make sure .start() is called for this service.\nEvent: '+JSON.stringify(event));else if(this._status!==r.Running)throw new Error(t.length+' event(s) were sent to uninitialized service "'+this.machine.id+'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.');this.scheduler.schedule((function(){var n,r,o=e.state,s=!1,c=[],u=function(t){var n=Object(a.z)(t);e.forward(n),o=g(e,(function(){return e.machine.transition(o,n)})),c.push.apply(c,Object(i.d)(o.actions.map((function(t){return Object(f.b)(t,o)})))),s=s||!!o.changed};try{for(var l=Object(i.e)(t),h=l.next();!h.done;h=l.next()){u(h.value)}}catch(t){n={error:t}}finally{try{h&&!h.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}o.changed=s,o.actions=c,e.update(o,Object(a.z)(t[t.length-1]))}))},e.prototype.sender=function(t){return this.send.bind(this,t)},e.prototype.nextState=function(t){var e=this,n=Object(a.z)(t);if(0===n.name.indexOf(u.e)&&!this.state.nextEvents.some((function(t){return 0===t.indexOf(u.e)})))throw n.data.data;return g(this,(function(){return e.machine.transition(e.state,n)}))},e.prototype.forward=function(t){var e,n;try{for(var r=Object(i.e)(this.forwardTo),o=r.next();!o.done;o=r.next()){var a=o.value,s=this.children.get(a);if(!s)throw new Error("Unable to forward event '"+t+"' from interpreter '"+this.id+"' to nonexistant child '"+a+"'.");s.send(t)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},e.prototype.defer=function(t){var e=this;this.delayedEventsMap[t.id]=this.clock.setTimeout((function(){t.to?e.sendTo(t._event,t.to):e.send(t._event)}),t.delay)},e.prototype.cancel=function(t){this.clock.clearTimeout(this.delayedEventsMap[t]),delete this.delayedEventsMap[t]},e.prototype.exec=function(t,e,n){void 0===n&&(n=this.machine.options.actions);var r=e.context,i=e._event,c=t.exec||Object(l.g)(t.type,n),f=Object(a.f)(c)?c:c?c.exec:t.exec;if(f)try{return f(r,i.data,{action:t,state:this.state,_event:i})}catch(t){throw this.parent&&this.parent.send({type:"xstate.error",data:t}),t}switch(t.type){case u.l:var h=t;if("number"==typeof h.delay)return void this.defer(h);h.to?this.sendTo(h._event,h.to):this.send(h._event);break;case u.b:this.cancel(t.sendId);break;case u.m:var d=t.activity;if(!this.state.activities[d.id||d.type])break;if(d.type===s.a.Invoke){var p=this.machine.options.services?this.machine.options.services[d.src]:void 0,y=d.id,v=d.data;o.a||Object(a.H)(!("forward"in d),"`forward` property is deprecated (found in invocation of '"+d.src+"' in in machine '"+this.machine.id+"'). Please use `autoForward` instead.");var g="autoForward"in d?d.autoForward:!!d.forward;if(!p)return void(o.a||Object(a.H)(!1,"No service found for invocation '"+d.src+"' in machine '"+this.machine.id+"'."));var m=Object(a.f)(p)?p(r,i.data):p;Object(a.i)(m)?this.state.children[y]=this.spawnPromise(Promise.resolve(m),y):Object(a.f)(m)?this.state.children[y]=this.spawnCallback(m,y):Object(a.h)(m)?this.state.children[y]=this.spawnObservable(m,y):Object(a.g)(m)&&(this.state.children[y]=this.spawnMachine(v?m.withContext(Object(a.l)(v,r,i)):m,{id:y,autoForward:g}))}else this.spawnActivity(d);break;case u.n:this.stopChild(t.activity.id);break;case u.h:var b=t.label,E=t.value;b?this.logger(b,E):this.logger(E);break;default:o.a||Object(a.H)(!1,"No implementation found for action type '"+t.type+"'")}},e.prototype.removeChild=function(t){this.children.delete(t),this.forwardTo.delete(t),delete this.state.children[t]},e.prototype.stopChild=function(t){var e=this.children.get(t);e&&(this.removeChild(t),Object(a.f)(e.stop)&&e.stop())},e.prototype.spawn=function(t,e,n){if(Object(a.i)(t))return this.spawnPromise(Promise.resolve(t),e);if(Object(a.f)(t))return this.spawnCallback(t,e);if(Object(h.b)(t))return this.spawnActor(t);if(Object(a.h)(t))return this.spawnObservable(t,e);if(Object(a.g)(t))return this.spawnMachine(t,Object(i.a)(Object(i.a)({},n),{id:e}));throw new Error('Unable to spawn entity "'+e+'" of type "'+typeof t+'".')},e.prototype.spawnMachine=function(t,n){var r=this;void 0===n&&(n={});var o=new e(t,Object(i.a)(Object(i.a)({},this.options),{parent:this,id:n.id||t.id})),s=Object(i.a)(Object(i.a)({},v),n);s.sync&&o.onTransition((function(t){r.send(u.o,{state:t,id:o.id})}));var c=o;return this.children.set(o.id,c),s.autoForward&&this.forwardTo.add(o.id),o.onDone((function(t){r.removeChild(o.id),r.send(Object(a.z)(t,{origin:o.id}))})).start(),c},e.prototype.spawnPromise=function(t,e){var n=this,r=!1;t.then((function(t){r||(n.removeChild(e),n.send(Object(a.z)(Object(l.e)(e,t),{origin:e})))}),(function(t){if(!r){n.removeChild(e);var i=Object(l.f)(e,t);try{n.send(Object(a.z)(i,{origin:e}))}catch(r){Object(a.u)(t,r,e),n.devTools&&n.devTools.send(i,n.state),n.machine.strict&&n.stop()}}}));var i={id:e,send:function(){},subscribe:function(e,n,r){var i=!1;return t.then((function(t){i||(e&&e(t),i||r&&r())}),(function(t){i||n(t)})),{unsubscribe:function(){return i=!0}}},stop:function(){r=!0},toJSON:function(){return{id:e}}};return this.children.set(e,i),i},e.prototype.spawnCallback=function(t,e){var n,r=this,i=!1,o=new Set,s=new Set;try{n=t((function(t){s.forEach((function(e){return e(t)})),i||r.send(t)}),(function(t){o.add(t)}))}catch(t){this.send(Object(l.f)(e,t))}if(Object(a.i)(n))return this.spawnPromise(n,e);var c={id:e,send:function(t){return o.forEach((function(e){return e(t)}))},subscribe:function(t){return s.add(t),{unsubscribe:function(){s.delete(t)}}},stop:function(){i=!0,Object(a.f)(n)&&n()},toJSON:function(){return{id:e}}};return this.children.set(e,c),c},e.prototype.spawnObservable=function(t,e){var n=this,r=t.subscribe((function(t){n.send(Object(a.z)(t,{origin:e}))}),(function(t){n.removeChild(e),n.send(Object(a.z)(Object(l.f)(e,t),{origin:e}))}),(function(){n.removeChild(e),n.send(Object(a.z)(Object(l.e)(e),{origin:e}))})),i={id:e,send:function(){},subscribe:function(e,n,r){return t.subscribe(e,n,r)},stop:function(){return r.unsubscribe()},toJSON:function(){return{id:e}}};return this.children.set(e,i),i},e.prototype.spawnActor=function(t){return this.children.set(t.id,t),t},e.prototype.spawnActivity=function(t){var e=this.machine.options&&this.machine.options.activities?this.machine.options.activities[t.type]:void 0;if(e){var n=e(this.state.context,t);this.spawnEffect(t.id,n)}else o.a||Object(a.H)(!1,"No implementation found for activity '"+t.type+"'")},e.prototype.spawnEffect=function(t,e){this.children.set(t,{id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:e||void 0,toJSON:function(){return{id:t}}})},e.prototype.attachDev=function(){if(this.options.devTools&&"undefined"!=typeof window){if(window.__REDUX_DEVTOOLS_EXTENSION__){var t="object"==typeof this.options.devTools?this.options.devTools:void 0;this.devTools=window.__REDUX_DEVTOOLS_EXTENSION__.connect(Object(i.a)(Object(i.a)({name:this.id,autoPause:!0,stateSanitizer:function(t){return{value:t.value,context:t.context,actions:t.actions}}},t),{features:Object(i.a)({jump:!1,skip:!1},t?t.features:void 0)}),this.machine),this.devTools.init(this.state)}Object(y.a)(this)}},e.prototype.toJSON=function(){return{id:this.id}},e.prototype[a.v]=function(){return this},e.defaultOptions=function(t){return{execute:!0,deferEvents:!0,clock:{setTimeout:function(e,n){return t.setTimeout.call(null,e,n)},clearTimeout:function(e){return t.clearTimeout.call(null,e)}},logger:t.console.log.bind(console),devTools:!1}}("undefined"==typeof window?t:window),e.interpret=b,e}();function b(t,e){return new m(t,e)}}).call(this,n(16))}]);