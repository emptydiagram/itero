var app=function(){"use strict";function e(){}function t(e,t){for(const n in t)e[n]=t[n];return e}function n(e){return e()}function r(){return Object.create(null)}function o(e){e.forEach(n)}function i(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function l(t,...n){if(null==t)return e;const r=t.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function s(e,t,n){e.$$.on_destroy.push(l(t,n))}function c(e,t,n,r){if(e){const o=u(e,t,n,r);return e[0](o)}}function u(e,n,r,o){return e[1]&&o?t(r.ctx.slice(),e[1](o(n))):r.ctx}function d(e,t,n,r,o,i,a){const l=function(e,t,n,r){if(e[2]&&r){const o=e[2](r(n));if(void 0===t.dirty)return o;if("object"==typeof o){const e=[],n=Math.max(t.dirty.length,o.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|o[r];return e}return t.dirty|o}return t.dirty}(t,r,o,i);if(l){const o=u(t,n,r,a);e.p(o,l)}}function h(e){return null==e?"":e}function f(e,t){e.appendChild(t)}function p(e,t,n){e.insertBefore(t,n||null)}function y(e){e.parentNode.removeChild(e)}function g(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function m(e){return document.createElement(e)}function v(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function E(e){return document.createTextNode(e)}function S(){return E(" ")}function w(){return E("")}function x(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function $(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function b(e,t){for(const n in t)$(e,n,t[n])}function k(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function C(e,t){e.value=null==t?"":t}function I(e,t,n){e.classList[n?"add":"remove"](t)}let D;function N(e){D=e}function L(){if(!D)throw new Error("Function called outside component initialization");return D}function j(e){L().$$.after_update.push(e)}function A(){const e=L();return(t,n)=>{const r=e.$$.callbacks[t];if(r){const o=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);r.slice().forEach(t=>{t.call(e,o)})}}}function B(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(e=>e(t))}const T=[],P=[],O=[],_=[],M=Promise.resolve();let z=!1;function U(){z||(z=!0,M.then(G))}function H(){return U(),M}function R(e){O.push(e)}let V=!1;const F=new Set;function G(){if(!V){V=!0;do{for(let e=0;e<T.length;e+=1){const t=T[e];N(t),W(t.$$)}for(T.length=0;P.length;)P.pop()();for(let e=0;e<O.length;e+=1){const t=O[e];F.has(t)||(F.add(t),t())}O.length=0}while(T.length);for(;_.length;)_.pop()();z=!1,V=!1,F.clear()}}function W(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(R)}}const q=new Set;let J;function K(){J={r:0,c:[],p:J}}function X(){J.r||o(J.c),J=J.p}function Z(e,t){e&&e.i&&(q.delete(e),e.i(t))}function Q(e,t,n,r){if(e&&e.o){if(q.has(e))return;q.add(e),J.c.push(()=>{q.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}function Y(e,t){const n={},r={},o={$$scope:1};let i=e.length;for(;i--;){const a=e[i],l=t[i];if(l){for(const e in a)e in l||(r[e]=1);for(const e in l)o[e]||(n[e]=l[e],o[e]=1);e[i]=l}else for(const e in a)o[e]=1}for(const e in r)e in n||(n[e]=void 0);return n}function ee(e){e&&e.c()}function te(e,t,r){const{fragment:a,on_mount:l,on_destroy:s,after_update:c}=e.$$;a&&a.m(t,r),R(()=>{const t=l.map(n).filter(i);s?s.push(...t):o(t),e.$$.on_mount=[]}),c.forEach(R)}function ne(e,t){const n=e.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function re(t,n,i,a,l,s,c=[-1]){const u=D;N(t);const d=n.props||{},h=t.$$={fragment:null,ctx:null,props:s,update:e,not_equal:l,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:r(),dirty:c};let f=!1;if(h.ctx=i?i(t,d,(e,n,...r)=>{const o=r.length?r[0]:n;return h.ctx&&l(h.ctx[e],h.ctx[e]=o)&&(h.bound[e]&&h.bound[e](o),f&&function(e,t){-1===e.$$.dirty[0]&&(T.push(e),U(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n}):[],h.update(),f=!0,o(h.before_update),h.fragment=!!a&&a(h.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);h.fragment&&h.fragment.l(e),e.forEach(y)}else h.fragment&&h.fragment.c();n.intro&&Z(t.$$.fragment),te(t,n.target,n.anchor),G()}N(u)}class oe{$destroy(){ne(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}function ie(n){let r,o,i=[{key:o="path-"+n[0]},n[1]],a={};for(let e=0;e<i.length;e+=1)a=t(a,i[e]);return{c(){r=v("path"),b(r,a)},m(e,t){p(e,r,t)},p(e,[t]){b(r,a=Y(i,[1&t&&o!==(o="path-"+e[0])&&{key:o},2&t&&e[1]]))},i:e,o:e,d(e){e&&y(r)}}}function ae(e,t,n){let{id:r=""}=t,{data:o={}}=t;return e.$set=e=>{"id"in e&&n(0,r=e.id),"data"in e&&n(1,o=e.data)},[r,o]}class le extends oe{constructor(e){super(),re(this,e,ae,ie,a,{id:0,data:1})}}function se(n){let r,o,i=[{key:o="polygon-"+n[0]},n[1]],a={};for(let e=0;e<i.length;e+=1)a=t(a,i[e]);return{c(){r=v("polygon"),b(r,a)},m(e,t){p(e,r,t)},p(e,[t]){b(r,a=Y(i,[1&t&&o!==(o="polygon-"+e[0])&&{key:o},2&t&&e[1]]))},i:e,o:e,d(e){e&&y(r)}}}function ce(e,t,n){let{id:r=""}=t,{data:o={}}=t;return e.$set=e=>{"id"in e&&n(0,r=e.id),"data"in e&&n(1,o=e.data)},[r,o]}class ue extends oe{constructor(e){super(),re(this,e,ce,se,a,{id:0,data:1})}}function de(t){let n;return{c(){n=v("g")},m(e,r){p(e,n,r),n.innerHTML=t[0]},p(e,[t]){1&t&&(n.innerHTML=e[0])},i:e,o:e,d(e){e&&y(n)}}}function he(e,t,n){let r,o=870711;let{data:i}=t;function a(e){if(!e||!e.raw)return null;let t=e.raw;const n={};return t=t.replace(/\s(?:xml:)?id=["']?([^"')\s]+)/g,(e,t)=>{const r=(o+=1,"fa-"+o.toString(16));return n[t]=r,` id="${r}"`}),t=t.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,(e,t,r,o)=>{const i=t||o;return i&&n[i]?"#"+n[i]:e}),t}return e.$set=e=>{"data"in e&&n(1,i=e.data)},e.$$.update=()=>{2&e.$$.dirty&&n(0,r=a(i))},[r,i]}class fe extends oe{constructor(e){super(),re(this,e,he,de,a,{data:1})}}function pe(e){let t,n,r,o;const i=e[13].default,a=c(i,e,e[12],null);return{c(){t=v("svg"),a&&a.c(),$(t,"x",e[8]),$(t,"version","1.1"),$(t,"class",n="fa-icon "+e[0]+" svelte-1dof0an"),$(t,"y",e[9]),$(t,"width",e[1]),$(t,"height",e[2]),$(t,"aria-label",e[11]),$(t,"role",r=e[11]?"img":"presentation"),$(t,"viewBox",e[3]),$(t,"style",e[10]),I(t,"fa-spin",e[4]),I(t,"fa-pulse",e[6]),I(t,"fa-inverse",e[5]),I(t,"fa-flip-horizontal","horizontal"===e[7]),I(t,"fa-flip-vertical","vertical"===e[7])},m(e,n){p(e,t,n),a&&a.m(t,null),o=!0},p(e,[l]){a&&a.p&&4096&l&&d(a,i,e,e[12],l,null,null),(!o||256&l)&&$(t,"x",e[8]),(!o||1&l&&n!==(n="fa-icon "+e[0]+" svelte-1dof0an"))&&$(t,"class",n),(!o||512&l)&&$(t,"y",e[9]),(!o||2&l)&&$(t,"width",e[1]),(!o||4&l)&&$(t,"height",e[2]),(!o||2048&l)&&$(t,"aria-label",e[11]),(!o||2048&l&&r!==(r=e[11]?"img":"presentation"))&&$(t,"role",r),(!o||8&l)&&$(t,"viewBox",e[3]),(!o||1024&l)&&$(t,"style",e[10]),17&l&&I(t,"fa-spin",e[4]),65&l&&I(t,"fa-pulse",e[6]),33&l&&I(t,"fa-inverse",e[5]),129&l&&I(t,"fa-flip-horizontal","horizontal"===e[7]),129&l&&I(t,"fa-flip-vertical","vertical"===e[7])},i(e){o||(Z(a,e),o=!0)},o(e){Q(a,e),o=!1},d(e){e&&y(t),a&&a.d(e)}}}function ye(e,t,n){let{class:r}=t,{width:o}=t,{height:i}=t,{box:a}=t,{spin:l=!1}=t,{inverse:s=!1}=t,{pulse:c=!1}=t,{flip:u=null}=t,{x:d}=t,{y:h}=t,{style:f}=t,{label:p}=t,{$$slots:y={},$$scope:g}=t;return e.$set=e=>{"class"in e&&n(0,r=e.class),"width"in e&&n(1,o=e.width),"height"in e&&n(2,i=e.height),"box"in e&&n(3,a=e.box),"spin"in e&&n(4,l=e.spin),"inverse"in e&&n(5,s=e.inverse),"pulse"in e&&n(6,c=e.pulse),"flip"in e&&n(7,u=e.flip),"x"in e&&n(8,d=e.x),"y"in e&&n(9,h=e.y),"style"in e&&n(10,f=e.style),"label"in e&&n(11,p=e.label),"$$scope"in e&&n(12,g=e.$$scope)},[r,o,i,a,l,s,c,u,d,h,f,p,g,y]}class ge extends oe{constructor(e){super(),re(this,e,ye,pe,a,{class:0,width:1,height:2,box:3,spin:4,inverse:5,pulse:6,flip:7,x:8,y:9,style:10,label:11})}}function me(e,t,n){const r=e.slice();return r[24]=t[n],r[26]=n,r}function ve(e,t,n){const r=e.slice();return r[27]=t[n],r[26]=n,r}function Ee(e){let t,n,r,o,i=e[0].paths&&Se(e),a=e[0].polygons&&xe(e),l=e[0].raw&&be(e);return{c(){i&&i.c(),t=S(),a&&a.c(),n=S(),l&&l.c(),r=w()},m(e,s){i&&i.m(e,s),p(e,t,s),a&&a.m(e,s),p(e,n,s),l&&l.m(e,s),p(e,r,s),o=!0},p(e,o){e[0].paths?i?(i.p(e,o),1&o&&Z(i,1)):(i=Se(e),i.c(),Z(i,1),i.m(t.parentNode,t)):i&&(K(),Q(i,1,1,()=>{i=null}),X()),e[0].polygons?a?(a.p(e,o),1&o&&Z(a,1)):(a=xe(e),a.c(),Z(a,1),a.m(n.parentNode,n)):a&&(K(),Q(a,1,1,()=>{a=null}),X()),e[0].raw?l?(l.p(e,o),1&o&&Z(l,1)):(l=be(e),l.c(),Z(l,1),l.m(r.parentNode,r)):l&&(K(),Q(l,1,1,()=>{l=null}),X())},i(e){o||(Z(i),Z(a),Z(l),o=!0)},o(e){Q(i),Q(a),Q(l),o=!1},d(e){i&&i.d(e),e&&y(t),a&&a.d(e),e&&y(n),l&&l.d(e),e&&y(r)}}}function Se(e){let t,n,r=e[0].paths,o=[];for(let t=0;t<r.length;t+=1)o[t]=we(ve(e,r,t));const i=e=>Q(o[e],1,1,()=>{o[e]=null});return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=w()},m(e,r){for(let t=0;t<o.length;t+=1)o[t].m(e,r);p(e,t,r),n=!0},p(e,n){if(1&n){let a;for(r=e[0].paths,a=0;a<r.length;a+=1){const i=ve(e,r,a);o[a]?(o[a].p(i,n),Z(o[a],1)):(o[a]=we(i),o[a].c(),Z(o[a],1),o[a].m(t.parentNode,t))}for(K(),a=r.length;a<o.length;a+=1)i(a);X()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)Z(o[e]);n=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)Q(o[e]);n=!1},d(e){g(o,e),e&&y(t)}}}function we(e){let t,n;return t=new le({props:{id:e[26],data:e[27]}}),{c(){ee(t.$$.fragment)},m(e,r){te(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.data=e[27]),t.$set(r)},i(e){n||(Z(t.$$.fragment,e),n=!0)},o(e){Q(t.$$.fragment,e),n=!1},d(e){ne(t,e)}}}function xe(e){let t,n,r=e[0].polygons,o=[];for(let t=0;t<r.length;t+=1)o[t]=$e(me(e,r,t));const i=e=>Q(o[e],1,1,()=>{o[e]=null});return{c(){for(let e=0;e<o.length;e+=1)o[e].c();t=w()},m(e,r){for(let t=0;t<o.length;t+=1)o[t].m(e,r);p(e,t,r),n=!0},p(e,n){if(1&n){let a;for(r=e[0].polygons,a=0;a<r.length;a+=1){const i=me(e,r,a);o[a]?(o[a].p(i,n),Z(o[a],1)):(o[a]=$e(i),o[a].c(),Z(o[a],1),o[a].m(t.parentNode,t))}for(K(),a=r.length;a<o.length;a+=1)i(a);X()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)Z(o[e]);n=!0}},o(e){o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)Q(o[e]);n=!1},d(e){g(o,e),e&&y(t)}}}function $e(e){let t,n;return t=new ue({props:{id:e[26],data:e[24]}}),{c(){ee(t.$$.fragment)},m(e,r){te(t,e,r),n=!0},p(e,n){const r={};1&n&&(r.data=e[24]),t.$set(r)},i(e){n||(Z(t.$$.fragment,e),n=!0)},o(e){Q(t.$$.fragment,e),n=!1},d(e){ne(t,e)}}}function be(e){let t,n,r;function o(t){e[15].call(null,t)}let i={};return void 0!==e[0]&&(i.data=e[0]),t=new fe({props:i}),P.push(()=>function(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}(t,"data",o)),{c(){ee(t.$$.fragment)},m(e,n){te(t,e,n),r=!0},p(e,r){const o={};var i;!n&&1&r&&(n=!0,o.data=e[0],i=()=>n=!1,_.push(i)),t.$set(o)},i(e){r||(Z(t.$$.fragment,e),r=!0)},o(e){Q(t.$$.fragment,e),r=!1},d(e){ne(t,e)}}}function ke(e){let t;const n=e[14].default,r=c(n,e,e[16],null),o=r||function(e){let t,n,r=e[0]&&Ee(e);return{c(){r&&r.c(),t=w()},m(e,o){r&&r.m(e,o),p(e,t,o),n=!0},p(e,n){e[0]?r?(r.p(e,n),1&n&&Z(r,1)):(r=Ee(e),r.c(),Z(r,1),r.m(t.parentNode,t)):r&&(K(),Q(r,1,1,()=>{r=null}),X())},i(e){n||(Z(r),n=!0)},o(e){Q(r),n=!1},d(e){r&&r.d(e),e&&y(t)}}}(e);return{c(){o&&o.c()},m(e,n){o&&o.m(e,n),t=!0},p(e,t){r?r.p&&65536&t&&d(r,n,e,e[16],t,null,null):o&&o.p&&1&t&&o.p(e,t)},i(e){t||(Z(o,e),t=!0)},o(e){Q(o,e),t=!1},d(e){o&&o.d(e)}}}function Ce(e){let t,n;return t=new ge({props:{label:e[6],width:e[7],height:e[8],box:e[10],style:e[9],spin:e[2],flip:e[5],inverse:e[3],pulse:e[4],class:e[1],$$slots:{default:[ke]},$$scope:{ctx:e}}}),{c(){ee(t.$$.fragment)},m(e,r){te(t,e,r),n=!0},p(e,[n]){const r={};64&n&&(r.label=e[6]),128&n&&(r.width=e[7]),256&n&&(r.height=e[8]),1024&n&&(r.box=e[10]),512&n&&(r.style=e[9]),4&n&&(r.spin=e[2]),32&n&&(r.flip=e[5]),8&n&&(r.inverse=e[3]),16&n&&(r.pulse=e[4]),2&n&&(r.class=e[1]),65537&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(Z(t.$$.fragment,e),n=!0)},o(e){Q(t.$$.fragment,e),n=!1},d(e){ne(t,e)}}}function Ie(e,t,n){let r,o,i,a,{class:l=""}=t,{data:s}=t,{scale:c=1}=t,{spin:u=!1}=t,{inverse:d=!1}=t,{pulse:h=!1}=t,{flip:f=null}=t,{label:p=null}=t,{self:y=null}=t,{style:g=null}=t;function m(){let e=1;return void 0!==c&&(e=Number(c)),isNaN(e)||e<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.'),1):1*e}function v(){return y?Math.max(y.width,y.height)/16:1}let{$$slots:E={},$$scope:S}=t;return e.$set=e=>{"class"in e&&n(1,l=e.class),"data"in e&&n(11,s=e.data),"scale"in e&&n(12,c=e.scale),"spin"in e&&n(2,u=e.spin),"inverse"in e&&n(3,d=e.inverse),"pulse"in e&&n(4,h=e.pulse),"flip"in e&&n(5,f=e.flip),"label"in e&&n(6,p=e.label),"self"in e&&n(0,y=e.self),"style"in e&&n(13,g=e.style),"$$scope"in e&&n(16,S=e.$$scope)},e.$$.update=()=>{14336&e.$$.dirty&&(!function(){if(void 0===s)return;const e=function(e){if("iconName"in e&&"icon"in e){let t={},n=e.icon,r=e.iconName,o={width:n[0],height:n[1],paths:[{d:n[4]}]};return t[r]=o,t}return e}(s),[t]=Object.keys(e),r=e[t];r.paths||(r.paths=[]),r.d&&r.paths.push({d:r.d}),r.polygons||(r.polygons=[]),r.points&&r.polygons.push({points:r.points}),n(0,y=r)}(),n(7,r=y?y.width/v()*m():0),n(8,o=y?y.height/v()*m():0),n(9,i=function(){let e="";null!==g&&(e+=g);let t=m();return 1===t?e:(""===e||e.endsWith(";")||(e+="; "),`${e}font-size: ${t}em`)}()),n(10,a=y?`0 0 ${y.width} ${y.height}`:`0 0 ${r} ${o}`))},[y,l,u,d,h,f,p,r,o,i,a,s,c,g,E,function(e){y=e,n(0,y)},S]}class De extends oe{constructor(e){super(),re(this,e,Ie,Ce,a,{class:1,data:11,scale:12,spin:2,inverse:3,pulse:4,flip:5,label:6,self:0,style:13})}}var Ne={prefix:"fas",iconName:"circle",icon:[512,512,[],"f111","M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"]},Le={prefix:"fas",iconName:"edit",icon:[576,512,[],"f044","M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"]},je={prefix:"fas",iconName:"hammer",icon:[576,512,[],"f6e3","M571.31 193.94l-22.63-22.63c-6.25-6.25-16.38-6.25-22.63 0l-11.31 11.31-28.9-28.9c5.63-21.31.36-44.9-16.35-61.61l-45.25-45.25c-62.48-62.48-163.79-62.48-226.28 0l90.51 45.25v18.75c0 16.97 6.74 33.25 18.75 45.25l49.14 49.14c16.71 16.71 40.3 21.98 61.61 16.35l28.9 28.9-11.31 11.31c-6.25 6.25-6.25 16.38 0 22.63l22.63 22.63c6.25 6.25 16.38 6.25 22.63 0l90.51-90.51c6.23-6.24 6.23-16.37-.02-22.62zm-286.72-15.2c-3.7-3.7-6.84-7.79-9.85-11.95L19.64 404.96c-25.57 23.88-26.26 64.19-1.53 88.93s65.05 24.05 88.93-1.53l238.13-255.07c-3.96-2.91-7.9-5.87-11.44-9.41l-49.14-49.14z"]},Ae={prefix:"fas",iconName:"plus",icon:[448,512,[],"f067","M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"]},Be={prefix:"fas",iconName:"trash-alt",icon:[448,512,[],"f2ed","M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"]};const Te=[];function Pe(e,t){return{subscribe:Oe(e,t).subscribe}}function Oe(t,n=e){let r;const o=[];function i(e){if(a(t,e)&&(t=e,r)){const e=!Te.length;for(let e=0;e<o.length;e+=1){const n=o[e];n[1](),Te.push(n,t)}if(e){for(let e=0;e<Te.length;e+=2)Te[e][0](Te[e+1]);Te.length=0}}}return{set:i,update:function(e){i(e(t))},subscribe:function(a,l=e){const s=[a,l];return o.push(s),1===o.length&&(r=n(i)||e),a(t),()=>{const e=o.indexOf(s);-1!==e&&o.splice(e,1),0===o.length&&(r(),r=null)}}}}function _e(t,n,r){const a=!Array.isArray(t),s=a?[t]:t,c=n.length<2;return Pe(r,t=>{let r=!1;const u=[];let d=0,h=e;const f=()=>{if(d)return;h();const r=n(a?u[0]:u,t);c?t(r):h=i(r)?r:e},p=s.map((e,t)=>l(e,e=>{u[t]=e,d&=~(1<<t),r&&f()},()=>{d|=1<<t}));return r=!0,f(),function(){o(p),h()}})}function Me(e){let t,n,r;var o=e[0];return o&&(t=new o({}),t.$on("routeEvent",e[5])),{c(){t&&ee(t.$$.fragment),n=w()},m(e,o){t&&te(t,e,o),p(e,n,o),r=!0},p(e,r){if(o!==(o=e[0])){if(t){K();const e=t;Q(e.$$.fragment,1,0,()=>{ne(e,1)}),X()}o?(t=new o({}),t.$on("routeEvent",e[5]),ee(t.$$.fragment),Z(t.$$.fragment,1),te(t,n.parentNode,n)):t=null}},i(e){r||(t&&Z(t.$$.fragment,e),r=!0)},o(e){t&&Q(t.$$.fragment,e),r=!1},d(e){e&&y(n),t&&ne(t,e)}}}function ze(e){let t,n,r;var o=e[0];function i(e){return{props:{params:e[1]}}}return o&&(t=new o(i(e)),t.$on("routeEvent",e[4])),{c(){t&&ee(t.$$.fragment),n=w()},m(e,o){t&&te(t,e,o),p(e,n,o),r=!0},p(e,r){const a={};if(2&r&&(a.params=e[1]),o!==(o=e[0])){if(t){K();const e=t;Q(e.$$.fragment,1,0,()=>{ne(e,1)}),X()}o?(t=new o(i(e)),t.$on("routeEvent",e[4]),ee(t.$$.fragment),Z(t.$$.fragment,1),te(t,n.parentNode,n)):t=null}else o&&t.$set(a)},i(e){r||(t&&Z(t.$$.fragment,e),r=!0)},o(e){t&&Q(t.$$.fragment,e),r=!1},d(e){e&&y(n),t&&ne(t,e)}}}function Ue(e){let t,n,r,o;const i=[ze,Me],a=[];function l(e,t){return e[1]?0:1}return t=l(e),n=a[t]=i[t](e),{c(){n.c(),r=w()},m(e,n){a[t].m(e,n),p(e,r,n),o=!0},p(e,[o]){let s=t;t=l(e),t===s?a[t].p(e,o):(K(),Q(a[s],1,1,()=>{a[s]=null}),X(),n=a[t],n||(n=a[t]=i[t](e),n.c()),Z(n,1),n.m(r.parentNode,r))},i(e){o||(Z(n),o=!0)},o(e){Q(n),o=!1},d(e){a[t].d(e),e&&y(r)}}}function He(){const e=window.location.href.indexOf("#/");let t=e>-1?window.location.href.substr(e+1):"/";const n=t.indexOf("?");let r="";return n>-1&&(r=t.substr(n+1),t=t.substr(0,n)),{location:t,querystring:r}}const Re=Pe(null,(function(e){e(He());const t=()=>{e(He())};return window.addEventListener("hashchange",t,!1),function(){window.removeEventListener("hashchange",t,!1)}}));_e(Re,e=>e.location),_e(Re,e=>e.querystring);function Ve(e){if(!e||e.length<1||"/"!=e.charAt(0)&&0!==e.indexOf("#/"))throw Error("Invalid parameter location");return H().then(()=>{const t=("#"==e.charAt(0)?"":"#")+e;try{window.history.replaceState(void 0,void 0,t)}catch(e){console.warn("Caught exception while replacing the current page. If you're running this in the Svelte REPL, please note that the `replace` method might not work in this environment.")}window.dispatchEvent(new Event("hashchange"))})}function Fe(t,n,r){let o,i=e;s(t,Re,e=>r(6,o=e)),t.$$.on_destroy.push(()=>i());let{routes:a={}}=n,{prefix:l=""}=n;class c{constructor(e,t){if(!t||"function"!=typeof t&&("object"!=typeof t||!0!==t._sveltesparouter))throw Error("Invalid component object");if(!e||"string"==typeof e&&(e.length<1||"/"!=e.charAt(0)&&"*"!=e.charAt(0))||"object"==typeof e&&!(e instanceof RegExp))throw Error('Invalid value for "path" argument');const{pattern:n,keys:r}=function(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var n,r,o,i,a=[],l="",s=e.split("/");for(s[0]||s.shift();o=s.shift();)"*"===(n=o[0])?(a.push("wild"),l+="/(.*)"):":"===n?(r=o.indexOf("?",1),i=o.indexOf(".",1),a.push(o.substring(1,~r?r:~i?i:o.length)),l+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~r?"?":"")+"\\"+o.substring(i))):l+="/"+o;return{keys:a,pattern:new RegExp("^"+l+(t?"(?=$|/)":"/?$"),"i")}}(e);this.path=e,"object"==typeof t&&!0===t._sveltesparouter?(this.component=t.route,this.conditions=t.conditions||[],this.userData=t.userData):(this.component=t,this.conditions=[],this.userData=void 0),this._pattern=n,this._keys=r}match(e){l&&e.startsWith(l)&&(e=e.substr(l.length)||"/");const t=this._pattern.exec(e);if(null===t)return null;if(!1===this._keys)return t;const n={};let r=0;for(;r<this._keys.length;)n[this._keys[r]]=t[++r]||null;return n}checkConditions(e){for(let t=0;t<this.conditions.length;t++)if(!this.conditions[t](e))return!1;return!0}}const u=[];a instanceof Map?a.forEach((e,t)=>{u.push(new c(t,e))}):Object.keys(a).forEach(e=>{u.push(new c(e,a[e]))});let d=null,h=null;const f=A(),p=(e,t)=>{H().then(()=>{f(e,t)})};return t.$set=e=>{"routes"in e&&r(2,a=e.routes),"prefix"in e&&r(3,l=e.prefix)},t.$$.update=()=>{if(65&t.$$.dirty){r(0,d=null);let e=0;for(;!d&&e<u.length;){const t=u[e].match(o.location);if(t){const n={component:u[e].component,name:u[e].component.name,location:o.location,querystring:o.querystring,userData:u[e].userData};if(!u[e].checkConditions(n)){p("conditionsFailed",n);break}r(0,d=u[e].component),t&&"object"==typeof t&&Object.keys(t).length?r(1,h=t):r(1,h=null),p("routeLoaded",n)}e++}}},[d,h,a,l,function(e){B(t,e)},function(e){B(t,e)}]}class Ge extends oe{constructor(e){super(),re(this,e,Fe,Ue,a,{routes:2,prefix:3})}}var We=Qe;Qe.Item=et;var qe=Qe.prototype,Je=et.prototype,Ke=tt.prototype,Xe="undefined"==typeof Symbol?void 0:Symbol.iterator;qe.tail=qe.head=null,Qe.of=function(){return Ye(new this,arguments)},Qe.from=function(e){return Ye(new this,e)},qe.toArray=function(){var e=this.head,t=[];for(;e;)t.push(e),e=e.next;return t},qe.prepend=function(e){var t=this.head;if(!e)return!1;if(!e.append||!e.prepend||!e.detach)throw new Error(Ze+"#prepend`.");if(t)return t.prepend(e);return e.detach(),e.list=this,this.head=e,this.size++,e},qe.append=function(e){if(!e)return!1;if(!e.append||!e.prepend||!e.detach)throw new Error(Ze+"#append`.");var t=this.head,n=this.tail;if(n)return n.append(e);if(t)return t.append(e);return e.detach(),e.list=this,this.head=e,this.size++,e},void 0!==Xe&&(qe[Xe]=function(){return new tt(this.head)}),Je.next=Je.prev=Je.list=null,Je.prepend=function(e){if(!(e&&e.append&&e.prepend&&e.detach))throw new Error(Ze+"Item#prepend`.");var t=this.list,n=this.prev;if(!t)return!1;e.detach(),n&&(e.prev=n,n.next=e);e.next=this,e.list=t,this.prev=e,this===t.head&&(t.head=e);t.tail||(t.tail=this);return t.size++,e},Je.append=function(e){if(!(e&&e.append&&e.prepend&&e.detach))throw new Error(Ze+"Item#append`.");var t=this.list,n=this.next;if(!t)return!1;e.detach(),n&&(e.next=n,n.prev=e);e.prev=this,e.list=t,this.next=e,this!==t.tail&&t.tail||(t.tail=e);return t.size++,e},Je.detach=function(){var e=this.list,t=this.prev,n=this.next;if(!e)return this;e.tail===this&&(e.tail=t);e.head===this&&(e.head=n);e.tail===e.head&&(e.tail=null);t&&(t.next=n);n&&(n.prev=t);return this.prev=this.next=this.list=null,e.size--,this},Ke.next=function(){var e=this.item;return this.value=e,this.done=!e,this.item=e?e.next:void 0,this};var Ze="An argument without append, prepend, or detach methods was given to `List";function Qe(){this.size=0,0!==arguments.length&&Ye(this,arguments)}function Ye(e,t){var n,r,o,i;if(!t)return e;if(void 0!==Xe&&t[Xe])for(i=t[Xe](),o={};!o.done;)o=i.next(),e.append(o&&o.value);else for(n=t.length,r=-1;++r<n;)e.append(t[r]);return e}function et(){}function tt(e){this.item=e}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function nt(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var rt=nt((function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}}));function ot(){We.apply(this,arguments)}function it(e){this.value=e,We.Item.apply(this,arguments)}rt(ot,We),rt(it,We.Item),ot.Item=it,ot.prototype.get=function(e){let t=this.head;for(var n=0;n<e;++n)t=t.next;return t};class at{constructor(){this.list=new ot}add(e){this.list.append(new it(e))}remove(){if(this.list.head){let e=this.list.head.value;return this.list.head.detach(),e}}isEmpty(){return 0===this.list.size}}class lt{constructor(e,t){this.entries=e,this.root=t;let n,r=new at,o={};for(this.root.forEachChildNode(e=>r.add(e));!r.isEmpty();)n=r.remove(),o[n.getValue()]=n,n.forEachChildNode(e=>r.add(e));this.nodeLookup=o}getEntries(){return this.entries}getEntryNode(e){return this.nodeLookup[e]}getEntryDisplayState(e){return null!=this.entries[e]&&"displayState"in this.entries[e]?this.entries[e].displayState:yt.Expanded}getEntryHeadingSize(e){return this.entries[e].headingSize||0}getEntryText(e){return this.entries[e].text}getEntryIdAbove(e){var t;let n=this.nodeLookup[e];if(n.hasPrev())return this.getLastAncestorNode(n.getPrev()).getValue();let r=null===(t=n.getParent())||void 0===t?void 0:t.getValue();return void 0===r?null:r}getEntryIdAboveWithCollapse(e){let t=this.getEntryIdAbove(e),n=null,r=this.nodeLookup[t].getParent();for(;null!=r;){this.getEntryDisplayState(r.getValue())===yt.Collapsed&&(n=r),r=r.getParent()}return null==n?t:n}getEntryIdBelowWithCollapse(e){if(this.getEntryDisplayState(e)!==yt.Collapsed){let t=this.nodeLookup[e].getFirstChild();if(null!=t)return t.getValue()}if(this.hasNextSibling(e))return this.getNextSiblingNode(e).getValue();let t=this.getNextSiblingOfFirstAncestor(this.nodeLookup[e]);return t?t.getValue():null}getLastAncestorNode(e){let t=e;for(;t.hasChildren();)t=t.getLastChild();return t}getNextSiblingOfFirstAncestor(e){let t=e.getValue();for(;this.hasParent(t);)if(t=this.nodeLookup[t].getParent().getValue(),this.nodeLookup[t].hasNext())return this.nodeLookup[t].getNext();return null}getRoot(){return this.root}hasChildren(e){return this.nodeLookup[e].hasChildren()}hasParent(e){let t=this.nodeLookup[e];return t.hasParent()&&null!=t.getParent().getValue()}hasPrevSibling(e){return this.nodeLookup[e].hasPrev()}hasNextSibling(e){return this.nodeLookup[e].hasNext()}getPrevSiblingNode(e){return this.nodeLookup[e].getPrev()}getNextSiblingNode(e){return this.nodeLookup[e].getNext()}hasEntryAbove(e){return this.nodeLookup[e].hasPrev()||this.hasParent(e)}hasEntryBelow(e){return this.nodeLookup[e].hasChildren()||this.nodeLookup[e].hasNext()||this.entryAncestorHasNextSibling(e)}entryAncestorHasNextSibling(e){if(!this.hasParent(e))return!1;let t=this.nodeLookup[e].getValue();for(;this.hasParent(t);)if(t=this.nodeLookup[t].getParent().getValue(),this.nodeLookup[t].hasNext())return!0;return!1}setEntryText(e,t){null==this.entries[e]&&(this.entries[e]={text:t}),this.entries[e].text=t}setEntryDisplayState(e,t){null!=this.entries[e]?this.entries[e].displayState=t:console.log(" ##$#$@%@@ setEntryDisplayState was called with the entry not found!!!!!")}insertEntryBelow(e,t,n){let r=Object.keys(this.entries).map(e=>parseInt(e)),o=Math.max(...r)+1;this.setEntryText(o,n);let i=st.createWithParent(o,this.nodeLookup[t]);return this.nodeLookup[e].appendSiblingNode(i),this.nodeLookup[o]=i,o}insertEntryAbove(e,t,n){let r=Object.keys(this.entries).map(e=>parseInt(e)),o=Math.max(...r)+1;this.setEntryText(o,n);let i=st.createWithParent(o,this.nodeLookup[t]);return this.nodeLookup[e].prependSiblingNode(i),this.nodeLookup[o]=i,o}removeEntry(e){let t=this.nodeLookup[e];delete this.entries[e],t.detach(),delete this.nodeLookup[e]}swapAdjacentSiblings(e,t){let n=this.getEntryNode(e),r=this.getEntryNode(t);n.getNext()===r&&(n.detach(),r.appendSiblingNode(n))}cycleEntryHeadingSize(e){if(!(e in this.entries))return;let t=this.entries[e].headingSize||0;this.entries[e].headingSize=(t+1)%4}}class st{constructor(e){this.value=e,this.parent=null,this.prev=null,this.next=null,this.firstChild=null,this.lastChild=null}static create(e){return new st(e)}static createWithParent(e,t){let n=st.create(e);return n.parent=t,n}forEachChildNode(e){let t=this.firstChild;for(;null!=t;)e(t),t=t.next}getChildNodeArray(){let e=[];return this.forEachChildNode(t=>{e.push(t)}),e}getFirstChild(){return this.firstChild}getLastChild(){return this.lastChild}getNext(){return this.next}getParent(){return this.parent}getPrev(){return this.prev}getValue(){return this.value}hasChildren(){return null!=this.firstChild}hasNext(){return null!=this.next}hasParent(){return null!=this.parent}hasPrev(){return null!=this.prev}prependSiblingNode(e){this.hasPrev()?(this.prev.next=e,e.prev=this.prev):this.parent.firstChild=e,this.prev=e,e.next=this,e.parent=this.parent}appendSiblingNode(e){this.hasNext()?(this.next.prev=e,e.next=this.next):this.parent.lastChild=e,this.next=e,e.prev=this,e.parent=this.parent}detach(){if(!this.hasParent())return;let e=this.prev,t=this.next;e&&t?(e.next=t,t.prev=e):!e&&t?(t.prev=null,this.parent.firstChild=t):e&&!t?(e.next=null,this.parent.lastChild=e):(this.parent.firstChild=null,this.parent.lastChild=null),this.prev=null,this.next=null}appendChild(e){null==this.firstChild?(this.firstChild=e,this.lastChild=e):(this.lastChild.next=e,e.prev=this.lastChild,this.lastChild=e),e.parent=this}}class ct{static toTreeObj(e){if(e.hasChildren()){let t=null==e.getValue()?"root":""+e.getValue(),n={},r=[];return e.forEachChildNode(e=>{r.push(ct.toTreeObj(e))}),n[t]=r,n}return e.getValue()}static createFromTreeObj(e){let t=Object.keys(e)[0],n=e[t],r="root"===t?null:parseInt(t),o=null==r?st.create(null):st.create(r);return n.forEach(e=>{let t=(n=e)===Object(n)?ct.createFromTreeObj(e):st.create(e);var n;o.appendChild(t)}),o}}var ut=nt((function(e,t){"undefined"!=typeof self&&self,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){function r(e){if(!(this instanceof r))return new r(e);this._=e}var o=r.prototype;function i(e,t){for(var n=0;n<e;n++)t(n)}function a(e,t,n){return function(e,t){i(t.length,(function(n){e(t[n],n,t)}))}((function(n,r,o){t=e(t,n,r,o)}),n),t}function l(e,t){return a((function(t,n,r,o){return t.concat([e(n,r,o)])}),[],t)}function s(e,t){var n={v:0,buf:t};return i(e,(function(){var e;n={v:n.v<<1|(e=n.buf,e[0]>>7),buf:function(e){var t=a((function(e,t,n,r){return e.concat(n===r.length-1?Buffer.from([t,0]).readUInt16BE(0):r.readUInt16BE(n))}),[],e);return Buffer.from(l((function(e){return(e<<1&65535)>>8}),t))}(n.buf)}})),n}function c(){return"undefined"!=typeof Buffer}function u(){if(!c())throw new Error("Buffer global does not exist; please use webpack if you need to parse Buffers in the browser.")}function d(e){u();var t=a((function(e,t){return e+t}),0,e);if(t%8!=0)throw new Error("The bits ["+e.join(", ")+"] add up to "+t+" which is not an even number of bytes; the total should be divisible by 8");var n,o=t/8,i=(n=function(e){return e>48},a((function(e,t){return e||(n(t)?t:e)}),null,e));if(i)throw new Error(i+" bit range requested exceeds 48 bit (6 byte) Number max.");return new r((function(t,n){var r=o+n;return r>t.length?x(n,o.toString()+" bytes"):w(r,a((function(e,t){var n=s(t,e.buf);return{coll:e.coll.concat(n.v),buf:n.buf}}),{coll:[],buf:t.slice(n,r)},e).coll)}))}function h(e,t){return new r((function(n,r){return u(),r+t>n.length?x(r,t+" bytes for "+e):w(r+t,n.slice(r,r+t))}))}function f(e,t){if("number"!=typeof(n=t)||Math.floor(n)!==n||t<0||t>6)throw new Error(e+" requires integer length in range [0, 6].");var n}function p(e){return f("uintBE",e),h("uintBE("+e+")",e).map((function(t){return t.readUIntBE(0,e)}))}function y(e){return f("uintLE",e),h("uintLE("+e+")",e).map((function(t){return t.readUIntLE(0,e)}))}function g(e){return f("intBE",e),h("intBE("+e+")",e).map((function(t){return t.readIntBE(0,e)}))}function m(e){return f("intLE",e),h("intLE("+e+")",e).map((function(t){return t.readIntLE(0,e)}))}function v(e){return e instanceof r}function E(e){return"[object Array]"==={}.toString.call(e)}function S(e){return c()&&Buffer.isBuffer(e)}function w(e,t){return{status:!0,index:e,value:t,furthest:-1,expected:[]}}function x(e,t){return E(t)||(t=[t]),{status:!1,index:-1,value:null,furthest:e,expected:t}}function $(e,t){if(!t)return e;if(e.furthest>t.furthest)return e;var n=e.furthest===t.furthest?function(e,t){if(function(){if(void 0!==r._supportsSet)return r._supportsSet;var e="undefined"!=typeof Set;return r._supportsSet=e,e}()&&Array.from){for(var n=new Set(e),o=0;o<t.length;o++)n.add(t[o]);var i=Array.from(n);return i.sort(),i}for(var a={},l=0;l<e.length;l++)a[e[l]]=!0;for(var s=0;s<t.length;s++)a[t[s]]=!0;var c=[];for(var u in a)({}).hasOwnProperty.call(a,u)&&c.push(u);return c.sort(),c}(e.expected,t.expected):t.expected;return{status:e.status,index:e.index,value:e.value,furthest:t.furthest,expected:n}}var b={};function k(e,t){if(S(e))return{offset:t,line:-1,column:-1};if(b.input===e&&b.i===t)return b.value;var n=e.slice(0,t).split("\n"),r={offset:t,line:n.length,column:n[n.length-1].length+1};return b.input=e,b.i=t,b.value=r,r}function C(e){if(!v(e))throw new Error("not a parser: "+e)}function I(e,t){return"string"==typeof e?e.charAt(t):e[t]}function D(e){if("number"!=typeof e)throw new Error("not a number: "+e)}function N(e){if("function"!=typeof e)throw new Error("not a function: "+e)}function L(e){if("string"!=typeof e)throw new Error("not a string: "+e)}function j(e,t){return new Array(t+1).join(e)}function A(e,t,n){var r=t-e.length;return r<=0?e:j(n,r)+e}function B(e,t,n,r){return{from:e-t>0?e-t:0,to:e+n>r?r:e+n}}function T(e,t){var n,r,o,i,s,c=t.index,u=c.offset,d=1;if(u===e.length)return"Got the end of the input";if(S(e)){var h=u-u%8,f=u-h,p=B(h,40,40,e.length),y=l((function(e){return l((function(e){return A(e.toString(16),2,"0")}),e)}),function(e,t){var n=e.length,r=[],o=0;if(n<=8)return[e.slice()];for(var i=0;i<n;i++)r[o]||r.push([]),r[o].push(e[i]),(i+1)%8==0&&o++;return r}(e.slice(p.from,p.to).toJSON().data));i=function(e){return 0===e.from&&1===e.to?{from:e.from,to:e.to}:{from:e.from/8,to:Math.floor(e.to/8)}}(p),r=h/8,n=3*f,f>=4&&(n+=1),d=2,o=l((function(e){return e.length<=4?e.join(" "):e.slice(0,4).join(" ")+"  "+e.slice(4).join(" ")}),y),(s=(8*(i.to>0?i.to-1:i.to)).toString(16).length)<2&&(s=2)}else{var g=e.split(/\r\n|[\n\r\u2028\u2029]/);n=c.column-1,r=c.line-1,i=B(r,2,3,g.length),o=g.slice(i.from,i.to),s=i.to.toString().length}var m=r-i.from;return S(e)&&(s=(8*(i.to>0?i.to-1:i.to)).toString(16).length)<2&&(s=2),a((function(t,r,o){var a,l=o===m,c=l?"> ":"  ";return a=S(e)?A((8*(i.from+o)).toString(16),s,"0"):A((i.from+o+1).toString(),s," "),[].concat(t,[c+a+" | "+r],l?["  "+j(" ",s)+" | "+A("",n," ")+j("^",d)]:[])}),[],o).join("\n")}function P(e,t){return["\n","-- PARSING FAILED "+j("-",50),"\n\n",T(e,t),"\n\n",(n=t.expected,1===n.length?"Expected:\n\n"+n[0]:"Expected one of the following: \n\n"+n.join(", ")),"\n"].join("");var n}function O(e){var t=""+e;return t.slice(t.lastIndexOf("/")+1)}function _(){for(var e=[].slice.call(arguments),t=e.length,n=0;n<t;n+=1)C(e[n]);return r((function(n,r){for(var o,i=new Array(t),a=0;a<t;a+=1){if(!(o=$(e[a]._(n,r),o)).status)return o;i[a]=o.value,r=o.index}return $(w(r,i),o)}))}function M(){var e=[].slice.call(arguments);if(0===e.length)throw new Error("seqMap needs at least one argument");var t=e.pop();return N(t),_.apply(null,e).map((function(e){return t.apply(null,e)}))}function z(){var e=[].slice.call(arguments),t=e.length;if(0===t)return G("zero alternates");for(var n=0;n<t;n+=1)C(e[n]);return r((function(t,n){for(var r,o=0;o<e.length;o+=1)if((r=$(e[o]._(t,n),r)).status)return r;return r}))}function U(e,t){return H(e,t).or(F([]))}function H(e,t){return C(e),C(t),M(e,t.then(e).many(),(function(e,t){return[e].concat(t)}))}function R(e){L(e);var t="'"+e+"'";return r((function(n,r){var o=r+e.length,i=n.slice(r,o);return i===e?w(o,i):x(r,t)}))}function V(e,t){!function(e){if(!(e instanceof RegExp))throw new Error("not a regexp: "+e);for(var t=O(e),n=0;n<t.length;n++){var r=t.charAt(n);if("i"!==r&&"m"!==r&&"u"!==r&&"s"!==r)throw new Error('unsupported regexp flag "'+r+'": '+e)}}(e),arguments.length>=2?D(t):t=0;var n=function(e){return RegExp("^(?:"+e.source+")",O(e))}(e),o=""+e;return r((function(e,r){var i=n.exec(e.slice(r));if(i){if(0<=t&&t<=i.length){var a=i[0],l=i[t];return w(r+a.length,l)}return x(r,"valid match group (0 to "+i.length+") in "+o)}return x(r,o)}))}function F(e){return r((function(t,n){return w(n,e)}))}function G(e){return r((function(t,n){return x(n,e)}))}function W(e){if(v(e))return r((function(t,n){var r=e._(t,n);return r.index=n,r.value="",r}));if("string"==typeof e)return W(R(e));if(e instanceof RegExp)return W(V(e));throw new Error("not a string, regexp, or parser: "+e)}function q(e){return C(e),r((function(t,n){var r=e._(t,n),o=t.slice(n,r.index);return r.status?x(n,'not "'+o+'"'):w(n,null)}))}function J(e){return N(e),r((function(t,n){var r=I(t,n);return n<t.length&&e(r)?w(n+1,r):x(n,"a character/byte matching "+e)}))}function K(e,t){arguments.length<2&&(t=e,e=void 0);var n=r((function(e,r){return n._=t()._,n._(e,r)}));return e?n.desc(e):n}function X(){return G("fantasy-land/empty")}o.parse=function(e){if("string"!=typeof e&&!S(e))throw new Error(".parse must be called with a string or Buffer as its argument");var t=this.skip(ee)._(e,0);return t.status?{status:!0,value:t.value}:{status:!1,index:k(e,t.furthest),expected:t.expected}},o.tryParse=function(e){var t=this.parse(e);if(t.status)return t.value;var n=P(e,t),r=new Error(n);throw r.type="ParsimmonError",r.result=t,r},o.assert=function(e,t){return this.chain((function(n){return e(n)?F(n):G(t)}))},o.or=function(e){return z(this,e)},o.trim=function(e){return this.wrap(e,e)},o.wrap=function(e,t){return M(e,this,t,(function(e,t){return t}))},o.thru=function(e){return e(this)},o.then=function(e){return C(e),_(this,e).map((function(e){return e[1]}))},o.many=function(){var e=this;return r((function(t,n){for(var r=[],o=void 0;;){if(!(o=$(e._(t,n),o)).status)return $(w(n,r),o);if(n===o.index)throw new Error("infinite loop detected in .many() parser --- calling .many() on a parser which can accept zero characters is usually the cause");n=o.index,r.push(o.value)}}))},o.tieWith=function(e){return L(e),this.map((function(t){if(function(e){if(!E(e))throw new Error("not an array: "+e)}(t),t.length){L(t[0]);for(var n=t[0],r=1;r<t.length;r++)L(t[r]),n+=e+t[r];return n}return""}))},o.tie=function(){return this.tieWith("")},o.times=function(e,t){var n=this;return arguments.length<2&&(t=e),D(e),D(t),r((function(r,o){for(var i=[],a=void 0,l=void 0,s=0;s<e;s+=1){if(l=$(a=n._(r,o),l),!a.status)return l;o=a.index,i.push(a.value)}for(;s<t&&(l=$(a=n._(r,o),l),a.status);s+=1)o=a.index,i.push(a.value);return $(w(o,i),l)}))},o.result=function(e){return this.map((function(){return e}))},o.atMost=function(e){return this.times(0,e)},o.atLeast=function(e){return M(this.times(e),this.many(),(function(e,t){return e.concat(t)}))},o.map=function(e){N(e);var t=this;return r((function(n,r){var o=t._(n,r);return o.status?$(w(o.index,e(o.value)),o):o}))},o.contramap=function(e){N(e);var t=this;return r((function(n,r){var o=t.parse(e(n.slice(r)));return o.status?w(r+n.length,o.value):o}))},o.promap=function(e,t){return N(e),N(t),this.contramap(e).map(t)},o.skip=function(e){return _(this,e).map((function(e){return e[0]}))},o.mark=function(){return M(Z,this,Z,(function(e,t,n){return{start:e,value:t,end:n}}))},o.node=function(e){return M(Z,this,Z,(function(t,n,r){return{name:e,value:n,start:t,end:r}}))},o.sepBy=function(e){return U(this,e)},o.sepBy1=function(e){return H(this,e)},o.lookahead=function(e){return this.skip(W(e))},o.notFollowedBy=function(e){return this.skip(q(e))},o.desc=function(e){E(e)||(e=[e]);var t=this;return r((function(n,r){var o=t._(n,r);return o.status||(o.expected=e),o}))},o.fallback=function(e){return this.or(F(e))},o.ap=function(e){return M(e,this,(function(e,t){return e(t)}))},o.chain=function(e){var t=this;return r((function(n,r){var o=t._(n,r);return o.status?$(e(o.value)._(n,o.index),o):o}))},o.concat=o.or,o.empty=X,o.of=F,o["fantasy-land/ap"]=o.ap,o["fantasy-land/chain"]=o.chain,o["fantasy-land/concat"]=o.concat,o["fantasy-land/empty"]=o.empty,o["fantasy-land/of"]=o.of,o["fantasy-land/map"]=o.map;var Z=r((function(e,t){return w(t,k(e,t))})),Q=r((function(e,t){return t>=e.length?x(t,"any character/byte"):w(t+1,I(e,t))})),Y=r((function(e,t){return w(e.length,e.slice(t))})),ee=r((function(e,t){return t<e.length?x(t,"EOF"):w(t,null)})),te=V(/[0-9]/).desc("a digit"),ne=V(/[0-9]*/).desc("optional digits"),re=V(/[a-z]/i).desc("a letter"),oe=V(/[a-z]*/i).desc("optional letters"),ie=V(/\s*/).desc("optional whitespace"),ae=V(/\s+/).desc("whitespace"),le=R("\r"),se=R("\n"),ce=R("\r\n"),ue=z(ce,se,le).desc("newline"),de=z(ue,ee);r.all=Y,r.alt=z,r.any=Q,r.cr=le,r.createLanguage=function(e){var t={};for(var n in e)({}).hasOwnProperty.call(e,n)&&function(n){t[n]=K((function(){return e[n](t)}))}(n);return t},r.crlf=ce,r.custom=function(e){return r(e(w,x))},r.digit=te,r.digits=ne,r.empty=X,r.end=de,r.eof=ee,r.fail=G,r.formatError=P,r.index=Z,r.isParser=v,r.lazy=K,r.letter=re,r.letters=oe,r.lf=se,r.lookahead=W,r.makeFailure=x,r.makeSuccess=w,r.newline=ue,r.noneOf=function(e){return J((function(t){return e.indexOf(t)<0})).desc("none of '"+e+"'")},r.notFollowedBy=q,r.of=F,r.oneOf=function(e){for(var t=e.split(""),n=0;n<t.length;n++)t[n]="'"+t[n]+"'";return J((function(t){return e.indexOf(t)>=0})).desc(t)},r.optWhitespace=ie,r.Parser=r,r.range=function(e,t){return J((function(n){return e<=n&&n<=t})).desc(e+"-"+t)},r.regex=V,r.regexp=V,r.sepBy=U,r.sepBy1=H,r.seq=_,r.seqMap=M,r.seqObj=function(){for(var e,t={},n=0,o=(e=arguments,Array.prototype.slice.call(e)),i=o.length,a=0;a<i;a+=1){var l=o[a];if(!v(l)){if(E(l)&&2===l.length&&"string"==typeof l[0]&&v(l[1])){var s=l[0];if(Object.prototype.hasOwnProperty.call(t,s))throw new Error("seqObj: duplicate key "+s);t[s]=!0,n++;continue}throw new Error("seqObj arguments must be parsers or [string, parser] array pairs.")}}if(0===n)throw new Error("seqObj expects at least one named parser, found zero");return r((function(e,t){for(var n,r={},a=0;a<i;a+=1){var l,s;if(E(o[a])?(l=o[a][0],s=o[a][1]):(l=null,s=o[a]),!(n=$(s._(e,t),n)).status)return n;l&&(r[l]=n.value),t=n.index}return $(w(t,r),n)}))},r.string=R,r.succeed=F,r.takeWhile=function(e){return N(e),r((function(t,n){for(var r=n;r<t.length&&e(I(t,r));)r++;return w(r,t.slice(n,r))}))},r.test=J,r.whitespace=ae,r["fantasy-land/empty"]=X,r["fantasy-land/of"]=F,r.Binary={bitSeq:d,bitSeqObj:function(e){u();var t={},n=0,r=l((function(e){if(E(e)){var r=e;if(2!==r.length)throw new Error("["+r.join(", ")+"] should be length 2, got length "+r.length);if(L(r[0]),D(r[1]),Object.prototype.hasOwnProperty.call(t,r[0]))throw new Error("duplicate key in bitSeqObj: "+r[0]);return t[r[0]]=!0,n++,r}return D(e),[null,e]}),e);if(n<1)throw new Error("bitSeqObj expects at least one named pair, got ["+e.join(", ")+"]");var o=l((function(e){return e[0]}),r);return d(l((function(e){return e[1]}),r)).map((function(e){return a((function(e,t){return null!==t[0]&&(e[t[0]]=t[1]),e}),{},l((function(t,n){return[t,e[n]]}),o))}))},byte:function(e){if(u(),D(e),e>255)throw new Error("Value specified to byte constructor ("+e+"=0x"+e.toString(16)+") is larger in value than a single byte.");var t=(e>15?"0x":"0x0")+e.toString(16);return r((function(n,r){var o=I(n,r);return o===e?w(r+1,o):x(r,t)}))},buffer:function(e){return h("buffer",e).map((function(e){return Buffer.from(e)}))},encodedString:function(e,t){return h("string",t).map((function(t){return t.toString(e)}))},uintBE:p,uint8BE:p(1),uint16BE:p(2),uint32BE:p(4),uintLE:y,uint8LE:y(1),uint16LE:y(2),uint32LE:y(4),intBE:g,int8BE:g(1),int16BE:g(2),int32BE:g(4),intLE:m,int8LE:m(1),int16LE:m(2),int32LE:m(4),floatBE:h("floatBE",4).map((function(e){return e.readFloatBE(0)})),floatLE:h("floatLE",4).map((function(e){return e.readFloatLE(0)})),doubleBE:h("doubleBE",8).map((function(e){return e.readDoubleBE(0)})),doubleLE:h("doubleLE",8).map((function(e){return e.readDoubleLE(0)}))},e.exports=r}])}));function dt(e){switch(e){case'"':return"&quot;";case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";default:return e}}function ht(e){let t=[],n=[];return e.forEach(e=>{var r;r=e,"[object String]"===Object.prototype.toString.call(r)?t.push(e):(t.push(e.html),n=n.concat(e.linkedPages))}),{html:t.join(""),linkedPages:n}}const ft=ut.createLanguage({EscapedPunctuation:function(){return ut.string("\\").then(ut.regexp(/[!"#$%&'()*+,-./:;<=>?@[\\\]^_`{|}~]/).map(e=>dt(e)))},Char:function(){return ut.any.map(e=>dt(e))},CharInsideStrong:function(e){return ut.notFollowedBy(e.StrongDelimiter).then(e.Char)},CharInsideEmphasis:function(e){return ut.notFollowedBy(e.EmphasisDelimiter).then(e.Char)},InlineMathjaxDelimiter:function(){return ut.string("$")},StrongDelimiter:function(){return ut.string("**")},EmphasisDelimiter:function(){return ut.string("__")},PageName:function(e){return ut.notFollowedBy(ut.string("]")).then(e.Char).many().map(e=>e.join(""))},Strong:function(e){return e.StrongDelimiter.notFollowedBy(ut.whitespace).then(e.ValueInsideStrong.many()).skip(e.StrongDelimiter).map(e=>{let t=ht(e);return{html:"<strong>"+t.html+"</strong>",linkedPages:t.linkedPages}})},Emphasis:function(e){return e.EmphasisDelimiter.notFollowedBy(ut.whitespace).then(e.ValueInsideEmphasis.many()).skip(e.EmphasisDelimiter).map(e=>{let t=ht(e);return{html:"<em>"+t.html+"</em>",linkedPages:t.linkedPages}})},InlineMathjax:function(e){return e.InlineMathjaxDelimiter.notFollowedBy(ut.whitespace).then(ut.notFollowedBy(e.InlineMathjaxDelimiter).then(e.Char).many()).skip(ut.notFollowedBy(ut.whitespace).then(e.InlineMathjaxDelimiter)).map(e=>"\\("+e.join("")+"\\)")},InternalLink:function(e){return ut.string("[[").then(e.PageName).skip(ut.string("]]")).map(e=>({html:`<span class="internal-link">[[<a data-markup-link-type="internal" href="#/page/${encodeURI(e)}">${e}</a>]]</span>`,linkedPages:[e]}))},AutoLink:function(){return ut.regexp(/https?:\/\/(\w+\.)*\w+(\/(\w|[-.~:?=&%#])+)*\/?/).map(e=>`<a data-markup-link-type="auto" href="${e}">${e}</a>`)},StandardLink:function(e){return ut.seqMap(ut.string("[").notFollowedBy(ut.string("[")),e.ValueInsideStandardLinkName.many(),ut.string("]"),ut.string("("),ut.notFollowedBy(ut.string(")")).then(e.Char).many(),ut.string(")"),(function(e,t,n,r,o,i){return`<a href="${o.join("")}">${ht(t).html}</a>`}))},Link:function(e){return ut.alt(e.InternalLink,e.StandardLink,e.AutoLink)},ValueInsideStandardLinkName:function(e){return ut.alt(e.EscapedPunctuation,e.Strong,e.Emphasis,ut.notFollowedBy(ut.string("]")).then(e.Char))},ValueInsideEmphasis:function(e){return ut.alt(e.EscapedPunctuation,e.Strong,e.Link,e.InlineMathjax,e.CharInsideEmphasis)},ValueInsideStrong:function(e){return ut.alt(e.EscapedPunctuation,e.Emphasis,e.Link,e.InlineMathjax,e.CharInsideStrong)},Value:function(e){return ut.alt(e.EscapedPunctuation,e.Strong,e.Emphasis,e.Link,e.InlineMathjax,e.Char)},Text:function(e){return e.Value.many().map(ht)}});class pt{constructor(e){this.outAdjacency=e;let t={};Object.entries(e).forEach(([e,n])=>{Object.entries(n).forEach(([n,r])=>{for(let[o,i]of r.entries())o in t||(t[o]=new Set),t[o].add(this.convertToInAdjElement(e,n))})}),console.log(" %^#^ LinkGraph, inAdjacency = ",t),this.inAdjacency=t}convertToInAdjElement(e,t){return`${e}-${t}`}convertFromInAdjElement(e){let t=e.split("-");return[parseInt(t[0]),parseInt(t[1])]}getBacklinks(e){if(!(e in this.inAdjacency))return new Set;let t=this.inAdjacency[e];return new Set([...t].map(e=>this.convertFromInAdjElement(e)))}getLinks(e,t){return e in this.outAdjacency&&t in this.outAdjacency[e]?this.outAdjacency[e][t]:new Set}removeLink(e,t,n){this.outAdjacency[e][t].delete(n),this.inAdjacency[n].delete(this.convertToInAdjElement(e,t))}addLink(e,t,n){e in this.outAdjacency||(this.outAdjacency[e]={}),t in this.outAdjacency[e]||(this.outAdjacency[e][t]=new Set),n in this.inAdjacency||(this.inAdjacency[n]=new Set),this.outAdjacency[e][t].add(n),this.inAdjacency[n].add(this.convertToInAdjElement(e,t))}removeDoc(e){e in this.outAdjacency&&delete this.outAdjacency[e],e in this.inAdjacency&&delete this.inAdjacency[e]}}var yt;function gt(){return new Date(Date.now()).toISOString()}function mt(e,t,n){let r=Object.keys(n).map(e=>parseInt(e)),o=(Math.max(...r)+1).toString(),i=st.create(null),a=st.create(0);i.appendChild(a);let l=new lt({0:{text:t}},i);return{id:o,name:e,lastUpdated:gt(),tree:l}}!function(e){e[e.Collapsed=0]="Collapsed",e[e.Expanded=1]="Expanded"}(yt||(yt={}));class vt{constructor(e){this.dataStore=e}treeToSerializationObject(e){return{entries:$t(e.getEntries()),node:ct.toTreeObj(e.getRoot())}}documentToSerializationObject(e){let t=Object.assign({},e);return{id:e.id,name:e.name,tree:this.treeToSerializationObject(t.tree),lastUpdated:e.lastUpdated}}getDocumentsString(){const e=this.dataStore.get("itero-docs");if(null==e){let e=xt();return this.saveDocuments(e)}return e}getDocuments(){const e=this.dataStore.get("itero-docs");let t;if(null==e)t=xt(),this.saveDocuments(t);else{let n=JSON.parse(e),r={};Object.entries(n).forEach(([e,t])=>{let n=Object.assign({},t);"lastUpdated"in t||(n.lastUpdated=gt()),console.log(" @@@ getDocuments, doc.tree.node = ",t.tree.node);let o=ct.createFromTreeObj(t.tree.node);n.tree=new lt(function(e){let t=Object.assign({},e);return Object.entries(t).map(([e,n])=>{let r=Object.assign({},n);r.displayState="COLLAPSED"===r.displayState?yt.Collapsed:yt.Expanded,t[e]=r}),t}(t.tree.entries),o),r[e]=n}),t=r}return t}saveDocuments(e){let t={};Object.entries(e).forEach(([e,n])=>{t[e]=this.documentToSerializationObject(n)});let n=JSON.stringify(t);return this.dataStore.set("itero-docs",n),n}}function Et(e){let t=function(e){let t={};return Object.entries(e).forEach(([e,n])=>{t[n.name]=e}),t}(e),{linkGraph:n,documents:r}=function(e,t){let n={},r=Object.assign({},e);return Object.entries(e).forEach(([e,o])=>{n[e]={};let i=n[e];Object.entries(o.tree.getEntries()).forEach(([o,a])=>{ft.Text.tryParse(a.text).linkedPages.forEach(a=>{if(o in i||(i[o]=new Set),a in t)n[e][o].add(t[a]);else{let e=mt(a,"TODO",r);r[e.id]=e}})})}),{linkGraph:new pt(n),documents:r}}(e,t),o={};return Object.entries(r).forEach(([e,t])=>{t.name.split(/\s+/).forEach(t=>{t in o||(o[t]=[]),o[t].push(e)})}),{documents:r,docIdLookupByDocName:t,linkGraph:n,docNameInvIndex:o}}function St(e,t){let n=ct.createFromTreeObj(t);return new lt(e,n)}function wt(e,t,n,r,o){return{id:e,name:t,tree:St(r,o),lastUpdated:n||gt()}}function xt(){let e=[{0:{text:"this is a note taking app"},1:{text:"you can use it to write a list. ¯\\\\_(ツ)_/¯"},2:{text:"Arrow Up/Down to navigate up/down (😲)"},3:{text:"or clicking on the text with your mouse works too"},4:{text:"actually it's a nested list"},5:{text:"you can keep nesting"},6:{text:"items"},7:{text:"and items",displayState:yt.Collapsed},8:{text:"a n d i t e m s"},9:{text:"you can collapse parts of the tree. the plus icon (+) indicates a collapsed item"},10:{text:"__collapse__: Ctrl + Up"},11:{text:"__expand__: Ctrl + Down"},12:{text:"make **bold portions** of the text with double asterisks (\\*\\*), like so:"},13:{text:"my \\**bolded** text"},14:{text:"make __emphasis__ with double underscore:"},15:{text:"my \\__emphasized__ text"},16:{text:"make link to another page: [[implementation details]]"},17:{text:"surround a page name with double square brackets: \\[[page name]]"},18:{text:"make external links in two ways"},19:{text:"just write a URL: https://en.wikipedia.org/wiki/Special:Random"},20:{text:"link name + URL: [random wiki page](https://en.wikipedia.org/wiki/Special:Random)"},21:{text:"type: \\[link name](www.example.com)"},22:{text:"write math symbols (courtesy of MathJax): $1 = \\frac{1}{\\sqrt \\pi} \\int_0^{\\infty} e^{-x^2} dx$"},23:{text:"surround your $\\LaTeX$ with dollar signs"},24:{text:"\\$1 = \\frac{1}{\\sqrt \\pi} \\int_0^{\\infty} e^{-x^2} dx\\$"},25:{text:"look, a matrix: $\\begin{bmatrix}\\cos \\theta & -\\sin \\theta\\\\\\sin \\theta & \\cos \\theta\\end{bmatrix}$"}},{root:[0,1,2,3,{4:[{5:[{6:[{7:[8]}]}]},{9:[10,11]}]},{12:[13]},{14:[15]},{16:[17]},{18:[19,{20:[21]}]},{22:[{23:[24]},25]}]}],t=[{0:{text:"svelte for components/state"},1:{text:"svelte-spa-router for routing"},2:{text:"parsimmon for the markup language parser/renderer"},3:{text:"mathjax v3 for math display"},4:{text:"font awesome (w/ svelte-awesome) icons"},5:{text:"parser tests using jest"}},{root:[0,1,2,3,4,5]}];return{1:wt("1","hello and what is this","2020-07-05T19:47:11.000Z",e[0],e[1]),2:wt("2","implementation details","2020-07-05T19:43:44.000Z",t[0],t[1])}}function $t(e){let t={};return Object.entries(e).map(([e,n])=>{let r=Object.assign({},n);r.displayState=r.displayState===yt.Collapsed?"COLLAPSED":"EXPANDED",t[e]=r}),t}const bt=function(){let{subscribe:e,update:t}=Oe({currentDocId:null,cursorSelectionStart:0,cursorSelectionEnd:0,cursorEntryId:null,docName:"",docNameInvIndex:{},docIsEditingName:!1,docsDisplay:{},docIdLookupByDocName:{},documents:{},linkGraph:null,sortMode:"name-asc"});function n(e){return{docId:e,isSelected:!1}}return{subscribe:e,init:(e,r,o,i)=>t(t=>{let a={};return Object.keys(e).forEach(e=>{a[e]=n(e)}),t.docsDisplay=a,t.docIdLookupByDocName=r,t.documents=e,t.docNameInvIndex=i,t.linkGraph=o,t}),createNewDocument:()=>t(e=>{let t=mt("New document","TODO",e.documents),r=t.id;return t.name+=" "+r,e.documents[r]=t,e.docIdLookupByDocName["New document"]=r,e.currentDocId=r,e.docName="New document",e.cursorSelectionStart=null,e.cursorSelectionEnd=null,e.cursorEntryId=0,e.docsDisplay[r]=n(r),e}),docsDisplaySetSelection:(e,n)=>t(t=>(t.docsDisplay[e].isSelected=n,t)),deleteDocs:e=>t(t=>(e.forEach(e=>{delete t.documents[e],delete t.docsDisplay[e],t.linkGraph.removeDoc(e)}),t)),changeSort:e=>t(t=>(t.sortMode=e,t)),navigateToDoc:e=>t(t=>{let n=t.documents[e];return t.currentDocId=e,t.docName=n.name,t.cursorEntryId=null,t}),cancelEditingDocName:()=>t(e=>(e.docIsEditingName=!1,e)),startEditingDocName:()=>t(e=>(e.docIsEditingName=!0,e)),saveEditingDocName:e=>t(t=>{t.docName=e,t.docIsEditingName=!1;let n=t.currentDocId,r=t.documents[n],o=r.name;r.name=e,r.lastUpdated=gt(),delete t.docIdLookupByDocName[o],t.docIdLookupByDocName[e]=n;let i=t.linkGraph.inAdjacency[n];return i&&i.forEach(n=>{const[r,i]=n.split("-"),a=t.documents[r].tree.getEntryText(i);t.documents[r].tree.setEntryText(i,a.replace(`[[${o}]]`,`[[${e}]]`))}),t}),saveCurrentPageDocEntry:(e,n,r)=>t(t=>{let o=t.documents[t.currentDocId];return o.tree.setEntryText(t.cursorEntryId,e),o.lastUpdated=gt(),t.cursorSelectionStart=n,t.cursorSelectionEnd=r,t}),saveCursor:(e,n,r)=>t(t=>(t.cursorSelectionStart=n,t.cursorSelectionEnd=r,t.cursorEntryId=e,t)),moveCursorLeft:e=>t(t=>{let n=t.cursorSelectionStart>e?e:t.cursorSelectionStart;return n!==t.cursorSelectionStart||n===t.cursorSelectionEnd?(t.cursorSelectionStart=Math.max(0,n-1),t.cursorSelectionEnd=t.cursorSelectionStart):t.cursorSelectionEnd=t.cursorSelectionStart,t}),moveCursorRight:e=>t(t=>(t.cursorSelectionStart===t.cursorSelectionEnd?(t.cursorSelectionStart=Math.min(e,t.cursorSelectionStart+1),t.cursorSelectionEnd=t.cursorSelectionStart):t.cursorSelectionStart=t.cursorSelectionEnd,t)),saveCursorPosition:e=>t(t=>(t.cursorSelectionStart=e,t.cursorSelectionEnd=e,t)),entryGoUp:()=>t(e=>{let t=e.currentDocId,n=e.cursorEntryId,r=e.documents[t].tree,o=r.hasEntryAbove(n)?r.getEntryIdAboveWithCollapse(n):n;return e.cursorEntryId=o,e}),entryGoDown:()=>t(e=>{let t=e.currentDocId,n=e.cursorEntryId,r=e.documents[t].tree,o=r.hasEntryBelow(n)?r.getEntryIdBelowWithCollapse(n):n;return e.cursorEntryId=o,e}),collapseEntry:(e,n)=>t(t=>{let r=t.currentDocId,o=t.documents[r],i=o.tree;if(i.hasChildren(e)&&i.getEntryDisplayState(e)===yt.Expanded){let t=new lt(i.getEntries(),i.getRoot());t.setEntryDisplayState(e,yt.Collapsed),o.tree=t}return n&&(t.cursorEntryId=null),t}),expandEntry:(e,n)=>t(t=>{let r=t.currentDocId,o=t.documents[r],i=o.tree;if(i.hasChildren(e)&&i.getEntryDisplayState(e)===yt.Collapsed){let t=new lt(i.getEntries(),i.getRoot());t.setEntryDisplayState(e,yt.Expanded),o.tree=t}return n&&(t.cursorEntryId=null),t}),indentEntry:()=>t(e=>{let t=e.currentDocId,n=e.cursorEntryId,r=e.documents[t].tree,o=r.getEntryNode(n);if(r.hasPrevSibling(n)){let i=r.getPrevSiblingNode(n);o.detach(),i.appendChild(o),e.documents[t].lastUpdated=gt()}return e}),dedentEntry:()=>t(e=>{let t=e.currentDocId,n=e.cursorEntryId,r=e.documents[t].tree,o=r.getEntryNode(n);if(r.hasParent(o.getValue())){let n=o.getParent();o.detach(),n.appendSiblingNode(o),e.documents[t].lastUpdated=gt()}return e}),splitEntry:()=>t(e=>{let t=e.currentDocId,n=e.cursorEntryId,r=e.cursorSelectionStart,o=e.documents[t],i=o.tree,a=i.getEntryText(n),l=i.getEntryNode(n).getParent().getValue();if(e.cursorSelectionStart!==e.cursorSelectionEnd&&(a=a.substring(0,e.cursorSelectionStart)+a.substring(e.cursorSelectionEnd),i.setEntryText(n,a),e.cursorSelectionEnd=e.cursorSelectionStart),i.getEntryDisplayState(n)===yt.Collapsed&&r===a.length){let t=o.tree.insertEntryBelow(n,l,"");return e.cursorEntryId=t,e.cursorSelectionStart=0,e}if(console.log(" %% splitEntry, no early return"),r===a.length){if(!i.hasChildren(n)){let t=o.tree.insertEntryBelow(n,l,"");return e.cursorEntryId=t,e.cursorSelectionStart=0,e}let t=o.tree.getEntryNode(n),r=o.tree.insertEntryAbove(t.getFirstChild().getValue(),n,"");return e.cursorEntryId=r,e.cursorSelectionStart=0,e}let s=a.substring(0,r),c=a.substring(r,a.length);return o.tree.setEntryText(n,c),o.tree.insertEntryAbove(n,l,s),e.cursorSelectionStart=0,e.cursorSelectionEnd=e.cursorSelectionStart,e}),backspaceEntry:()=>t(e=>{let t=e.documents[e.currentDocId],n=e.cursorSelectionStart,r=e.cursorEntryId,o=t.tree;if(e.cursorSelectionStart!==e.cursorSelectionEnd){let t=o.getEntryText(r),n=t.substring(0,e.cursorSelectionStart)+t.substring(e.cursorSelectionEnd);return o.setEntryText(r,n),e.cursorSelectionEnd=e.cursorSelectionStart,e}if(n>0){let t=o.getEntryText(r),i=t.length,a=Math.min(n,i),l=t.substring(0,a-1)+t.substring(a);return o.setEntryText(r,l),e.cursorSelectionStart=a-1,e.cursorSelectionEnd=e.cursorSelectionStart,e}if(o.hasEntryAbove(r)){let n=o.getEntryNode(r);if(n.hasChildren()&&(!n.hasPrev()||n.getPrev().hasChildren()))return e;let i,a,l=o.getEntryText(r);if(n.hasChildren()){let e=o.getEntryIdAbove(r),n=t.tree.getEntryText(e);t.tree.setEntryText(r,n+l),t.tree.removeEntry(e),i=r,a=n.length}else{let e=o.getEntryIdAboveWithCollapse(r),n=t.tree.getEntryText(e);t.tree.setEntryText(e,n+l),t.tree.removeEntry(r),i=e,a=n.length}e.cursorEntryId=i,e.cursorSelectionStart=a,e.cursorSelectionEnd=e.cursorSelectionStart}return e}),savePastedEntries:e=>t(t=>{let n=t.cursorEntryId,r=t.documents[t.currentDocId],o=r.tree.getEntryNode(n).getParent().getValue(),i=n;return e.split("\n").forEach(e=>{i=r.tree.insertEntryBelow(i,o,e)}),t}),updateEntryLinks:(e,r)=>t(t=>{let o=t.linkGraph.getLinks(t.currentDocId,e),i=r.map(e=>{let r=t.docIdLookupByDocName[e];if(r)return r;let o=mt(e,"TODO",t.documents),i=o.id;return t.documents[i]=o,t.docsDisplay[i]=n(i),t.docIdLookupByDocName[e]=i,i}),a=new Set(i),[l,s]=function(e,t){let n=[],r=[];for(let[r,o]of e.entries())t.has(r)||n.push(r);for(let[n,o]of t.entries())e.has(n)||r.push(n);return[n,r]}(o,a);return l.forEach(n=>{t.linkGraph.removeLink(t.currentDocId,e,n)}),s.forEach(n=>{t.linkGraph.addLink(t.currentDocId,e,n)}),t}),swapWithAboveEntry:()=>t(e=>{let t=e.cursorEntryId,n=e.documents[e.currentDocId],r=n.tree;if(r.hasPrevSibling(t)){let e=r.getPrevSiblingNode(t).getValue();r.swapAdjacentSiblings(e,t),n.lastUpdated=gt()}return e}),swapWithBelowEntry:()=>t(e=>{let t=e.cursorEntryId,n=e.documents[e.currentDocId],r=n.tree;if(r.hasNextSibling(t)){let e=r.getNextSiblingNode(t).getValue();r.swapAdjacentSiblings(t,e),n.lastUpdated=gt()}return e}),cycleEntryHeadingSize:e=>t(t=>(t.documents[t.currentDocId].tree.cycleEntryHeadingSize(e),t)),replaceEntryTextAroundCursor:e=>t(t=>{console.log(" >> handleReplaceEntryTextARoundCursor, (new, selStart) = ",e,t.cursorSelectionStart);let n=t.documents[t.currentDocId].tree,r=t.cursorSelectionStart,o=t.cursorSelectionEnd;if(r===o){let i=n.getEntryText(t.cursorEntryId),[a,l]=[i.substring(0,r),i.substring(r)],s=/^([^\[\]]*)\[\[(?!\\)/g,c=[...a].reverse().join("").match(s),u=/^(.{0}|([^\[\]]*[^\]\\]))]]/g,d=l.match(u);if(null!=c&&null!=d){let n=c[0],a=[...n.substring(0,n.length-2)].reverse().join(""),l=d[0].substring(0,d[0].length-2),s=r-a.length,u=o+l.length,h=i.substring(0,s)+e+i.substring(u);t.documents[t.currentDocId].tree.setEntryText(t.cursorEntryId,h)}}return t})}}();function kt(t){let n,r;return{c(){n=m("div"),$(n,"class",r=h("rendered-entry heading-"+t[1])+" svelte-18tp5fq"),$(n,"data-entry-id",t[0]),$(n,"data-testid","rendered-entry")},m(e,r){p(e,n,r),t[5](n)},p(e,[t]){2&t&&r!==(r=h("rendered-entry heading-"+e[1])+" svelte-18tp5fq")&&$(n,"class",r),1&t&&$(n,"data-entry-id",e[0])},i:e,o:e,d(e){e&&y(n),t[5](null)}}}function Ct(e,t,n){let r,{entryId:o}=t,{entryText:i}=t,{entryHeadingSize:a}=t,{handleUpdateEntryLinks:l}=t;return e.$set=e=>{"entryId"in e&&n(0,o=e.entryId),"entryText"in e&&n(3,i=e.entryText),"entryHeadingSize"in e&&n(1,a=e.entryHeadingSize),"handleUpdateEntryLinks"in e&&n(4,l=e.handleUpdateEntryLinks)},e.$$.update=()=>{if(29&e.$$.dirty&&r)try{let e=ft.Text.tryParse(i);n(2,r.innerHTML=e.html,r),l(o,e.linkedPages)}catch(e){console.log("err parsing: ",e),n(2,r.innerHTML=i,r)}},[o,a,r,i,l,function(e){P[e?"unshift":"push"](()=>{r=e,n(2,r),n(3,i),n(4,l),n(0,o)})}]}class It extends oe{constructor(e){super(),re(this,e,Ct,kt,a,{entryId:0,entryText:3,entryHeadingSize:1,handleUpdateEntryLinks:4})}}function Dt(e,t,n){const r=e.slice();return r[5]=t[n],r}function Nt(e,t,n){const r=e.slice();return r[2]=t[n],r}function Lt(e){let t,n,r,o,i=Object.values(e[0]),a=[];for(let t=0;t<i.length;t+=1)a[t]=At(Nt(e,i,t));const l=e=>Q(a[e],1,1,()=>{a[e]=null});return{c(){t=m("h2"),t.textContent="References",n=S();for(let e=0;e<a.length;e+=1)a[e].c();r=w(),$(t,"class","svelte-1t5boow")},m(e,i){p(e,t,i),p(e,n,i);for(let t=0;t<a.length;t+=1)a[t].m(e,i);p(e,r,i),o=!0},p(e,t){if(1&t){let n;for(i=Object.values(e[0]),n=0;n<i.length;n+=1){const o=Nt(e,i,n);a[n]?(a[n].p(o,t),Z(a[n],1)):(a[n]=At(o),a[n].c(),Z(a[n],1),a[n].m(r.parentNode,r))}for(K(),n=i.length;n<a.length;n+=1)l(n);X()}},i(e){if(!o){for(let e=0;e<i.length;e+=1)Z(a[e]);o=!0}},o(e){a=a.filter(Boolean);for(let e=0;e<a.length;e+=1)Q(a[e]);o=!1},d(e){e&&y(t),e&&y(n),g(a,e),e&&y(r)}}}function jt(e){let t,n,r,o;return n=new It({props:{entryId:e[5].id,entryText:e[5].text,entryHeadingSize:e[5].headingSize,handleUpdateEntryLinks:Tt}}),{c(){t=m("li"),ee(n.$$.fragment),r=S()},m(e,i){p(e,t,i),te(n,t,null),f(t,r),o=!0},p(e,t){const r={};1&t&&(r.entryId=e[5].id),1&t&&(r.entryText=e[5].text),1&t&&(r.entryHeadingSize=e[5].headingSize),n.$set(r)},i(e){o||(Z(n.$$.fragment,e),o=!0)},o(e){Q(n.$$.fragment,e),o=!1},d(e){e&&y(t),ne(n)}}}function At(e){let t,n,r,o,i,a,l,s,c,u=e[2].name+"",d=Object.values(e[2].entries),h=[];for(let t=0;t<d.length;t+=1)h[t]=jt(Dt(e,d,t));const v=e=>Q(h[e],1,1,()=>{h[e]=null});return{c(){t=m("div"),n=m("h3"),r=m("a"),o=E(u),a=S(),l=m("ul");for(let e=0;e<h.length;e+=1)h[e].c();s=S(),$(r,"href",i="#/doc/"+e[2].id),$(n,"class","svelte-1t5boow"),$(t,"class","backlinks-page-display svelte-1t5boow")},m(e,i){p(e,t,i),f(t,n),f(n,r),f(r,o),f(t,a),f(t,l);for(let e=0;e<h.length;e+=1)h[e].m(l,null);f(t,s),c=!0},p(e,t){if((!c||1&t)&&u!==(u=e[2].name+"")&&k(o,u),(!c||1&t&&i!==(i="#/doc/"+e[2].id))&&$(r,"href",i),1&t){let n;for(d=Object.values(e[2].entries),n=0;n<d.length;n+=1){const r=Dt(e,d,n);h[n]?(h[n].p(r,t),Z(h[n],1)):(h[n]=jt(r),h[n].c(),Z(h[n],1),h[n].m(l,null))}for(K(),n=d.length;n<h.length;n+=1)v(n);X()}},i(e){if(!c){for(let e=0;e<d.length;e+=1)Z(h[e]);c=!0}},o(e){h=h.filter(Boolean);for(let e=0;e<h.length;e+=1)Q(h[e]);c=!1},d(e){e&&y(t),g(h,e)}}}function Bt(e){let t,n,r=e[1]&&Lt(e);return{c(){t=m("div"),r&&r.c(),$(t,"id","doc-references"),$(t,"class","svelte-1t5boow")},m(e,o){p(e,t,o),r&&r.m(t,null),n=!0},p(e,[n]){e[1]?r?(r.p(e,n),2&n&&Z(r,1)):(r=Lt(e),r.c(),Z(r,1),r.m(t,null)):r&&(K(),Q(r,1,1,()=>{r=null}),X())},i(e){n||(Z(r),n=!0)},o(e){Q(r),n=!1},d(e){e&&y(t),r&&r.d()}}}const Tt=()=>{};function Pt(e,t,n){let r,{backlinks:o}=t;return console.log("backlinks = ",o),e.$set=e=>{"backlinks"in e&&n(0,o=e.backlinks)},e.$$.update=()=>{1&e.$$.dirty&&n(1,r=Object.keys(o).length)},[o,r]}class Ot extends oe{constructor(e){super(),re(this,e,Pt,Bt,a,{backlinks:0})}}function _t(t){let n;return{c(){n=m("header"),n.innerHTML='<span class="home svelte-1ilci2u"><a href="#/">🏠</a></span>\n  &gt;',$(n,"id","doc-header"),$(n,"class","svelte-1ilci2u")},m(e,t){p(e,n,t)},p:e,i:e,o:e,d(e){e&&y(n)}}}class Mt extends oe{constructor(e){super(),re(this,e,null,_t,a,{})}}function zt(t){let n,r,i,a;return{c(){n=m("input"),$(n,"type","text"),$(n,"class",r=h("entry-input heading-"+t[2])+" svelte-12azt86"),n.value=t[1],$(n,"data-testid","entry-input"),I(n,"highlighted",t[0]===t[3])},m(e,r){p(e,n,r),t[30](n),i||(a=[x(n,"input",t[7]),x(n,"click",t[31]),x(n,"keydown",t[5]),x(n,"paste",t[8])],i=!0)},p(e,t){4&t[0]&&r!==(r=h("entry-input heading-"+e[2])+" svelte-12azt86")&&$(n,"class",r),2&t[0]&&n.value!==e[1]&&(n.value=e[1]),13&t[0]&&I(n,"highlighted",e[0]===e[3])},i:e,o:e,d(e){e&&y(n),t[30](null),i=!1,o(a)}}}function Ut(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function l(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}s((r=r.apply(e,t||[])).next())}))};let o,{entryId:i}=t,{entryValue:a}=t,{entryHeadingSize:l}=t,{docCursorEntryId:s}=t,{docCursorSelStart:c}=t,{docCursorSelEnd:u}=t,{isEntryAbove:d}=t,{isEntryBelow:h}=t,{handleGoUp:f}=t,{handleGoDown:p}=t,{handleEntryBackspace:y}=t,{handleCollapseEntry:g}=t,{handleExpandEntry:m}=t,{handleSplitEntry:v}=t,{handleIndent:E}=t,{handleDedent:S}=t,{handleMultilinePaste:w}=t,{handleMoveCursorLeft:x}=t,{handleMoveCursorRight:$}=t,{handleSaveCursorPos:b}=t,{handleSaveDocEntry:k}=t,{handleSaveFullCursor:C}=t,{handleSwapWithAboveEntry:I}=t,{handleSwapWithBelowEntry:D}=t,{handleCycleEntryHeadingSize:N}=t;function L(e,t){let n=e.target,r=n.selectionStart,o=n.selectionEnd;s===t&&c==r&&u==o||C(t,r,o)}j(()=>r(void 0,void 0,void 0,(function*(){let e=document.getElementById("node-name-input");document.activeElement!==e&&o&&(i===s&&document.activeElement!==o&&o.focus(),i===s&&o.setSelectionRange(c,u))})));return e.$set=e=>{"entryId"in e&&n(0,i=e.entryId),"entryValue"in e&&n(1,a=e.entryValue),"entryHeadingSize"in e&&n(2,l=e.entryHeadingSize),"docCursorEntryId"in e&&n(3,s=e.docCursorEntryId),"docCursorSelStart"in e&&n(9,c=e.docCursorSelStart),"docCursorSelEnd"in e&&n(10,u=e.docCursorSelEnd),"isEntryAbove"in e&&n(11,d=e.isEntryAbove),"isEntryBelow"in e&&n(12,h=e.isEntryBelow),"handleGoUp"in e&&n(13,f=e.handleGoUp),"handleGoDown"in e&&n(14,p=e.handleGoDown),"handleEntryBackspace"in e&&n(15,y=e.handleEntryBackspace),"handleCollapseEntry"in e&&n(16,g=e.handleCollapseEntry),"handleExpandEntry"in e&&n(17,m=e.handleExpandEntry),"handleSplitEntry"in e&&n(18,v=e.handleSplitEntry),"handleIndent"in e&&n(19,E=e.handleIndent),"handleDedent"in e&&n(20,S=e.handleDedent),"handleMultilinePaste"in e&&n(21,w=e.handleMultilinePaste),"handleMoveCursorLeft"in e&&n(22,x=e.handleMoveCursorLeft),"handleMoveCursorRight"in e&&n(23,$=e.handleMoveCursorRight),"handleSaveCursorPos"in e&&n(24,b=e.handleSaveCursorPos),"handleSaveDocEntry"in e&&n(25,k=e.handleSaveDocEntry),"handleSaveFullCursor"in e&&n(26,C=e.handleSaveFullCursor),"handleSwapWithAboveEntry"in e&&n(27,I=e.handleSwapWithAboveEntry),"handleSwapWithBelowEntry"in e&&n(28,D=e.handleSwapWithBelowEntry),"handleCycleEntryHeadingSize"in e&&n(29,N=e.handleCycleEntryHeadingSize)},[i,a,l,s,o,function(e){return r(this,void 0,void 0,(function*(){if("Tab"===e.key)return e.preventDefault(),void(e.shiftKey?S():E());if("ArrowUp"===e.key)e.preventDefault(),e.ctrlKey?g(i):e.shiftKey&&e.altKey?I(i):d&&f();else if("ArrowDown"===e.key)e.preventDefault(),e.ctrlKey?m(i):e.shiftKey&&e.altKey?D(i):h&&p();else if("Backspace"===e.key)e.preventDefault(),y();else if("Enter"===e.key)e.preventDefault(),v();else if(["ArrowLeft","ArrowRight","Home","End"].indexOf(e.key)>-1)e.preventDefault(),function(e,t){switch(e.key){case"ArrowLeft":return void x(t);case"ArrowRight":return void $(t);case"Home":return void b(0);case"End":b(t)}}(e,this.value.length);else{if("H"!=e.key||!e.ctrlKey||!e.shiftKey)return;e.preventDefault(),N(i)}yield H(),this.selectionStart=c,this.selectionEnd=u}))},L,function(e){let t=e.target,n=t.value;k(n,t.selectionStart,t.selectionEnd)},function(e){let t=(e.clipboardData||window.clipboardData).getData("text");t.split("\n").length>1&&(e.preventDefault(),w(t))},c,u,d,h,f,p,y,g,m,v,E,S,w,x,$,b,k,C,I,D,N,function(e){P[e?"unshift":"push"](()=>{o=e,n(4,o)})},e=>L(e,i)]}class Ht extends oe{constructor(e){super(),re(this,e,Ut,zt,a,{entryId:0,entryValue:1,entryHeadingSize:2,docCursorEntryId:3,docCursorSelStart:9,docCursorSelEnd:10,isEntryAbove:11,isEntryBelow:12,handleGoUp:13,handleGoDown:14,handleEntryBackspace:15,handleCollapseEntry:16,handleExpandEntry:17,handleSplitEntry:18,handleIndent:19,handleDedent:20,handleMultilinePaste:21,handleMoveCursorLeft:22,handleMoveCursorRight:23,handleSaveCursorPos:24,handleSaveDocEntry:25,handleSaveFullCursor:26,handleSwapWithAboveEntry:27,handleSwapWithBelowEntry:28,handleCycleEntryHeadingSize:29},[-1,-1])}}function Rt(e,t,n){const r=e.slice();return r[37]=t[n],r}function Vt(e,t,n){const r=e.slice();return r[40]=t[n],r}function Ft(e){let t,n,r,o,i,a,l,s,c,u,d,h,g,v,E;const b=[Wt,Gt],k=[];function C(e,t){return 2&t[0]&&(r=!!e[33](e[1])),r?0:1}o=C(e,[-1]),i=k[o]=b[o](e);const I=[Jt,qt],D=[];function N(e,t){return e[29]?0:1}c=N(e),u=D[c]=I[c](e);let L=e[31]&&Kt(e);return{c(){t=m("div"),n=m("div"),i.c(),a=S(),l=m("span"),l.textContent="​",s=S(),u.c(),d=S(),L&&L.c(),h=w(),$(n,"class","icon-container svelte-117i9oi"),$(t,"class","entry-display svelte-117i9oi"),$(t,"data-entry-id",e[25])},m(r,i){p(r,t,i),f(t,n),k[o].m(n,null),f(t,a),f(t,l),f(t,s),D[c].m(t,null),p(r,d,i),L&&L.m(r,i),p(r,h,i),g=!0,v||(E=x(n,"click",e[36]),v=!0)},p(e,r){let a=o;o=C(e,r),o===a?k[o].p(e,r):(K(),Q(k[a],1,1,()=>{k[a]=null}),X(),i=k[o],i||(i=k[o]=b[o](e),i.c()),Z(i,1),i.m(n,null));let l=c;c=N(e),c===l?D[c].p(e,r):(K(),Q(D[l],1,1,()=>{D[l]=null}),X(),u=D[c],u||(u=D[c]=I[c](e),u.c()),Z(u,1),u.m(t,null)),(!g||33554432&r[0])&&$(t,"data-entry-id",e[25]),e[31]?L?L.p(e,r):(L=Kt(e),L.c(),L.m(h.parentNode,h)):L&&(L.d(1),L=null)},i(e){g||(Z(i),Z(u),g=!0)},o(e){Q(i),Q(u),g=!1},d(e){e&&y(t),k[o].d(),D[c].d(),e&&y(d),L&&L.d(e),e&&y(h),v=!1,E()}}}function Gt(t){let n,r;return n=new De({props:{data:Ne,scale:"0.51"}}),{c(){ee(n.$$.fragment)},m(e,t){te(n,e,t),r=!0},p:e,i(e){r||(Z(n.$$.fragment,e),r=!0)},o(e){Q(n.$$.fragment,e),r=!1},d(e){ne(n,e)}}}function Wt(t){let n,r;return n=new De({props:{data:Ae,scale:"0.51"}}),{c(){ee(n.$$.fragment)},m(e,t){te(n,e,t),r=!0},p:e,i(e){r||(Z(n.$$.fragment,e),r=!0)},o(e){Q(n.$$.fragment,e),r=!1},d(e){ne(n,e)}}}function qt(e){let t,n;return t=new It({props:{entryId:e[25],entryText:e[0].getEntryText(e[25]),entryHeadingSize:e[0].getEntryHeadingSize(e[25]),handleUpdateEntryLinks:e[22]}}),{c(){ee(t.$$.fragment)},m(e,r){te(t,e,r),n=!0},p(e,n){const r={};33554432&n[0]&&(r.entryId=e[25]),33554433&n[0]&&(r.entryText=e[0].getEntryText(e[25])),33554433&n[0]&&(r.entryHeadingSize=e[0].getEntryHeadingSize(e[25])),4194304&n[0]&&(r.handleUpdateEntryLinks=e[22]),t.$set(r)},i(e){n||(Z(t.$$.fragment,e),n=!0)},o(e){Q(t.$$.fragment,e),n=!1},d(e){ne(t,e)}}}function Jt(e){let t,n;return t=new Ht({props:{entryId:e[25],entryValue:e[0].getEntryText(e[25]),entryHeadingSize:e[0].getEntryHeadingSize(e[25]),docCursorEntryId:e[2],docCursorSelStart:e[3],docCursorSelEnd:e[4],isEntryAbove:e[0].hasEntryAbove(e[25]),isEntryBelow:e[0].hasEntryBelow(e[25]),handleSaveDocEntry:e[18],handleSaveFullCursor:e[19],handleGoUp:e[6],handleGoDown:e[7],handleCollapseEntry:e[9],handleExpandEntry:e[10],handleSplitEntry:e[11],handleEntryBackspace:e[8],handleIndent:e[12],handleDedent:e[13],handleMultilinePaste:e[14],handleMoveCursorLeft:e[15],handleMoveCursorRight:e[16],handleSaveCursorPos:e[17],handleSwapWithAboveEntry:e[20],handleSwapWithBelowEntry:e[21],handleCycleEntryHeadingSize:e[23]}}),{c(){ee(t.$$.fragment)},m(e,r){te(t,e,r),n=!0},p(e,n){const r={};33554432&n[0]&&(r.entryId=e[25]),33554433&n[0]&&(r.entryValue=e[0].getEntryText(e[25])),33554433&n[0]&&(r.entryHeadingSize=e[0].getEntryHeadingSize(e[25])),4&n[0]&&(r.docCursorEntryId=e[2]),8&n[0]&&(r.docCursorSelStart=e[3]),16&n[0]&&(r.docCursorSelEnd=e[4]),33554433&n[0]&&(r.isEntryAbove=e[0].hasEntryAbove(e[25])),33554433&n[0]&&(r.isEntryBelow=e[0].hasEntryBelow(e[25])),262144&n[0]&&(r.handleSaveDocEntry=e[18]),524288&n[0]&&(r.handleSaveFullCursor=e[19]),64&n[0]&&(r.handleGoUp=e[6]),128&n[0]&&(r.handleGoDown=e[7]),512&n[0]&&(r.handleCollapseEntry=e[9]),1024&n[0]&&(r.handleExpandEntry=e[10]),2048&n[0]&&(r.handleSplitEntry=e[11]),256&n[0]&&(r.handleEntryBackspace=e[8]),4096&n[0]&&(r.handleIndent=e[12]),8192&n[0]&&(r.handleDedent=e[13]),16384&n[0]&&(r.handleMultilinePaste=e[14]),32768&n[0]&&(r.handleMoveCursorLeft=e[15]),65536&n[0]&&(r.handleMoveCursorRight=e[16]),131072&n[0]&&(r.handleSaveCursorPos=e[17]),1048576&n[0]&&(r.handleSwapWithAboveEntry=e[20]),2097152&n[0]&&(r.handleSwapWithBelowEntry=e[21]),8388608&n[0]&&(r.handleCycleEntryHeadingSize=e[23]),t.$set(r)},i(e){n||(Z(t.$$.fragment,e),n=!0)},o(e){Q(t.$$.fragment,e),n=!1},d(e){ne(t,e)}}}function Kt(e){let t;function n(e,t){return e[30].length>0?Zt:Xt}let r=n(e),o=r(e);return{c(){t=m("div"),o.c(),$(t,"id","doc-name-autocomplete"),$(t,"class","svelte-117i9oi")},m(e,n){p(e,t,n),o.m(t,null)},p(e,i){r===(r=n(e))&&o?o.p(e,i):(o.d(1),o=r(e),o&&(o.c(),o.m(t,null)))},d(e){e&&y(t),o.d()}}}function Xt(t){let n;return{c(){n=m("div"),n.innerHTML="<em>Search page titles</em>",$(n,"id","doc-name-autocomplete-default"),$(n,"class","svelte-117i9oi")},m(e,t){p(e,n,t)},p:e,d(e){e&&y(n)}}}function Zt(e){let t,n=e[30],r=[];for(let t=0;t<n.length;t+=1)r[t]=Qt(Vt(e,n,t));return{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=w()},m(e,n){for(let t=0;t<r.length;t+=1)r[t].m(e,n);p(e,t,n)},p(e,o){if(1073741824&o[0]|16&o[1]){let i;for(n=e[30],i=0;i<n.length;i+=1){const a=Vt(e,n,i);r[i]?r[i].p(a,o):(r[i]=Qt(a),r[i].c(),r[i].m(t.parentNode,t))}for(;i<r.length;i+=1)r[i].d(1);r.length=n.length}},d(e){g(r,e),e&&y(t)}}}function Qt(e){let t,n,r,o,i=e[40]+"";return{c(){t=m("div"),n=E(i),$(t,"class","doc-name-autocomplete-option svelte-117i9oi")},m(i,a){p(i,t,a),f(t,n),r||(o=x(t,"click",e[35]),r=!0)},p(e,t){1073741824&t[0]&&i!==(i=e[40]+"")&&k(n,i)},d(e){e&&y(t),r=!1,o()}}}function Yt(e){let t,n,r,o=e[26],i=[];for(let t=0;t<o.length;t+=1)i[t]=en(Rt(e,o,t));const a=e=>Q(i[e],1,1,()=>{i[e]=null});return{c(){t=m("ul");for(let e=0;e<i.length;e+=1)i[e].c();$(t,"class",n=h("tree-node-list "+(e[32]?"root-list":""))+" svelte-117i9oi")},m(e,n){p(e,t,n);for(let e=0;e<i.length;e+=1)i[e].m(t,null);r=!0},p(e,l){if(100663293&l[0]){let n;for(o=e[26],n=0;n<o.length;n+=1){const r=Rt(e,o,n);i[n]?(i[n].p(r,l),Z(i[n],1)):(i[n]=en(r),i[n].c(),Z(i[n],1),i[n].m(t,null))}for(K(),n=o.length;n<i.length;n+=1)a(n);X()}(!r||2&l[1]&&n!==(n=h("tree-node-list "+(e[32]?"root-list":""))+" svelte-117i9oi"))&&$(t,"class",n)},i(e){if(!r){for(let e=0;e<o.length;e+=1)Z(i[e]);r=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)Q(i[e]);r=!1},d(e){e&&y(t),g(i,e)}}}function en(e){let t,n,r,o;return n=new rn({props:{tree:e[0],flowyTreeNode:e[37],docCursorEntryId:e[2],docCursorSelStart:e[3],docCursorSelEnd:e[4],findRelevantDocNames:e[5],handleSaveDocEntry:e[18],handleSaveFullCursor:e[19],handleGoUp:e[6],handleGoDown:e[7],handleCollapseEntry:e[9],handleExpandEntry:e[10],handleSplitEntry:e[11],handleEntryBackspace:e[8],handleIndent:e[12],handleDedent:e[13],handleMultilinePaste:e[14],handleMoveCursorLeft:e[15],handleMoveCursorRight:e[16],handleSaveCursorPos:e[17],handleUpdateEntryLinks:e[22],handleSwapWithAboveEntry:e[20],handleSwapWithBelowEntry:e[21],handleCycleEntryHeadingSize:e[23],handleReplaceEntryTextAroundCursor:e[24]}}),{c(){t=m("li"),ee(n.$$.fragment),r=S(),$(t,"class","svelte-117i9oi")},m(e,i){p(e,t,i),te(n,t,null),f(t,r),o=!0},p(e,t){const r={};1&t[0]&&(r.tree=e[0]),67108864&t[0]&&(r.flowyTreeNode=e[37]),4&t[0]&&(r.docCursorEntryId=e[2]),8&t[0]&&(r.docCursorSelStart=e[3]),16&t[0]&&(r.docCursorSelEnd=e[4]),32&t[0]&&(r.findRelevantDocNames=e[5]),262144&t[0]&&(r.handleSaveDocEntry=e[18]),524288&t[0]&&(r.handleSaveFullCursor=e[19]),64&t[0]&&(r.handleGoUp=e[6]),128&t[0]&&(r.handleGoDown=e[7]),512&t[0]&&(r.handleCollapseEntry=e[9]),1024&t[0]&&(r.handleExpandEntry=e[10]),2048&t[0]&&(r.handleSplitEntry=e[11]),256&t[0]&&(r.handleEntryBackspace=e[8]),4096&t[0]&&(r.handleIndent=e[12]),8192&t[0]&&(r.handleDedent=e[13]),16384&t[0]&&(r.handleMultilinePaste=e[14]),32768&t[0]&&(r.handleMoveCursorLeft=e[15]),65536&t[0]&&(r.handleMoveCursorRight=e[16]),131072&t[0]&&(r.handleSaveCursorPos=e[17]),4194304&t[0]&&(r.handleUpdateEntryLinks=e[22]),1048576&t[0]&&(r.handleSwapWithAboveEntry=e[20]),2097152&t[0]&&(r.handleSwapWithBelowEntry=e[21]),8388608&t[0]&&(r.handleCycleEntryHeadingSize=e[23]),16777216&t[0]&&(r.handleReplaceEntryTextAroundCursor=e[24]),n.$set(r)},i(e){o||(Z(n.$$.fragment,e),o=!0)},o(e){Q(n.$$.fragment,e),o=!1},d(e){e&&y(t),ne(n)}}}function tn(e){let t,n,r,o=null!==e[25]&&Ft(e),i=e[27]&&!e[28]&&Yt(e);return{c(){o&&o.c(),t=S(),i&&i.c(),n=w()},m(e,a){o&&o.m(e,a),p(e,t,a),i&&i.m(e,a),p(e,n,a),r=!0},p(e,r){null!==e[25]?o?(o.p(e,r),33554432&r[0]&&Z(o,1)):(o=Ft(e),o.c(),Z(o,1),o.m(t.parentNode,t)):o&&(K(),Q(o,1,1,()=>{o=null}),X()),e[27]&&!e[28]?i?(i.p(e,r),402653184&r[0]&&Z(i,1)):(i=Yt(e),i.c(),Z(i,1),i.m(n.parentNode,n)):i&&(K(),Q(i,1,1,()=>{i=null}),X())},i(e){r||(Z(o),Z(i),r=!0)},o(e){Q(o),Q(i),r=!1},d(e){o&&o.d(e),e&&y(t),i&&i.d(e),e&&y(n)}}}function nn(e,t,n){let r,o,i,a,l,s,c,{tree:u}=t,{flowyTreeNode:d}=t,{docCursorEntryId:h}=t,{docCursorSelStart:f}=t,{docCursorSelEnd:p}=t,{findRelevantDocNames:y}=t,{handleGoUp:g}=t,{handleGoDown:m}=t,{handleEntryBackspace:v}=t,{handleCollapseEntry:E}=t,{handleExpandEntry:S}=t,{handleSplitEntry:w}=t,{handleIndent:x}=t,{handleDedent:$}=t,{handleMultilinePaste:b}=t,{handleMoveCursorLeft:k}=t,{handleMoveCursorRight:C}=t,{handleSaveCursorPos:I}=t,{handleSaveDocEntry:D}=t,{handleSaveFullCursor:N}=t,{handleSwapWithAboveEntry:L}=t,{handleSwapWithBelowEntry:j}=t,{handleUpdateEntryLinks:A}=t,{handleCycleEntryHeadingSize:B}=t,{handleReplaceEntryTextAroundCursor:T}=t;function P(e){return e.hasChildren()&&u.getEntryDisplayState(e.getValue())===yt.Collapsed}function O(e,t){t?S(e,!0):E(e,!0)}let _;return e.$set=e=>{"tree"in e&&n(0,u=e.tree),"flowyTreeNode"in e&&n(1,d=e.flowyTreeNode),"docCursorEntryId"in e&&n(2,h=e.docCursorEntryId),"docCursorSelStart"in e&&n(3,f=e.docCursorSelStart),"docCursorSelEnd"in e&&n(4,p=e.docCursorSelEnd),"findRelevantDocNames"in e&&n(5,y=e.findRelevantDocNames),"handleGoUp"in e&&n(6,g=e.handleGoUp),"handleGoDown"in e&&n(7,m=e.handleGoDown),"handleEntryBackspace"in e&&n(8,v=e.handleEntryBackspace),"handleCollapseEntry"in e&&n(9,E=e.handleCollapseEntry),"handleExpandEntry"in e&&n(10,S=e.handleExpandEntry),"handleSplitEntry"in e&&n(11,w=e.handleSplitEntry),"handleIndent"in e&&n(12,x=e.handleIndent),"handleDedent"in e&&n(13,$=e.handleDedent),"handleMultilinePaste"in e&&n(14,b=e.handleMultilinePaste),"handleMoveCursorLeft"in e&&n(15,k=e.handleMoveCursorLeft),"handleMoveCursorRight"in e&&n(16,C=e.handleMoveCursorRight),"handleSaveCursorPos"in e&&n(17,I=e.handleSaveCursorPos),"handleSaveDocEntry"in e&&n(18,D=e.handleSaveDocEntry),"handleSaveFullCursor"in e&&n(19,N=e.handleSaveFullCursor),"handleSwapWithAboveEntry"in e&&n(20,L=e.handleSwapWithAboveEntry),"handleSwapWithBelowEntry"in e&&n(21,j=e.handleSwapWithBelowEntry),"handleUpdateEntryLinks"in e&&n(22,A=e.handleUpdateEntryLinks),"handleCycleEntryHeadingSize"in e&&n(23,B=e.handleCycleEntryHeadingSize),"handleReplaceEntryTextAroundCursor"in e&&n(24,T=e.handleReplaceEntryTextAroundCursor)},e.$$.update=()=>{2&e.$$.dirty[0]&&n(25,r=d.getValue()),33554432&e.$$.dirty[0]&&n(32,_=null==r),2&e.$$.dirty[0]&&n(26,o=d.getChildNodeArray()),67108864&e.$$.dirty[0]&&n(27,i=o.length>0),167772161&e.$$.dirty[0]&&n(28,a=i&&u.getEntryDisplayState(r)==yt.Collapsed),33554436&e.$$.dirty[0]&&n(29,l=null!=r&&r===h),570425401&e.$$.dirty[0]&&n(30,s=function(){if(l&&f===p){let e=u.getEntryText(r),[t,n]=[e.substring(0,f),e.substring(f)],o=/^([^\[\]]*)\[\[(?!\\)/g,i=[...t].reverse().join("").match(o),a=/^(.{0}|([^\[\]]*[^\]\\]))]]/g,l=n.match(a);if(null!=i&&null!=l){let e=i[0],t=[...e.substring(0,e.length-2)].reverse().join("")+l[0].substring(0,l[0].length-2);return t.length>0?y(t):[]}}return null}()),1073741824&e.$$.dirty[0]&&n(31,c=null!==s)},[u,d,h,f,p,y,g,m,v,E,S,w,x,$,b,k,C,I,D,N,L,j,A,B,T,r,o,i,a,l,s,c,_,P,O,function(e){e.preventDefault();let t=e.target;T(t.textContent)},()=>O(r,P(d))]}class rn extends oe{constructor(e){super(),re(this,e,nn,tn,a,{tree:0,flowyTreeNode:1,docCursorEntryId:2,docCursorSelStart:3,docCursorSelEnd:4,findRelevantDocNames:5,handleGoUp:6,handleGoDown:7,handleEntryBackspace:8,handleCollapseEntry:9,handleExpandEntry:10,handleSplitEntry:11,handleIndent:12,handleDedent:13,handleMultilinePaste:14,handleMoveCursorLeft:15,handleMoveCursorRight:16,handleSaveCursorPos:17,handleSaveDocEntry:18,handleSaveFullCursor:19,handleSwapWithAboveEntry:20,handleSwapWithBelowEntry:21,handleUpdateEntryLinks:22,handleCycleEntryHeadingSize:23,handleReplaceEntryTextAroundCursor:24},[-1,-1])}}function on(e){let t,n,r,o,i,a,l,s,c;return a=new De({props:{data:Le,scale:"0.91"}}),{c(){t=m("div"),n=m("span"),r=E(e[5]),o=S(),i=m("span"),ee(a.$$.fragment),$(n,"id","doc-name-display"),$(n,"class","svelte-14sal7q"),$(i,"id","doc-name-edit"),$(i,"class","svelte-14sal7q"),$(t,"id","doc-name"),$(t,"class","svelte-14sal7q")},m(u,d){p(u,t,d),f(t,n),f(n,r),f(t,o),f(t,i),te(a,i,null),l=!0,s||(c=x(i,"click",e[9]),s=!0)},p(e,t){(!l||32&t)&&k(r,e[5])},i(e){l||(Z(a.$$.fragment,e),l=!0)},o(e){Q(a.$$.fragment,e),l=!1},d(e){e&&y(t),ne(a),s=!1,c()}}}function an(t){let n,r,i,a,l,s,c,u;return{c(){n=m("div"),r=m("input"),i=S(),a=m("span"),a.textContent="save",l=S(),s=m("span"),s.textContent="cancel",$(r,"type","text"),$(r,"id","doc-name-input"),$(r,"placeholder","Document name"),$(r,"class","svelte-14sal7q"),$(a,"class","doc-name-edit-action svelte-14sal7q"),$(s,"class","doc-name-edit-action svelte-14sal7q")},m(e,o){p(e,n,o),f(n,r),C(r,t[0]),f(n,i),f(n,a),f(n,l),f(n,s),c||(u=[x(r,"input",t[12]),x(a,"click",t[7]),x(s,"click",t[8])],c=!0)},p(e,t){1&t&&r.value!==e[0]&&C(r,e[0])},i:e,o:e,d(e){e&&y(n),c=!1,o(u)}}}function ln(e){let t,n,r,o,i,a,l,s,c,u,d,h;t=new Mt({});const g=[an,on],v=[];function E(e,t){return e[6]?0:1}return i=E(e),a=v[i]=g[i](e),c=new rn({props:{tree:e[2],flowyTreeNode:e[4],docCursorEntryId:e[3].cursorEntryId,docCursorSelStart:e[3].cursorSelectionStart,docCursorSelEnd:e[3].cursorSelectionEnd,findRelevantDocNames:e[10],handleCollapseEntry:bt.collapseEntry,handleDedent:bt.dedentEntry,handleEntryBackspace:bt.backspaceEntry,handleExpandEntry:bt.expandEntry,handleGoDown:bt.entryGoDown,handleGoUp:bt.entryGoUp,handleIndent:bt.indentEntry,handleMultilinePaste:bt.savePastedEntries,handleMoveCursorLeft:bt.moveCursorLeft,handleMoveCursorRight:bt.moveCursorRight,handleSaveCursorPos:bt.saveCursorPosition,handleSaveDocEntry:bt.saveCurrentPageDocEntry,handleSaveFullCursor:bt.saveCursor,handleSplitEntry:bt.splitEntry,handleUpdateEntryLinks:bt.updateEntryLinks,handleSwapWithAboveEntry:bt.swapWithAboveEntry,handleSwapWithBelowEntry:bt.swapWithBelowEntry,handleCycleEntryHeadingSize:bt.cycleEntryHeadingSize,handleReplaceEntryTextAroundCursor:bt.replaceEntryTextAroundCursor}}),d=new Ot({props:{backlinks:e[1]}}),{c(){ee(t.$$.fragment),n=S(),r=m("div"),o=m("div"),a.c(),l=S(),s=m("div"),ee(c.$$.fragment),u=S(),ee(d.$$.fragment),$(o,"id","doc-name-container"),$(s,"id","doc-content"),$(r,"id","document"),$(r,"class","svelte-14sal7q")},m(e,a){te(t,e,a),p(e,n,a),p(e,r,a),f(r,o),v[i].m(o,null),f(r,l),f(r,s),te(c,s,null),f(r,u),te(d,r,null),h=!0},p(e,[t]){let n=i;i=E(e),i===n?v[i].p(e,t):(K(),Q(v[n],1,1,()=>{v[n]=null}),X(),a=v[i],a||(a=v[i]=g[i](e),a.c()),Z(a,1),a.m(o,null));const r={};4&t&&(r.tree=e[2]),16&t&&(r.flowyTreeNode=e[4]),8&t&&(r.docCursorEntryId=e[3].cursorEntryId),8&t&&(r.docCursorSelStart=e[3].cursorSelectionStart),8&t&&(r.docCursorSelEnd=e[3].cursorSelectionEnd),c.$set(r);const l={};2&t&&(l.backlinks=e[1]),d.$set(l)},i(e){h||(Z(t.$$.fragment,e),Z(a),Z(c.$$.fragment,e),Z(d.$$.fragment,e),h=!0)},o(e){Q(t.$$.fragment,e),Q(a),Q(c.$$.fragment,e),Q(d.$$.fragment,e),h=!1},d(e){ne(t,e),e&&y(n),e&&y(r),v[i].d(),ne(c),ne(d)}}}function sn(e,t,n){let r;s(e,bt,e=>n(3,r=e));let{params:o={}}=t,i=Promise.resolve();j(()=>{var e;e=()=>{MathJax.texReset(),MathJax.typesetClear()},i=i.then(()=>(e(),MathJax.typesetPromise())).catch(e=>console.log("Typeset failed: "+e.message))});let a,l,c,u,d,h=r.docName;return e.$set=e=>{"params"in e&&n(11,o=e.params)},e.$$.update=()=>{if(2048&e.$$.dirty){let e=parseInt(o.id);if(!isNaN(e)){let t=e;bt.navigateToDoc(t.toString())}}8&e.$$.dirty&&n(2,l=null!==r.currentDocId?r.documents[r.currentDocId].tree:null),4&e.$$.dirty&&n(4,c=l&&l.getRoot()||null),8&e.$$.dirty&&n(5,u=r.docName),8&e.$$.dirty&&n(6,d=r.docIsEditingName),8&e.$$.dirty&&n(1,a=function(){let e=r.linkGraph.getBacklinks(r.currentDocId),t={};for(let[[n,o],i]of e.entries()){let e=r.documents[n];n in t||(t[n]={id:n,name:r.documents[n].name,entries:{}}),t[n].entries[o]={id:o,text:e.tree.getEntryText(o),headingSize:e.tree.getEntryHeadingSize(o)}}return t}())},[h,a,l,r,c,u,d,function(){bt.saveEditingDocName(h)},function(){n(0,h=u),bt.cancelEditingDocName()},function(){n(0,h=u),bt.startEditingDocName()},function(e){let t=[];return e.split(/\s+/).forEach(e=>{Object.keys(r.docNameInvIndex).forEach(n=>{n.includes(e)&&r.docNameInvIndex[n].forEach(e=>{t.includes(r.documents[e].name)||t.push(r.documents[e].name)})})}),t},o,function(){h=this.value,n(0,h)}]}class cn extends oe{constructor(e){super(),re(this,e,sn,ln,a,{params:11})}}function un(e,t,n){const r=e.slice();return r[9]=t[n],r}function dn(e){let t,n,r,o,i,a,l,s,c,u,d,g,v,w,b,C,I=e[9].doc.name+"",D=new Date(e[9].doc.lastUpdated).toLocaleString()+"";function N(...t){return e[7](e[9],...t)}return{c(){t=m("tr"),n=m("td"),r=m("input"),i=S(),a=m("td"),l=m("a"),s=E(I),u=S(),d=m("td"),g=E(D),v=S(),$(r,"type","checkbox"),r.checked=o=e[9].isSelected,$(n,"class","doc-select svelte-1m1jkal"),$(l,"href",c="#/doc/"+e[9].doc.id),$(a,"class","svelte-1m1jkal"),$(d,"class","last-updated svelte-1m1jkal"),$(t,"class",w=h(e[9].isSelected?"selected-doc":"")+" svelte-1m1jkal")},m(e,o){p(e,t,o),f(t,n),f(n,r),f(t,i),f(t,a),f(a,l),f(l,s),f(t,u),f(t,d),f(d,g),f(t,v),b||(C=x(r,"change",N),b=!0)},p(n,i){e=n,2&i&&o!==(o=e[9].isSelected)&&(r.checked=o),2&i&&I!==(I=e[9].doc.name+"")&&k(s,I),2&i&&c!==(c="#/doc/"+e[9].doc.id)&&$(l,"href",c),2&i&&D!==(D=new Date(e[9].doc.lastUpdated).toLocaleString()+"")&&k(g,D),2&i&&w!==(w=h(e[9].isSelected?"selected-doc":"")+" svelte-1m1jkal")&&$(t,"class",w)},d(e){e&&y(t),b=!1,C()}}}function hn(e){let t,n,r,i,a,l,s,c,u,d,h,v,w,b,k,C,I,D,N,L,j,A,B,T,P,O,_,M,z,U;i=new De({props:{data:Be,scale:"1"}}),c=new De({props:{data:Ae,scale:"1"}});let H=e[1],R=[];for(let t=0;t<H.length;t+=1)R[t]=dn(un(e,H,t));return{c(){t=m("div"),n=m("div"),r=m("button"),ee(i.$$.fragment),l=S(),s=m("button"),ee(c.$$.fragment),u=S(),d=m("div"),h=m("select"),v=m("option"),w=E("Sort by name ↓"),k=m("option"),C=E("Sort by name ↑"),D=m("option"),N=E("Sort by last updated ↓"),j=m("option"),A=E("Sort by last updated ↑"),T=S(),P=m("table"),O=m("tr"),O.innerHTML='<th class="svelte-1m1jkal"></th> \n    <th id="doc-name-header" class="svelte-1m1jkal">name</th> \n    <th class="svelte-1m1jkal">last updated</th>',_=S();for(let e=0;e<R.length;e+=1)R[e].c();r.disabled=a=!e[0],$(n,"id","top-control-button-bar"),v.__value="name-asc",v.value=v.__value,v.selected=b="name-asc"===e[2].sortMode,k.__value="name-desc",k.value=k.__value,k.selected=I="name-desc"===e[2].sortMode,D.__value="updated-asc",D.value=D.__value,D.selected=L="updated-asc"===e[2].sortMode,j.__value="updated-desc",j.value=j.__value,j.selected=B="updated-desc"===e[2].sortMode,$(h,"id","sort-select"),$(d,"id","top-control-sort"),$(d,"class","svelte-1m1jkal"),$(t,"id","top-control"),$(t,"class","svelte-1m1jkal"),$(O,"id","docsListHeader"),$(O,"class","svelte-1m1jkal"),$(P,"id","docsList"),$(P,"class","svelte-1m1jkal")},m(o,a){p(o,t,a),f(t,n),f(n,r),te(i,r,null),f(n,l),f(n,s),te(c,s,null),f(t,u),f(t,d),f(d,h),f(h,v),f(v,w),f(h,k),f(k,C),f(h,D),f(D,N),f(h,j),f(j,A),p(o,T,a),p(o,P,a),f(P,O),f(P,_);for(let e=0;e<R.length;e+=1)R[e].m(P,null);M=!0,z||(U=[x(r,"click",e[4]),x(s,"click",e[3]),x(h,"change",e[5])],z=!0)},p(e,[t]){if((!M||1&t&&a!==(a=!e[0]))&&(r.disabled=a),(!M||4&t&&b!==(b="name-asc"===e[2].sortMode))&&(v.selected=b),(!M||4&t&&I!==(I="name-desc"===e[2].sortMode))&&(k.selected=I),(!M||4&t&&L!==(L="updated-asc"===e[2].sortMode))&&(D.selected=L),(!M||4&t&&B!==(B="updated-desc"===e[2].sortMode))&&(j.selected=B),66&t){let n;for(H=e[1],n=0;n<H.length;n+=1){const r=un(e,H,n);R[n]?R[n].p(r,t):(R[n]=dn(r),R[n].c(),R[n].m(P,null))}for(;n<R.length;n+=1)R[n].d(1);R.length=H.length}},i(e){M||(Z(i.$$.fragment,e),Z(c.$$.fragment,e),M=!0)},o(e){Q(i.$$.fragment,e),Q(c.$$.fragment,e),M=!1},d(e){e&&y(t),ne(i),ne(c),e&&y(T),e&&y(P),g(R,e),z=!1,o(U)}}}function fn(e,t){let n=e.doc,r=t.doc;return n.name<r.name?-1:n.name>r.name?1:0}function pn(e,t){let n=e.doc,r=t.doc;return n.name>r.name?-1:n.name<r.name?1:0}function yn(e,t){let n=e.doc,r=t.doc;return n.lastUpdated<r.lastUpdated?-1:n.lastUpdated>r.lastUpdated?1:0}function gn(e,t){let n=e.doc,r=t.doc;return n.lastUpdated>r.lastUpdated?-1:n.lastUpdated<r.lastUpdated?1:0}function mn(e,t,n){let r,o;function i(e,t){bt.docsDisplaySetSelection(t,e.target.checked)}s(e,bt,e=>n(2,r=e));let a,l=!1;return e.$$.update=()=>{4&e.$$.dirty&&n(8,o=function(){switch(r.sortMode){case"name-asc":return fn;case"name-desc":return pn;case"updated-asc":return yn;case"updated-desc":return gn;default:return fn}}()),260&e.$$.dirty&&n(1,a=function(){let e=!1,t=Object.entries(r.docsDisplay).map(([t,n])=>(e=e||n.isSelected,{doc:r.documents[t],isSelected:n.isSelected})).sort(o);return n(0,l=e),t}())},[l,a,r,function(){Ve("/create-doc")},function(){let e=Object.entries(r.docsDisplay).filter(([e,t])=>t.isSelected).map(([e,t])=>e),t=`Are you sure you want to delete the selected ${n=e.length,1==n?"document":n+" documents"}?`;var n;window.confirm(t)&&bt.deleteDocs(e)},function(e){bt.changeSort(e.target.value)},i,(e,t)=>i(t,e.doc.id)]}class vn extends oe{constructor(e){super(),re(this,e,mn,hn,a,{})}}function En(e,t,n){let r;s(e,bt,e=>n(1,r=e));let{params:o={}}=t,i=decodeURI(o.name);if(i in r.docIdLookupByDocName){Ve("/doc/"+r.docIdLookupByDocName[i])}else console.log("TODO: couldnt find page name in lookup. name = ",o.name),console.log("lookup = ",r.docIdLookupByDocName);return e.$set=e=>{"params"in e&&n(0,o=e.params)},[o]}class Sn extends oe{constructor(e){super(),re(this,e,En,null,a,{params:0})}}function wn(e,t,n){let r;return s(e,bt,e=>n(0,r=e)),bt.createNewDocument(),Ve("/doc/"+r.currentDocId),[]}class xn extends oe{constructor(e){super(),re(this,e,wn,null,a,{})}}function $n(t){let n,r,o;return{c(){n=m("h1"),n.textContent="Not found",r=S(),o=m("p"),o.textContent="The path requested was not found."},m(e,t){p(e,n,t),p(e,r,t),p(e,o,t)},p:e,i:e,o:e,d(e){e&&y(n),e&&y(r),e&&y(o)}}}class bn extends oe{constructor(e){super(),re(this,e,null,$n,a,{})}}class kn{get(e){const t=localStorage.getItem(e);return null==t?null:t}set(e,t){return localStorage.setItem(e,t)}}function Cn(t){let n,r,i,a,l,s,c,u,d,h,g,v,E,w;return r=new Ge({props:{routes:t[2]}}),l=new De({props:{data:je,scale:"1"}}),{c(){n=m("main"),ee(r.$$.fragment),i=S(),a=m("div"),ee(l.$$.fragment),s=S(),c=m("button"),c.textContent="export",u=S(),d=m("button"),d.textContent="import",h=S(),g=m("input"),$(n,"class","svelte-cxa7h9"),$(c,"class","svelte-cxa7h9"),$(d,"class","svelte-cxa7h9"),$(a,"id","actions-bar"),$(a,"class","svelte-cxa7h9"),$(g,"id","import-docs"),$(g,"type","file"),$(g,"class","svelte-cxa7h9")},m(e,o){p(e,n,o),te(r,n,null),p(e,i,o),p(e,a,o),te(l,a,null),f(a,s),f(a,c),f(a,u),f(a,d),p(e,h,o),p(e,g,o),v=!0,E||(w=[x(c,"click",t[0]),x(d,"click",In),x(g,"change",t[1])],E=!0)},p:e,i(e){v||(Z(r.$$.fragment,e),Z(l.$$.fragment,e),v=!0)},o(e){Q(r.$$.fragment,e),Q(l.$$.fragment,e),v=!1},d(e){e&&y(n),ne(r),e&&y(i),e&&y(a),ne(l),e&&y(h),e&&y(g),E=!1,o(w)}}}function In(){document.getElementById("import-docs").click()}function Dn(e,t,n){let r;var o;function i(e){bt.init(e.documents,e.docIdLookupByDocName,e.linkGraph,e.docNameInvIndex)}s(e,bt,e=>n(3,r=e)),o=()=>{document.addEventListener("selectionchange",()=>{let e=document.getSelection();if(e.anchorNode.className&&e.anchorNode.className.includes&&e.anchorNode.className.includes("entry-display"))return;if(!document.getElementById("doc-header"))return;let t=document.getElementById("doc-content"),n=document.getElementById("doc-name-autocomplete");if(n&&n.contains(e.anchorNode))return;if(!t.contains(e.anchorNode))return void bt.saveCursor(null,null,null);let r=function(e){let t,n=e,r=["rendered-entry","icon-container","entry-display"];function o(){return t=function(e,t){for(var n=0;n<t.length;n++)if(e.includes(t[n]))return t[n];return!1}(n.className,r),t}for(;n&&(!n.className||!n.className.includes||!o());)n=n.parentNode,n&&n.className&&n.className.includes&&o();return{node:n,className:t}}(e.anchorNode);if("icon-container"!==r.className)if("rendered-entry"!==r.className)r.node?bt.saveCursor(parseInt(r.node.dataset.entryId),0,0):bt.saveCursor(null,null,null);else{const t=r.node;let n=function e(t,n,r){if(t.nodeType!==Node.TEXT_NODE&&t.nodeType!==Node.ELEMENT_NODE)return null;if(t.nodeType===Node.TEXT_NODE)return t===n.anchorNode?{found:!0,pos:r+n.anchorOffset}:{found:!1,pos:r+t.textContent.length};if("mjx-container"===t.localName)return{found:!1,pos:r+2+t.dataset.original.length};"strong"===t.localName||"em"===t.localName?r+=2:"a"===t.localName&&"auto"!==t.dataset.markupLinkType&&"internal"!==t.dataset.markupLinkType&&(r+=1);let o=t.childNodes;for(var i=0;i<o.length;++i){let t=e(o[i],n,r);if(t.found)return t;r=t.pos}return"strong"===t.localName||"em"===t.localName?r+=2:"a"===t.localName&&"auto"!==t.dataset.markupLinkType&&"internal"!==t.dataset.markupLinkType&&(r+=t.getAttribute("href").length+3),{found:!1,pos:r}}(t,e,0).pos,o=parseInt(t.dataset.entryId);bt.saveCursor(o,n,n)}else bt.saveCursor(null,null,null)})},L().$$.on_mount.push(o);let a=new vt(new kn);i(Et(a.getDocuments()));const l={"/":vn,"/doc/:id":cn,"/create-doc":xn,"/page/:name":Sn,"*":bn};return e.$$.update=()=>{8&e.$$.dirty&&a.saveDocuments(r.documents)},[function(){let e=a.getDocumentsString();location.assign("data:application/octet-stream;base64,"+btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode("0x"+t)}))))},function(e){console.log(" ## handleDocsImport, ev = ",e),console.log(" ## handleDocsImport, this.files = ",this,this.files);const t=this.files;if(t.length>1)return void console.log("TODO: multiple files uploaded. show an error message of some kind? is this even possible?");t[0].arrayBuffer().then(e=>{let t=(new TextDecoder).decode(new Uint8Array(e));try{let e=JSON.parse(t);Object.entries(e).forEach(([t,n])=>{e[t]=wt(n.id,n.name,n.lastUpdated,n.tree.entries,n.tree.node)}),i(Et(e)),function(e){if(!e||e.length<1||"/"!=e.charAt(0)&&0!==e.indexOf("#/"))throw Error("Invalid parameter location");H().then(()=>{window.location.hash=("#"==e.charAt(0)?"":"#")+e})}("/")}catch(e){console.log("TODO: file is not a valid JSON object, err = ",e)}})},l]}return new class extends oe{constructor(e){super(),re(this,e,Dn,Cn,a,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
